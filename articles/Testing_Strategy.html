<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>B-Safe Testing and Validation v. 0.1 for B-Safe v. 0.1 • bsafe</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="Testing_Strategy_files/libs/clipboard/clipboard.min.js"></script><script src="Testing_Strategy_files/libs/quarto-html/popper.min.js"></script><script src="Testing_Strategy_files/libs/quarto-html/tippy.umd.min.js"></script><link href="Testing_Strategy_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Testing_Strategy_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="B-Safe Testing and Validation v. 0.1 for B-Safe v. 0.1">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bsafe</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/Testing_Strategy.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Testing_Strategy.html">B-Safe Testing and Validation v. 0.1 for B-Safe v. 0.1</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report-non-cran/">Non-CRAN unit test report</a></li>
  </ul>
</li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://insightsengineering.github.io/bsafe/main">main</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/insightsengineering/bsafe" aria-label="View on Github"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>B-Safe Testing and Validation v. 0.1 for B-Safe v. 0.1</h1>

      <p class="author">Alexander StemkeLars AndersenJames TurayLouise Whiteheadreviewed by Oliver Sailer and Dunfu Yang</p>
      <p class="date">2024-11-20</p>

      <small class="dont-index">Source: <a href="https://github.com/insightsengineering/bsafe/blob/main/vignettes/Testing_Strategy.qmd" class="external-link"><code>vignettes/Testing_Strategy.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <div style="page-break-after: always;"></div>
<section class="section level2" data-number="1"><h2 data-number="1" id="background">
<span class="header-section-number">1</span> <strong>Background</strong>
<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>The B-Safe r-shiny application is an interactive statistical software used to analyse several safety endpoints using the Bayesian (robust) Meta-Analytic Predictive (MAP) method. This approach was based on the works of <span class="citation" data-cites="neuenschwander_summarizing_2010">[<a href="#ref-neuenschwander_summarizing_2010" role="doc-biblioref">1</a>]</span>.</p>
<section class="level2" data-number="1.1"><h3 data-number="1.1" id="requirement-specification">
<span class="header-section-number">1.1</span> <strong>Requirement Specification</strong>
<a class="anchor" aria-label="anchor" href="#requirement-specification"></a>
</h3>
<p>The application will present its results via graphs, tables and figures. The application will calculate the meta-analytic predictive (MAP) prior and the robust MAP priors, assesses prior data conflict and reports the effective sample size / effective number of events of the historical data.</p>
<p>The user will then be able to download output data / simulated results in a tabular form.</p>
<p>An error message is expected when the input table does not contain the required columns and when the input parameters does not match the intended analysis.</p>
</section><section class="level2" data-number="1.2"><h3 data-number="1.2" id="purpose-and-scope">
<span class="header-section-number">1.2</span> <strong>Purpose and Scope</strong>
<a class="anchor" aria-label="anchor" href="#purpose-and-scope"></a>
</h3>
<p>The aim of this testing and validation plan is to test whether the application is working as specified and that all described functionality are working as intended.</p>
<p>Test cases will cover common use cases of the application with the aim of ensuring that calculations done by the application are implemented properly. All tests are designed for version 0.1 in combination with the version 0.1.</p>
</section></section><section class="section level2" data-number="2"><h2 data-number="2" id="testing-and-requirement-strategy">
<span class="header-section-number">2</span> <strong>Testing and Requirement Strategy</strong>
<a class="anchor" aria-label="anchor" href="#testing-and-requirement-strategy"></a>
</h2>
<p>Software and packages used by the application to perform the validation includes:</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<caption>Softwares and Packages</caption>
<thead><tr class="header">
<th style="text-align: left;">Program</th>
<th style="text-align: left;">Version</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">R</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">shiny</td>
<td style="text-align: left;">1.7.5.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">RBesT</td>
<td style="text-align: left;">1.7.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rmarkdown</td>
<td style="text-align: left;">2.25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2jags</td>
<td style="text-align: left;">0.7-1</td>
</tr>
<tr class="even">
<td style="text-align: left;">rstantools</td>
<td style="text-align: left;">2.1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bayesplot</td>
<td style="text-align: left;">1.8.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">checkmate</td>
<td style="text-align: left;">2.3.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">testthat</td>
<td style="text-align: left;">3.2.1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The testing strategy is based on Input Testing and Structural Testing. Input Testing is performed to investigate whether erroneous input by the user is handled as intended by the application. Structural Testing deals with the confirmation of the accuracy of the calculations done by the application. Different scenarios to cater for common cases will be simulated for the structural testing to be performed.</p>
<p>The code for the thresholds for structural testing, as well as the code to simulate scenarios are dependent from package itself and were reviewed by to statisticians independently.</p>
</section><section class="section level2" data-number="3"><h2 data-number="3" id="input-testing">
<span class="header-section-number">3</span> <strong>Input Testing</strong>
<a class="anchor" aria-label="anchor" href="#input-testing"></a>
</h2>
<p>This section describes the verification procedure of the functionality of the B-Safe application.</p>
<p>First, testing requirements and strategies are outlined. Then the handling of the testing failures and the processes for performing the testing are characterized.</p>
<p>The table below gives a brief overview about the parameters/variables the user is able to set as used within the document.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<caption>Definitions of Variable</caption>
<colgroup>
<col style="width: 11%">
<col style="width: 88%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">STUDYID</td>
<td style="text-align: left;">Study number or name</td>
</tr>
<tr class="even">
<td style="text-align: left;">HIST</td>
<td style="text-align: left;">0 for current trial and 1 for historical trial</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ARM</td>
<td style="text-align: left;">Defines the treatment arm of the analysis</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAF_TOPIC</td>
<td style="text-align: left;">Safety topics of interest</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: left;">Total number of patients in the respective study</td>
</tr>
<tr class="even">
<td style="text-align: left;">N_WITH_AE</td>
<td style="text-align: left;">Total number of patients for the respective safety topic in that study</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">who expereienced at least one adverse event</td>
</tr>
<tr class="even">
<td style="text-align: left;">TOT_EXP</td>
<td style="text-align: left;">Total exposure time for the respective safety topic in that study:</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">sum of patients treatment exposure period until occurence of first event.</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">If no event occurs, use complete observation time</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dose</td>
<td style="text-align: left;">Amount/weight of the drug the patient took</td>
</tr>
<tr class="even">
<td style="text-align: left;">Freq</td>
<td style="text-align: left;">Number of times the medicine/drug was taken by the patient</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Length</td>
<td style="text-align: left;">Time the patient was on the treatment</td>
</tr>
<tr class="even">
<td style="text-align: left;">Treat</td>
<td style="text-align: left;">The specific treatment the patient was on</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MAP Prior</td>
<td style="text-align: left;">Meta-Analytic Predictive Prior</td>
</tr>
<tr class="even">
<td style="text-align: left;">CrI</td>
<td style="text-align: left;">Credible Interval</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CrILB</td>
<td style="text-align: left;">Credible Interval Lower Boundary</td>
</tr>
<tr class="even">
<td style="text-align: left;">CrIUB</td>
<td style="text-align: left;">Credible Interval Upper Boundary</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ESS</td>
<td style="text-align: left;">Expected Sample Size</td>
</tr>
<tr class="even">
<td style="text-align: left;">ENE</td>
<td style="text-align: left;">Expected Number of Events</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>In case the expected specifications are not met, the test is failed.</p>
<p>The conditions in table 3 are all implementations that needs to be tested before the actual testing of the full functionality of the B-Safe application can be executed. Various test cases are grouped together and performed in a single action. For example, all test cases that contain checking the applications handling of input values/characters.</p>
<p>All those requirements are tested via the <em>checkmate</em> R package, which allows for both warnings as well as errors to guide the user along the error and help fixing the problem. In addition the required variables are within the same approach not only tested for specific required typing, but also the <em>checkmate</em> R package allows to test certain boundaries of those variables as well as restricting inputs to certain formats, e.g., csv.</p>
<section class="level2" data-number="3.1"><h3 data-number="3.1" id="binary-endpoint">
<span class="header-section-number">3.1</span> <strong>Binary Endpoint</strong>
<a class="anchor" aria-label="anchor" href="#binary-endpoint"></a>
</h3>
<ol type="1">
<li>Setup a .csv file</li>
</ol>
<p>Assumptions of the variables:</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<caption>Input</caption>
<colgroup>
<col style="width: 16%">
<col style="width: 83%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Input</th>
<th style="text-align: left;">Specification</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">File type</td>
<td style="text-align: left;">.csv file</td>
</tr>
<tr class="even">
<td style="text-align: left;">STUDYID</td>
<td style="text-align: left;">character or numeric variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HIST</td>
<td style="text-align: left;">boolean character variable</td>
</tr>
<tr class="even">
<td style="text-align: left;">ARM</td>
<td style="text-align: left;">character variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: left;">integer/numeric variable greater than zero</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAF_TOPIC</td>
<td style="text-align: left;">character variable with less than 30 characters</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N_WITH_AE</td>
<td style="text-align: left;">integer variable greater than zero but less or equal to N</td>
</tr>
<tr class="even">
<td style="text-align: left;">TOT_EXP</td>
<td style="text-align: left;">numeric varibale greater than zero</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dose</td>
<td style="text-align: left;">numeric variable that can be treated as a factor. It is an additional variable</td>
</tr>
<tr class="even">
<td style="text-align: left;">Freq(Frequency)</td>
<td style="text-align: left;">integer variable that can be treated as a factor. It is an additional variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Length</td>
<td style="text-align: left;">a numeric variable that is an additional factor</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Robust MAP Prior:</p>
<ol start="2" type="1">
<li>Weakly-informative Prior weight is numeric between <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0.01</mn><annotation encoding="application/x-tex">0.01</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0.99</mn><annotation encoding="application/x-tex">0.99</annotation></semantics></math>
</li>
</ol>
<p>New Trial Analysis:</p>
<ol start="3" type="1">
<li>Number of Patients in selected ARM is an integer &gt; <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> but <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>≤</mo><annotation encoding="application/x-tex">\le</annotation></semantics></math> 200</li>
<li>Number of Patients with with AE is an integer <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>≥</mo><annotation encoding="application/x-tex">\ge</annotation></semantics></math><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math> but <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>≤</mo><annotation encoding="application/x-tex">\le</annotation></semantics></math> number of patients in selected ARM</li>
</ol>
<p>Decision Making:</p>
<ol start="5" type="1">
<li>Likelihood: Percentage of Patients with AE two integers specifying lower bound and upper bound from 0 to 100.</li>
<li>MAP Prior: Percentage of Patients with AE two integers specifying lower bound and upper bound from 0 to 100.</li>
<li>Robust MAP Prior: Percentage of Patients with AE two integers specifying lower bound and upper bound from 0 to 100.</li>
<li>Posterior: Percentage of Patients with AE two integers specifying lower bound and upper bound from 0 to 100.</li>
</ol>
<p>Download Results:</p>
<ol start="9" type="1">
<li>Number of comparisons: integer from <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>5</mn><annotation encoding="application/x-tex">5</annotation></semantics></math>
</li>
</ol>
<p>Test cases were performed as shown in the the table below. Different formats of the various input are violated in different test cases. For any false input, the user shall be informed about the error and the error will be displayed. The test is passed if no error message is displayed.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 10%">
<col style="width: 50%">
<col style="width: 19%">
<col style="width: 19%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Test Case</th>
<th style="text-align: left;">Description of violation</th>
<th style="text-align: left;">Expected Response</th>
<th style="text-align: left;">Observed Response</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">An xlsx file uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">A file without the StudyID coulum uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">A file without the Hist coulum uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">A file without the ARM column uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">A file without N column uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">A file without N_WITH_AE uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">A file without SAF_Topic uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">A file without Dose column uploaded</td>
<td style="text-align: left;">No Error</td>
<td style="text-align: left;">No Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">A file without FREQ column uploaded</td>
<td style="text-align: left;">No Error</td>
<td style="text-align: left;">No Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">A file without Length coumn uploaded</td>
<td style="text-align: left;">No Error</td>
<td style="text-align: left;">No Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">11</td>
<td style="text-align: left;">A file with number of Patients less than zero</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">12</td>
<td style="text-align: left;">A file with more events patients</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Some inputs including weakly-informative prior weight for the calculation of Robust MAP Prior, number of patients in selected arm and number of patients with AE in the new trial analysis, percentages for making statistical inferences about MAP Prior, Robust MAP Prior, Likelihood and Posterior are all imputed with a slider. Different values along the range on the sliders will be tested in the various scenarios.</p>
</section><section class="level2" data-number="3.2"><h3 data-number="3.2" id="time-to-event-endpoint">
<span class="header-section-number">3.2</span> <strong>Time To Event Endpoint</strong>
<a class="anchor" aria-label="anchor" href="#time-to-event-endpoint"></a>
</h3>
<ol type="1">
<li>Setup a .csv file</li>
</ol>
<p>Assumptions of the variables:</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<caption>Input</caption>
<colgroup>
<col style="width: 16%">
<col style="width: 83%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Input</th>
<th style="text-align: left;">Specification</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">File type</td>
<td style="text-align: left;">.csv file</td>
</tr>
<tr class="even">
<td style="text-align: left;">STUDYID</td>
<td style="text-align: left;">character or numeric variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HIST</td>
<td style="text-align: left;">boolean character variable</td>
</tr>
<tr class="even">
<td style="text-align: left;">ARM</td>
<td style="text-align: left;">character variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N</td>
<td style="text-align: left;">integer/numeric variable greater than zero</td>
</tr>
<tr class="even">
<td style="text-align: left;">SAF_TOPIC</td>
<td style="text-align: left;">character variable with less than 30 characters</td>
</tr>
<tr class="odd">
<td style="text-align: left;">N_WITH_AE</td>
<td style="text-align: left;">integer variable greater than zero but less or equal to N</td>
</tr>
<tr class="even">
<td style="text-align: left;">TOT_EXP</td>
<td style="text-align: left;">numeric varibale greater than zero</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dose</td>
<td style="text-align: left;">numeric variable that can be treated as a factor. It is an additional variable</td>
</tr>
<tr class="even">
<td style="text-align: left;">Freq(Frequency)</td>
<td style="text-align: left;">integer variable that can be treated as a factor. It is an additional variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Length</td>
<td style="text-align: left;">a numeric variable that is an additional factor</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Robust MAP Prior:</p>
<ol start="2" type="1">
<li>Weakly-informative Prior weight is numeric between <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0.01</mn><annotation encoding="application/x-tex">0.01</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0.99</mn><annotation encoding="application/x-tex">0.99</annotation></semantics></math>
</li>
<li>Weakly-informative Prior mean on the exp scale is numeric between <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0.01</mn><annotation encoding="application/x-tex">0.01</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>3</mn><annotation encoding="application/x-tex">3</annotation></semantics></math>
</li>
</ol>
<p>New Trial Analysis:</p>
<ol start="4" type="1">
<li>Number of first occurrence of the event is numeric between <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>200</mn><annotation encoding="application/x-tex">200</annotation></semantics></math>
</li>
<li>Cumulative time to occurrence of the first events is numeric between <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1000</mn><annotation encoding="application/x-tex">1000</annotation></semantics></math>
</li>
</ol>
<p>Decision Making:</p>
<ol start="6" type="1">
<li>Likelihood: area of log(hazard) for patients with AE is numeric within a 99.8% (0.01% to 99.9%) quantile.</li>
<li>MAP Prior: area of log(hazard) for patients with AE is numeric within a 99.8% (0.01% to 99.9%) quantile.</li>
<li>Robust MAP Prior: area of log(hazard) for patients with AE is within a 99.8% (0.01% to 99.9%) quantile.</li>
<li>Posterior: area of log(hazard) for patients with AE is numeric within a 99.8% (0.01% to 99.9%) quantile.</li>
</ol>
<p>Download Results:</p>
<ol start="10" type="1">
<li>Number of comparisons: integer from <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>5</mn><annotation encoding="application/x-tex">5</annotation></semantics></math>
</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 10%">
<col style="width: 50%">
<col style="width: 19%">
<col style="width: 19%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Test Case</th>
<th style="text-align: left;">Description of violation</th>
<th style="text-align: left;">Expected Response</th>
<th style="text-align: left;">Observed Response</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">An xlsx file uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">A file without the StudyID coulum uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">A file without the Hist coulum uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">A file without the ARM column uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">A file without N column uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">A file without N_WITH_AE uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">A file without TOT_Exp uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">A file without SAF_Topic uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">A file without Dose column uploaded</td>
<td style="text-align: left;">No Error</td>
<td style="text-align: left;">No Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">A file without FREQ column uploaded</td>
<td style="text-align: left;">No Error</td>
<td style="text-align: left;">No Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">11</td>
<td style="text-align: left;">A file without Length coumn uploaded</td>
<td style="text-align: left;">No Error</td>
<td style="text-align: left;">No Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">12</td>
<td style="text-align: left;">A file with number of patients less than zero</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="odd">
<td style="text-align: left;">13</td>
<td style="text-align: left;">A file with more events than patients</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
<tr class="even">
<td style="text-align: left;">14</td>
<td style="text-align: left;">A file with a negative TOT_Exp uploaded</td>
<td style="text-align: left;">Error</td>
<td style="text-align: left;">Error</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Some inputs including weakly-informative prior weight for the calculation of Robust MAP Prior, number of patients in selected arm and number of patients with AE in the new trial analysis, percentages for making statistical inferences about MAP Prior, Robust MAP Prior, Likelihood and Posterior are all imputed with a slider. Different values along the range on the sliders will be tested in the various scenarios.</p>
</section></section><section class="section level2" data-number="4"><h2 data-number="4" id="testing-framework-in-testthat">
<span class="header-section-number">4</span> <strong>Testing Framework in testthat</strong>
<a class="anchor" aria-label="anchor" href="#testing-framework-in-testthat"></a>
</h2>
<p>For testing purpose with testthat, the thresholds for the defined scenarios, were created beforehand and saved as a separate file. As well were reference images for scenario 03 created and saved for comparison. Moreover, due to the use of Stan, also for image comparison the element was saved. Moreover, the parameter, used in testing, were also defined upfront and are saved in the same file .</p>
<p>Therefore the package is being used to ensure a framework, that is commonly used and stable. Hereby, the testing setup replicates the workflow of the application with loading the respective data, parameters as well as thresholds.</p>
<p>First all functions that B-SAFE is running are run in the needed order to ensure the same workflow. Therefore, all calculations are performed with . Afterwards the outputs of the different plots as well as tables that are being displayed within the application are compared against the reference images, where the binaries of the images are compared and expected to be equal.</p>
<p>In the setup file (), all plots will be created and saved in (). This will be executed, prior to the pixel wise comparison. Here all plots will be created. Then in () all the different created plot images will be binary tested (pixelwise comparison) against the reference images () to ensure reproducibility. This graphics check is only performed for all graphics of scenario 3.</p>
<p>Regarding the tables and displayed values, all predefined scenarios will be loaded and then tested. For each scenarios the output from the app will be tested, whether the values are within the predefined boundaries and whether they are displayed at the correct place. Therefore, the tables are double coded and checked. The displayed tables are checked, that the values and NA’s are at their correct position. If a row (e.g. MAP prior summary statistics) appears in two different displayed tables, we check that they are identical.</p>
<p>The framework then either passes the comparison as the values are within a certain tolerance, or the framework will throw an error when the values are not within the threshold respective their tolerance. For more details regarding the thresholds and tolerance see section <a href="#sec-simulation-and-testing-of-scenarios" class="quarto-xref">Section 5.1</a>.</p>
<p>ESS and summary statistics are tested independently from each other, for reason see section <a href="#sec-simulation-and-testing-of-scenarios" class="quarto-xref">Section 5.1</a>.</p>
<p>Moreover the displayed tables are checked, that the values and NA’s are at their correct position. If a row (e.g. MAP prior summary statistics) appears in two different displayed tables, we check that they are identical.</p>
<p>Further unit tests have been created to ensure the correct functionality for the helper functions. The overall test coverage is greater than 80%.</p>
</section><section class="section level2" data-number="5"><h2 data-number="5" id="scenario-testing">
<span class="header-section-number">5</span> <strong>Scenario Testing</strong>
<a class="anchor" aria-label="anchor" href="#scenario-testing"></a>
</h2>
<p>Scenario testing was used to verify the computations the B-Safe Shiny application performs.</p>
<p>For this purpose, various conditions were set to capture a wide array of possibilities to set different parameter values. Each simulated scenario is a representation of a probable occurrence in a clinical trial. There are scenarios to cover heterogeneous and homogeneous data, very large to small borrowing of historical information, high and low robustification of the MAP prior. These scenarios are tested for both the Adverse Event Incidence Proportion and the Exposure-Adjusted Adverse Event Rate.</p>
<p>Following each scenario is briefly described. The simulated data sets are displayed in section <a href="#sec-simulation-and-testing-of-scenarios" class="quarto-xref">Section 5.1</a>. For further information (e.g. the level of heterogeneity) please refer to the statistical analysis plan of B-Safe.</p>
<p>All scenarios, except the worst scenarios (2, 4, 12 and 13) pass without any failures. For Scenario 2, 4 and 12 the issues stem from problems with the integration within . The developers of are informed and will fix this in an upcoming version. Scenario 13 describes with different treatment length. This is in violation with the exchange ability assumption for proportions and tests fail for this analysis on a regular basis, therefore, it was excluded from testing for the proportions. For rates it passed the tests.</p>
<p>Those scenarios are tested to be withing a certain threshold. The code to produce the thresholds was not double coded. Instead a thorough code review toke place. It can be found under . This script does not use any function from . Instead it performs the same analysis using . The independent source code review by two statisticians, ensured its validity.</p>
<section class="level2" data-number="5.1"><h3 data-number="5.1" id="sec-simulation-and-testing-of-scenarios">
<span class="header-section-number">5.1</span> <strong>Simulation and Testing of Scenarios</strong>
<a class="anchor" aria-label="anchor" href="#sec-simulation-and-testing-of-scenarios"></a>
</h3>
<p>In this chapter, the scenarios that are described in section <a href="#sec-binary-endpoint-results" class="quarto-xref">Section 6</a> for incidence proportions and in section <a href="#sec-time-to-event-endpoint-results" class="quarto-xref">Section 7</a> for exposure adjusted incidence rates respectively, will be simulated and run through the B-SAFE app with the results being cross-checked for errors.</p>
<p>The testing procedure is as follows. The fixed historical data for each scenario as shown in their respective sections above, were run through 1000 times to generate a set of 1000 different MAP / robust MAP priors. From this set of MAP / robust MAP priors, upper and lower thresholds for the following summary statistics were calculated by taking the 1% and 99% quantile of the summary statistics that were observed over the 1000 simulation replicates. Summary statistics for the MAP / robust MAP priors were: mean, SD, median, 95% Credible Intervals, ESS.</p>
<p>Each of the 1000 MAP / robust MAP priors for each scenario was subsequently updated with the corresponding (fixed) new trial data for that scenario, where the new data is as shown in the tables. Summary statistics for the likelihoods and the posterior distributions were again calculated, and upper and lower thresholds determined as above. The code can be found under .</p>
<p>Tests are then run using . A test will pass if the summary statistics (for the MAP prior, robust MAP prior, likelihood, and posterior) lie within the upper and lower thresholds with a respective tolerance, and fail otherwise. The tolerances were included to adjust for the variability in results. Due to the use of within on each machine a different MCMC is the result of the function calls. For good scenarios (e.g. 1,3) this threshold could be very small (e.g. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>⋅</mo><msup><mn>10</mn><mrow><mi>−</mi><mn>4</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1 \cdot 10^{-4}</annotation></semantics></math>). For worse scenarios (e.g. 4,5), the variability is higher. We decided to use one tolerance for the binary (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>⋅</mo><msup><mn>10</mn><mrow><mi>−</mi><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">3 \cdot 10^{-2}</annotation></semantics></math>) and another for the time to event endpoint (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mo>⋅</mo><msup><mn>10</mn><mrow><mi>−</mi><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">8 \cdot 10^{-2}</annotation></semantics></math>). We used the highest rounded difference we encountered during a couple of test runs. Those tolerances are used for all values except the ESS.</p>
<p>For the ESS/ENE we decided for a 10% tolerance. However, as seen by the observed minimum and maximum values of the 1000 runs, in some cases a absurdly high ESS/ENE is reported. This is a known issue, and we have contacted the authors. For certain mixture components with especially low weights, the integration function malfunctions. Therefore, if the ESS/ENE exceeds the number of patients/events, the MCMC sample will be drawn again, up to three times. After a third attempt the test will fail.</p>
<p>Moreover, for certain scenarios (2, 4, 12), this issue leads to the general exclusion to test these scenarios. In general those are scenarios in which borrowing historical information is strongly discouraged to perform.</p>
<p>Some values are not displayed, neither in the exploratory nor the reporting feature of B-SAFE. Nevertheless, for coding reasons, they are still part of the array structure and will be mentioned here as not available (NA).</p>
<p>All scenario thresholds were reviewed and represent reasonable results regarding their input data. For section <a href="#sec-binary-endpoint-results" class="quarto-xref">Section 6</a> and <a href="#sec-time-to-event-endpoint-results" class="quarto-xref">Section 7</a> the scenarios and their thresholds are displayed. Tested were within the 98% quantiles +/- the respective tolerance. The minimum and maximum of the 1000 iterations are also displayed, to show the possible range, the same analysis with the same dataset can result.</p>
</section><section class="level2" data-number="5.2"><h3 data-number="5.2" id="code-of-data-simulation">
<span class="header-section-number">5.2</span> <strong>Code of Data Simulation</strong>
<a class="anchor" aria-label="anchor" href="#code-of-data-simulation"></a>
</h3>
<p>All three scripts in are not part of the package itself. They are designed specifically for this testing strategy and were reviewed independently.</p>
<p>The scripts generates synthetic data that mimics real-world studies. The code can also be found under </p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Function to simulate 1 study</span></span>
<span><span class="co"># nPat = Number of patients in each group</span></span>
<span><span class="co"># g1 = group 1 (treatment); g2 = group 2 (control)</span></span>
<span><span class="co"># dropout = 0_05: 5% dropout after time units of measure</span></span>
<span><span class="co"># accr = accrual time, is to be in regards to the hazard</span></span>
<span><span class="co"># NObsEvt = type 2 censoring, censor after NObsEvt number of events, probability of observing the event if &lt; 1_</span></span>
<span><span class="co"># accr_timepoint should include 0 and total accrual time_</span></span>
<span><span class="co"># Pre-specify the censor type ahead of time</span></span>
<span></span>
<span></span>
<span><span class="co">#' Simulate a study</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @param nPat</span></span>
<span><span class="co">#' @param hz</span></span>
<span><span class="co">#' @param dropout</span></span>
<span><span class="co">#' @param accr</span></span>
<span><span class="co">#' @param NObsEvt</span></span>
<span><span class="co">#' @param accr_method</span></span>
<span><span class="co">#' @param surv_method</span></span>
<span><span class="co">#' @param intensity</span></span>
<span><span class="co">#' @param accr_timepoint</span></span>
<span><span class="co">#' @param censor_type</span></span>
<span><span class="co">#' @param time_cutoff</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @return</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="va">SimStudy</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">nPat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">100</span>, g2 <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>                     <span class="va">hz</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>                     <span class="va">dropout</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>                     <span class="va">accr</span> <span class="op">=</span> <span class="fl">6</span>,</span>
<span>                     <span class="va">NObsEvt</span> <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>                     <span class="va">accr_method</span> <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>                     <span class="va">surv_method</span> <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>                     <span class="va">intensity</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">6</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>                     <span class="va">accr_timepoint</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>                     <span class="va">censor_type</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                     <span class="va">time_cutoff</span> <span class="op">=</span> <span class="fl">18</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">N</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">nPat</span><span class="op">)</span></span>
<span>  <span class="co"># Observed events either proportional ( &lt; 100) or as absolute numbers</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">NObsEvt</span> <span class="op">&lt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">NObsEvt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">nPat</span><span class="op">)</span> <span class="op">*</span> <span class="va">NObsEvt</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># res: variable which stores the result output</span></span>
<span>  <span class="co"># gID: 1 treatment 2 control</span></span>
<span>  <span class="co"># ID: Subject</span></span>
<span>  <span class="co"># Entry: Entry time according to accrual</span></span>
<span>  <span class="co"># EventTime: Simulated Eventtime + Entry time</span></span>
<span>  <span class="co"># ObsTime: Time observed (min(EventTime, CensorTime)-Entry)</span></span>
<span>  <span class="co"># StudyTime: Timepoint in Study</span></span>
<span>  <span class="co"># Eventindicator: 1 event observed, 0 censored</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="cn">NA</span>, nrow <span class="op">=</span> <span class="va">N</span>, ncol <span class="op">=</span> <span class="fl">8</span>,</span>
<span>    dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">N</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>        <span class="st">"gID"</span>, <span class="st">"ID"</span>, <span class="st">"Entry"</span>, <span class="st">"EventTime"</span>,</span>
<span>        <span class="st">"ObsTime"</span>, <span class="st">"CensorTime"</span>,</span>
<span>        <span class="st">"StudyTime"</span>, <span class="st">"EventIndicator"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># ID and gID just from 1 to number of patients in each group</span></span>
<span>  <span class="va">res</span><span class="op">[</span>, <span class="st">"ID"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="va">N</span></span>
<span>  <span class="va">res</span><span class="op">[</span>, <span class="st">"gID"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">nPat</span><span class="op">[</span><span class="st">"g1"</span><span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="va">nPat</span><span class="op">[</span><span class="st">"g2"</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Different methods for generating Enrollment Time</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">accr_method</span> <span class="op">==</span> <span class="st">"Uniform"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">res</span><span class="op">[</span>, <span class="st">"Entry"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">0</span>, <span class="va">accr</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Poisson accrual times</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">accr_method</span> <span class="op">==</span> <span class="st">"Poisson"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">rtlist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">intensity</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">recruit_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">intensity</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">recruit_time_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">accr_timepoint</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">rtlist</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="op">(</span><span class="va">accr_timepoint</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">rtlist</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;</span> <span class="va">accr_timepoint</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="va">recruit_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">recruit_time</span>, <span class="va">recruit_time_new</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">recruit_time</span><span class="op">)</span> <span class="op">&lt;</span> <span class="va">N</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">enrollment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">recruit_time</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="op">(</span><span class="va">N</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">recruit_time</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">accr_timepoint</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">accr_timepoint</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>      <span class="va">enrollment</span> <span class="op">&lt;-</span> <span class="va">recruit_time</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span><span class="op">]</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="va">res</span><span class="op">[</span>, <span class="st">"Entry"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">enrollment</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Piecewise Uniform accrual times</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">accr_method</span> <span class="op">==</span> <span class="st">"Piecewise Uniform"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">recruit_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">intensity</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">n_part</span> <span class="op">&lt;-</span> <span class="va">intensity</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">accr_timepoint</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>      <span class="va">recruit_time_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">n_part</span>, <span class="va">accr_timepoint</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">accr_timepoint</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>      <span class="va">recruit_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">recruit_time</span>, <span class="va">recruit_time_new</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">recruit_time</span><span class="op">)</span> <span class="op">&lt;</span> <span class="va">N</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">enrollment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">recruit_time</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="op">(</span><span class="va">N</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">recruit_time</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">accr_timepoint</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">accr_timepoint</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>      <span class="va">enrollment</span> <span class="op">&lt;-</span> <span class="va">recruit_time</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="va">N</span><span class="op">]</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="va">res</span><span class="op">[</span>, <span class="st">"Entry"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">enrollment</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Method for generating Survival Time</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">surv_method</span> <span class="op">==</span> <span class="st">"Exponential"</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">nPat</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">SurvTimesG</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="va">nPat</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">hz</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">SurvTimes</span> <span class="op">&lt;-</span> <span class="va">SurvTimesG</span></span>
<span>      <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>        <span class="va">SurvTimes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">SurvTimes</span>, <span class="va">SurvTimesG</span><span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span></span>
<span>  <span class="co"># Event Times</span></span>
<span>  <span class="va">res</span><span class="op">[</span>, <span class="st">"EventTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"Entry"</span><span class="op">]</span> <span class="op">+</span> <span class="va">SurvTimes</span></span>
<span></span>
<span>  <span class="co"># Get rate parameter for exponential distributed censoring times</span></span>
<span>  <span class="va">CensorRate</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">dropout</span><span class="op">[</span><span class="st">"rate"</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">dropout</span><span class="op">[</span><span class="st">"rate"</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="va">dropout</span><span class="op">[</span><span class="st">"time"</span><span class="op">]</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fl">0</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Censoring times for all individuals, infinity if no censoring is applied</span></span>
<span>  <span class="va">CensorTime</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">dropout</span><span class="op">[</span><span class="st">"rate"</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="va">N</span>, <span class="va">CensorRate</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="va">N</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="va">res</span><span class="op">[</span>, <span class="st">"CensorTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">CensorTime</span> <span class="op">+</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"Entry"</span><span class="op">]</span></span>
<span></span>
<span>  <span class="co"># Censor type 1, administrative censoring after cutoff time</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">censor_type</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">evt_ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="st">"EventTime"</span><span class="op">]</span> <span class="op">&lt;</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"CensorTime"</span><span class="op">]</span> <span class="op">&amp;</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"EventTime"</span><span class="op">]</span> <span class="op">&lt;</span> <span class="va">time_cutoff</span><span class="op">)</span></span>
<span>    <span class="va">non_evt_ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="st">"EventTime"</span><span class="op">]</span> <span class="op">&lt;</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"CensorTime"</span><span class="op">]</span> <span class="op">&amp;</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"EventTime"</span><span class="op">]</span> <span class="op">&lt;</span> <span class="va">time_cutoff</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">evt_ind</span>, <span class="st">"EventIndicator"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"EventIndicator"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">evt_ind</span>, <span class="st">"ObsTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">[</span><span class="va">evt_ind</span>, <span class="st">"EventTime"</span><span class="op">]</span> <span class="op">-</span> <span class="va">res</span><span class="op">[</span><span class="va">evt_ind</span>, <span class="st">"Entry"</span><span class="op">]</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"ObsTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"CensorTime"</span><span class="op">]</span> <span class="op">&lt;</span> <span class="va">time_cutoff</span>,</span>
<span>      <span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"CensorTime"</span><span class="op">]</span> <span class="op">-</span> <span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"Entry"</span><span class="op">]</span>,</span>
<span>      <span class="va">time_cutoff</span> <span class="op">-</span> <span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"Entry"</span><span class="op">]</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">res</span><span class="op">[</span>, <span class="st">"StudyTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"ObsTime"</span><span class="op">]</span> <span class="op">+</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"Entry"</span><span class="op">]</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span></span>
<span>  <span class="co"># Type 2 censoring, censoring after number of observed events</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">censor_type</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Introduce censoring indices</span></span>
<span>    <span class="va">evt_ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="st">"EventTime"</span><span class="op">]</span> <span class="op">&lt;</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"CensorTime"</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="va">non_evt_ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="st">"EventTime"</span><span class="op">]</span> <span class="op">&gt;=</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"CensorTime"</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">evt_ind</span>, <span class="st">"EventIndicator"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"EventIndicator"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">evt_ind</span>, <span class="st">"ObsTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">[</span><span class="va">evt_ind</span>, <span class="st">"EventTime"</span><span class="op">]</span> <span class="op">-</span> <span class="va">res</span><span class="op">[</span><span class="va">evt_ind</span>, <span class="st">"Entry"</span><span class="op">]</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"ObsTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"CensorTime"</span><span class="op">]</span> <span class="op">-</span> <span class="va">res</span><span class="op">[</span><span class="va">non_evt_ind</span>, <span class="st">"Entry"</span><span class="op">]</span></span>
<span>    <span class="va">res</span><span class="op">[</span>, <span class="st">"StudyTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"ObsTime"</span><span class="op">]</span> <span class="op">+</span> <span class="va">res</span><span class="op">[</span>, <span class="st">"Entry"</span><span class="op">]</span></span>
<span></span>
<span>    <span class="va">type2_censortime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="st">"StudyTime"</span><span class="op">]</span>, decreasing <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">[</span><span class="va">NObsEvt</span><span class="op">]</span></span>
<span>    <span class="va">type2_censorind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="st">"StudyTime"</span><span class="op">]</span> <span class="op">&gt;</span> <span class="va">type2_censortime</span><span class="op">)</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">type2_censorind</span>, <span class="st">"StudyTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">type2_censortime</span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">type2_censorind</span>, <span class="st">"EventIndicator"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span>    <span class="va">new_censored_row_idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, <span class="st">"StudyTime"</span><span class="op">]</span> <span class="op">==</span> <span class="va">type2_censortime</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">res</span><span class="op">[</span><span class="va">new_censored_row_idx</span>, <span class="st">"ObsTime"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">type2_censortime</span> <span class="op">-</span> <span class="va">res</span><span class="op">[</span><span class="va">new_censored_row_idx</span>, <span class="st">"Entry"</span><span class="op">]</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<p>The data set that will be used for testing the various scenarios is then simulate using scenario specific variables. The code can also be found under </p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Simulate Test Data Set</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @param SimStudy_nPat</span></span>
<span><span class="co">#' @param SimStudy_hz</span></span>
<span><span class="co">#' @param SimStudy_dropout</span></span>
<span><span class="co">#' @param SimStudy_accr</span></span>
<span><span class="co">#' @param SimStudy_accr_method</span></span>
<span><span class="co">#' @param SimStudy_surv_method</span></span>
<span><span class="co">#' @param SimStudy_intensity</span></span>
<span><span class="co">#' @param SimStudy_accr_timepoint</span></span>
<span><span class="co">#' @param SimStudy_time_cutoff</span></span>
<span><span class="co">#' @param SimStudy_NObsEvt</span></span>
<span><span class="co">#' @param SimStudy_censor_type</span></span>
<span><span class="co">#' @param nStudy Number</span></span>
<span><span class="co">#' @param tau</span></span>
<span><span class="co">#' @param prior_data_conflict</span></span>
<span><span class="co">#' @param SAF_TOPIC Selected safety topic to analyze/the adverse event of interest</span></span>
<span><span class="co">#' @param pdc_hz</span></span>
<span><span class="co">#' @param diff_trt_length</span></span>
<span><span class="co">#' @param seed</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @return</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="va">SimTestData</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>    <span class="va">SimStudy_nPat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">50</span>, g2 <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>    <span class="va">SimStudy_hz</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>    <span class="va">SimStudy_dropout</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">18</span><span class="op">)</span>,</span>
<span>    <span class="va">SimStudy_accr</span> <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    <span class="va">SimStudy_accr_method</span> <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>    <span class="va">SimStudy_surv_method</span> <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>    <span class="va">SimStudy_intensity</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>    <span class="va">SimStudy_accr_timepoint</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>    <span class="va">SimStudy_time_cutoff</span> <span class="op">=</span> <span class="fl">18</span>,</span>
<span>    <span class="va">SimStudy_NObsEvt</span> <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    <span class="va">SimStudy_censor_type</span> <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    <span class="va">nStudy</span> <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    <span class="va">tau</span> <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    <span class="va">prior_data_conflict</span> <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    <span class="va">diff_trt_length</span> <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    <span class="va">pdc_hz</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.05</span>, g2 <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    <span class="va">SAF_TOPIC</span> <span class="op">=</span> <span class="st">"Example"</span>,</span>
<span>    <span class="va">seed</span> <span class="op">=</span> <span class="fl">123</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="cn">NA</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">nStudy</span>, <span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>    dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      STUDYID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">nStudy</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HIST"</span>, <span class="st">"ARM"</span>, <span class="st">"N"</span>, <span class="st">"N_WITH_AE"</span>, <span class="st">"TOT_EXP"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"g1"</span>, <span class="st">"g2"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="va">res</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="va">nStudy</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span>, <span class="st">"HIST"</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="va">res</span><span class="op">[</span><span class="va">nStudy</span>, <span class="st">"HIST"</span>, <span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span>  <span class="va">res</span><span class="op">[</span>, <span class="st">"ARM"</span>, <span class="st">"g1"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="va">res</span><span class="op">[</span>, <span class="st">"ARM"</span>, <span class="st">"g2"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span></span>
<span>  <span class="va">res</span><span class="op">[</span>, <span class="st">"N"</span>, <span class="st">"g1"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">SimStudy_nPat</span><span class="op">[</span><span class="st">"g1"</span><span class="op">]</span></span>
<span>  <span class="va">res</span><span class="op">[</span>, <span class="st">"N"</span>, <span class="st">"g2"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">SimStudy_nPat</span><span class="op">[</span><span class="st">"g2"</span><span class="op">]</span></span>
<span></span>
<span>  <span class="co"># intiualize the list to save the data</span></span>
<span>  <span class="va">res_SimStudy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># For prior Data conflict, simulate n-1 similar and 1 different trial</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">prior_data_conflict</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">nStudy</span> <span class="op">&lt;-</span> <span class="va">nStudy</span> <span class="op">-</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Simulate sutdies</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">diff_trt_length</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">SimStudy_time_cutoff_set</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">12</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">SimStudy_time_cutoff_set</span> <span class="op">&lt;-</span> <span class="va">SimStudy_time_cutoff</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span></span>
<span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">nStudy</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">tau</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">SimStudy_hz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">SimStudy_hz</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">2</span>, mean <span class="op">=</span> <span class="fl">0</span>, sd <span class="op">=</span> <span class="va">tau</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">diff_trt_length</span> <span class="op">==</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">res_SimStudy</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">SimStudy</span><span class="op">(</span></span>
<span>        nPat <span class="op">=</span> <span class="va">SimStudy_nPat</span>,</span>
<span>        hz <span class="op">=</span> <span class="va">SimStudy_hz</span>,</span>
<span>        dropout <span class="op">=</span> <span class="va">SimStudy_dropout</span>,</span>
<span>        accr <span class="op">=</span> <span class="va">SimStudy_accr</span>,</span>
<span>        accr_method <span class="op">=</span> <span class="va">SimStudy_accr_method</span>,</span>
<span>        surv_method <span class="op">=</span> <span class="va">SimStudy_surv_method</span>,</span>
<span>        intensity <span class="op">=</span> <span class="va">SimStudy_intensity</span>,</span>
<span>        accr_timepoint <span class="op">=</span> <span class="va">SimStudy_accr_timepoint</span>,</span>
<span>        time_cutoff <span class="op">=</span> <span class="va">SimStudy_time_cutoff_set</span>,</span>
<span>        NObsEvt <span class="op">=</span> <span class="va">SimStudy_NObsEvt</span>,</span>
<span>        censor_type <span class="op">=</span> <span class="va">SimStudy_censor_type</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>      <span class="co"># treatment_length = runif(1, 0.5, 1.5)</span></span>
<span>      <span class="co"># SimStudy_time_cutoff = (treatment_length + 1) * 12</span></span>
<span>      <span class="co"># SimStudy_time_cutoff_set = c(SimStudy_time_cutoff_set, treatment_length)</span></span>
<span>      <span class="va">res_SimStudy</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">SimStudy</span><span class="op">(</span></span>
<span>        nPat <span class="op">=</span> <span class="va">SimStudy_nPat</span>,</span>
<span>        hz <span class="op">=</span> <span class="va">SimStudy_hz</span>,</span>
<span>        dropout <span class="op">=</span> <span class="va">SimStudy_dropout</span>,</span>
<span>        accr <span class="op">=</span> <span class="va">SimStudy_accr</span>,</span>
<span>        accr_method <span class="op">=</span> <span class="va">SimStudy_accr_method</span>,</span>
<span>        surv_method <span class="op">=</span> <span class="va">SimStudy_surv_method</span>,</span>
<span>        intensity <span class="op">=</span> <span class="va">SimStudy_intensity</span>,</span>
<span>        accr_timepoint <span class="op">=</span> <span class="va">SimStudy_accr_timepoint</span>,</span>
<span>        time_cutoff <span class="op">=</span> <span class="va">SimStudy_time_cutoff_set</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>        NObsEvt <span class="op">=</span> <span class="va">SimStudy_NObsEvt</span>,</span>
<span>        censor_type <span class="op">=</span> <span class="va">SimStudy_censor_type</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Simulate the different trial</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">prior_data_conflict</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">nStudy</span> <span class="op">&lt;-</span> <span class="va">nStudy</span> <span class="op">+</span> <span class="fl">1</span></span>
<span></span>
<span>    <span class="va">res_SimStudy</span><span class="op">[[</span><span class="va">nStudy</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">SimStudy</span><span class="op">(</span></span>
<span>      nPat <span class="op">=</span> <span class="va">SimStudy_nPat</span>,</span>
<span>      hz <span class="op">=</span> <span class="va">pdc_hz</span>,</span>
<span>      dropout <span class="op">=</span> <span class="va">SimStudy_dropout</span>,</span>
<span>      accr <span class="op">=</span> <span class="va">SimStudy_accr</span>,</span>
<span>      accr_method <span class="op">=</span> <span class="va">SimStudy_accr_method</span>,</span>
<span>      surv_method <span class="op">=</span> <span class="va">SimStudy_surv_method</span>,</span>
<span>      intensity <span class="op">=</span> <span class="va">SimStudy_intensity</span>,</span>
<span>      accr_timepoint <span class="op">=</span> <span class="va">SimStudy_accr_timepoint</span>,</span>
<span>      time_cutoff <span class="op">=</span> <span class="va">SimStudy_time_cutoff</span>,</span>
<span>      NObsEvt <span class="op">=</span> <span class="va">SimStudy_NObsEvt</span>,</span>
<span>      censor_type <span class="op">=</span> <span class="va">SimStudy_censor_type</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">s</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">nStudy</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">g</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">res</span><span class="op">[</span><span class="va">s</span>, <span class="st">"TOT_EXP"</span>, <span class="va">g</span><span class="op">]</span> <span class="op">&lt;-</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">res_SimStudy</span><span class="op">[[</span><span class="va">s</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">res_SimStudy</span><span class="op">[[</span><span class="va">s</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">gID</span> <span class="op">==</span> <span class="va">g</span>, <span class="op">]</span><span class="op">$</span><span class="va">ObsTime</span><span class="op">)</span></span>
<span></span>
<span>      <span class="va">res</span><span class="op">[</span><span class="va">s</span>, <span class="st">"N_WITH_AE"</span>, <span class="va">g</span><span class="op">]</span> <span class="op">&lt;-</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">res_SimStudy</span><span class="op">[[</span><span class="va">s</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">res_SimStudy</span><span class="op">[[</span><span class="va">s</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">gID</span> <span class="op">==</span> <span class="va">g</span>, <span class="op">]</span><span class="op">$</span><span class="va">EventIndicator</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="va">res_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">res</span><span class="op">[</span>, , <span class="fl">1</span><span class="op">]</span>, <span class="va">res</span><span class="op">[</span>, , <span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/row.names.html" class="external-link">row.names</a></span><span class="op">(</span><span class="va">res_df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">nStudy</span><span class="op">)</span>, <span class="st">"_g1"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">nStudy</span><span class="op">)</span>, <span class="st">"_g2"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">res_df</span><span class="op">$</span><span class="va">STUDYID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Study#"</span>, <span class="fl">1</span><span class="op">:</span><span class="va">nStudy</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Study#"</span>, <span class="fl">1</span><span class="op">:</span><span class="va">nStudy</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">res_df</span><span class="op">[</span><span class="va">res_df</span><span class="op">$</span><span class="va">ARM</span> <span class="op">==</span> <span class="fl">1</span>, <span class="st">"ARM"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"g1"</span></span>
<span>  <span class="va">res_df</span><span class="op">[</span><span class="va">res_df</span><span class="op">$</span><span class="va">ARM</span> <span class="op">==</span> <span class="fl">2</span>, <span class="st">"ARM"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"g2"</span></span>
<span>  <span class="va">res_df</span><span class="op">$</span><span class="va">SAF_TOPIC</span> <span class="op">&lt;-</span> <span class="va">SAF_TOPIC</span></span>
<span>  <span class="va">res_df</span> <span class="op">&lt;-</span> <span class="va">res_df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"STUDYID"</span>, <span class="st">"HIST"</span>, <span class="st">"ARM"</span>, <span class="st">"N"</span>,</span>
<span>    <span class="st">"SAF_TOPIC"</span>, <span class="st">"N_WITH_AE"</span>, <span class="st">"TOT_EXP"</span></span>
<span>  <span class="op">)</span><span class="op">]</span></span>
<span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">diff_trt_length</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">res_df</span><span class="op">$</span><span class="va">LENGTH</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">nStudy</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">res_df</span><span class="op">[</span><span class="va">res_df</span><span class="op">$</span><span class="va">STUDYID</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Study#"</span>, <span class="va">i</span><span class="op">)</span>, <span class="op">]</span><span class="op">$</span><span class="va">LENGTH</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">SimStudy_time_cutoff_set</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">/</span> <span class="fl">12</span> <span class="op">*</span> <span class="fl">365</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="va">res_df</span><span class="op">$</span><span class="va">TREAT</span> <span class="op">&lt;-</span> <span class="va">SAF_TOPIC</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">res_df</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</section></section><section class="section level2" data-number="6"><h2 data-number="6" id="sec-binary-endpoint-results">
<span class="header-section-number">6</span> <strong>Binary Endpoint results</strong>
<a class="anchor" aria-label="anchor" href="#sec-binary-endpoint-results"></a>
</h2>
<section class="level2" data-number="6.1"><h3 data-number="6.1" id="scenario-1---best-case-scenario">
<span class="header-section-number">6.1</span> <strong>Scenario 1 - Best Case Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-1---best-case-scenario"></a>
</h3>
<p>In the best case scenario, almost all events are observed, a long follow up time and a large number of historical trials available.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Scen1</span></span>
<span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">300</span>, g2 <span class="op">=</span> <span class="fl">300</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">0.999</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen1"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1699874539</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1   Study#1    1  g1 300     Scen1       299 2828.715 Scen1
2_g1   Study#2    1  g1 300     Scen1       299 2882.367 Scen1
3_g1   Study#3    1  g1 300     Scen1       299 3236.408 Scen1
4_g1   Study#4    1  g1 300     Scen1       299 3085.252 Scen1
5_g1   Study#5    1  g1 300     Scen1       299 2984.353 Scen1
6_g1   Study#6    1  g1 300     Scen1       299 3305.953 Scen1
7_g1   Study#7    1  g1 300     Scen1       299 2975.530 Scen1
8_g1   Study#8    1  g1 300     Scen1       299 3103.969 Scen1
9_g1   Study#9    1  g1 300     Scen1       299 2763.876 Scen1
10_g1 Study#10    0  g1 300     Scen1       299 3044.691 Scen1
1_g2   Study#1    1  g2 300     Scen1       300 1466.836 Scen1
2_g2   Study#2    1  g2 300     Scen1       300 1604.556 Scen1
3_g2   Study#3    1  g2 300     Scen1       300 1428.295 Scen1
4_g2   Study#4    1  g2 300     Scen1       300 1472.222 Scen1
5_g2   Study#5    1  g2 300     Scen1       300 1678.517 Scen1
6_g2   Study#6    1  g2 300     Scen1       300 1504.812 Scen1
7_g2   Study#7    1  g2 300     Scen1       300 1626.479 Scen1
8_g2   Study#8    1  g2 300     Scen1       300 1480.283 Scen1
9_g2   Study#9    1  g2 300     Scen1       300 1644.251 Scen1
10_g2 Study#10    0  g2 300     Scen1       300 1519.465 Scen1</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                          csv group             analysis saf_topic       seed
Best case scenario Scen01.csv    g1 Incidence proportion    Scen01 1699874539
                   pool        tau heterog  ESS rob_weight nta_event nta_npat
Best case scenario TRUE HalfNormal   Small elir       0.05       194      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.9795</td>
<td style="text-align: left;">0.9795</td>
<td style="text-align: left;">0.9797</td>
<td style="text-align: left;">0.9798</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0029</td>
<td style="text-align: left;">0.0029</td>
<td style="text-align: left;">0.0031</td>
<td style="text-align: left;">0.0035</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.9796</td>
<td style="text-align: left;">0.9796</td>
<td style="text-align: left;">0.9799</td>
<td style="text-align: left;">0.98</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.9717</td>
<td style="text-align: left;">0.973</td>
<td style="text-align: left;">0.9737</td>
<td style="text-align: left;">0.9738</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9847</td>
<td style="text-align: left;">0.9848</td>
<td style="text-align: left;">0.9853</td>
<td style="text-align: left;">0.9857</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">1793.8827</td>
<td style="text-align: left;">2191.68</td>
<td style="text-align: left;">2460.5191</td>
<td style="text-align: left;">2552.3257</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.9555</td>
<td style="text-align: left;">0.9555</td>
<td style="text-align: left;">0.9557</td>
<td style="text-align: left;">0.9558</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.1229</td>
<td style="text-align: left;">0.1229</td>
<td style="text-align: left;">0.1229</td>
<td style="text-align: left;">0.1229</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.9794</td>
<td style="text-align: left;">0.9794</td>
<td style="text-align: left;">0.9797</td>
<td style="text-align: left;">0.9798</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.5</td>
<td style="text-align: left;">0.5</td>
<td style="text-align: left;">0.5</td>
<td style="text-align: left;">0.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9847</td>
<td style="text-align: left;">0.9848</td>
<td style="text-align: left;">0.9852</td>
<td style="text-align: left;">0.9856</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">1695.3091</td>
<td style="text-align: left;">2067.2245</td>
<td style="text-align: left;">2321.3406</td>
<td style="text-align: left;">2410.0451</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.97</td>
<td style="text-align: left;">0.97</td>
<td style="text-align: left;">0.97</td>
<td style="text-align: left;">0.97</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.012</td>
<td style="text-align: left;">0.012</td>
<td style="text-align: left;">0.012</td>
<td style="text-align: left;">0.012</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.9716</td>
<td style="text-align: left;">0.9716</td>
<td style="text-align: left;">0.9716</td>
<td style="text-align: left;">0.9716</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.9423</td>
<td style="text-align: left;">0.9423</td>
<td style="text-align: left;">0.9423</td>
<td style="text-align: left;">0.9423</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9889</td>
<td style="text-align: left;">0.9889</td>
<td style="text-align: left;">0.9889</td>
<td style="text-align: left;">0.9889</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.9785</td>
<td style="text-align: left;">0.9787</td>
<td style="text-align: left;">0.9789</td>
<td style="text-align: left;">0.979</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.003</td>
<td style="text-align: left;">0.003</td>
<td style="text-align: left;">0.0032</td>
<td style="text-align: left;">0.0036</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.9788</td>
<td style="text-align: left;">0.9789</td>
<td style="text-align: left;">0.9791</td>
<td style="text-align: left;">0.9792</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.9703</td>
<td style="text-align: left;">0.972</td>
<td style="text-align: left;">0.9728</td>
<td style="text-align: left;">0.9729</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9839</td>
<td style="text-align: left;">0.984</td>
<td style="text-align: left;">0.9843</td>
<td style="text-align: left;">0.9844</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.2"><h3 data-number="6.2" id="scenario-2---strong-prior-data-conflict">
<span class="header-section-number">6.2</span> <strong>Scenario 2 - Strong Prior Data Conflict</strong>
<a class="anchor" aria-label="anchor" href="#scenario-2---strong-prior-data-conflict"></a>
</h3>
<p>Scenario 2 describes a test case scenario for a binary endpoint with a strong prior data conflict between the historical and current trials. The characteristics of this scenario includes no censoring in the current trial, no noise, all events being observed, homogeneous historical data and heavy prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Scen2</span></span>
<span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.4</span>, g2 <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen2"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701611344</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP TREAT
1_g1   Study#1    1  g1 200     Scen2       161 1530.2128 Scen2
2_g1   Study#2    1  g1 200     Scen2       162 1528.7454 Scen2
3_g1   Study#3    1  g1 200     Scen2       160 1660.3443 Scen2
4_g1   Study#4    1  g1 200     Scen2       161 1840.7538 Scen2
5_g1   Study#5    1  g1 200     Scen2       162 1605.1504 Scen2
6_g1   Study#6    1  g1 200     Scen2       164 1496.5477 Scen2
7_g1   Study#7    1  g1 200     Scen2       161 1622.6838 Scen2
8_g1   Study#8    1  g1 200     Scen2       162 1575.8092 Scen2
9_g1   Study#9    1  g1 200     Scen2       161 1638.6499 Scen2
10_g1 Study#10    0  g1 200     Scen2       200  439.5240 Scen2
1_g2   Study#1    1  g2 200     Scen2       199  723.4652 Scen2
2_g2   Study#2    1  g2 200     Scen2       198  725.3088 Scen2
3_g2   Study#3    1  g2 200     Scen2       200  633.6027 Scen2
4_g2   Study#4    1  g2 200     Scen2       199  631.2705 Scen2
5_g2   Study#5    1  g2 200     Scen2       198  701.9784 Scen2
6_g2   Study#6    1  g2 200     Scen2       196  705.4184 Scen2
7_g2   Study#7    1  g2 200     Scen2       199  680.0606 Scen2
8_g2   Study#8    1  g2 200     Scen2       198  704.2055 Scen2
9_g2   Study#9    1  g2 200     Scen2       199  727.2699 Scen2
10_g2 Study#10    0  g2 200     Scen2       160 3910.1011 Scen2</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                  csv group             analysis saf_topic
Strong Prior Data Conflict Scen02.csv    g1 Incidence proportion    Scen02
                                 seed pool        tau  heterog  ESS rob_weight
Strong Prior Data Conflict 1701611344 TRUE HalfNormal Moderate elir        0.8
                           nta_event nta_npat
Strong Prior Data Conflict       199      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.807</td>
<td style="text-align: left;">0.8071</td>
<td style="text-align: left;">0.808</td>
<td style="text-align: left;">0.8082</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0116</td>
<td style="text-align: left;">0.0117</td>
<td style="text-align: left;">0.0124</td>
<td style="text-align: left;">0.0157</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.807</td>
<td style="text-align: left;">0.8072</td>
<td style="text-align: left;">0.8083</td>
<td style="text-align: left;">0.8085</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.7731</td>
<td style="text-align: left;">0.7814</td>
<td style="text-align: left;">0.7845</td>
<td style="text-align: left;">0.7848</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8284</td>
<td style="text-align: left;">0.8292</td>
<td style="text-align: left;">0.8321</td>
<td style="text-align: left;">0.8363</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">809.8125</td>
<td style="text-align: left;">1071.8074</td>
<td style="text-align: left;">1219.9763</td>
<td style="text-align: left;">1246.6077</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.5614</td>
<td style="text-align: left;">0.5614</td>
<td style="text-align: left;">0.5616</td>
<td style="text-align: left;">0.5616</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.286</td>
<td style="text-align: left;">0.286</td>
<td style="text-align: left;">0.2861</td>
<td style="text-align: left;">0.2862</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.625</td>
<td style="text-align: left;">0.625</td>
<td style="text-align: left;">0.625</td>
<td style="text-align: left;">0.625</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0312</td>
<td style="text-align: left;">0.0312</td>
<td style="text-align: left;">0.0312</td>
<td style="text-align: left;">0.0312</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9688</td>
<td style="text-align: left;">0.9688</td>
<td style="text-align: left;">0.9688</td>
<td style="text-align: left;">0.9688</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">111.1373</td>
<td style="text-align: left;">144.9961</td>
<td style="text-align: left;">169.0632</td>
<td style="text-align: left;">174.0196</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.995</td>
<td style="text-align: left;">0.995</td>
<td style="text-align: left;">0.995</td>
<td style="text-align: left;">0.995</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.005</td>
<td style="text-align: left;">0.005</td>
<td style="text-align: left;">0.005</td>
<td style="text-align: left;">0.005</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.9965</td>
<td style="text-align: left;">0.9965</td>
<td style="text-align: left;">0.9965</td>
<td style="text-align: left;">0.9965</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.9816</td>
<td style="text-align: left;">0.9816</td>
<td style="text-align: left;">0.9816</td>
<td style="text-align: left;">0.9816</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9999</td>
<td style="text-align: left;">0.9999</td>
<td style="text-align: left;">0.9999</td>
<td style="text-align: left;">0.9999</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.9901</td>
<td style="text-align: left;">0.9901</td>
<td style="text-align: left;">0.9901</td>
<td style="text-align: left;">0.9901</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0069</td>
<td style="text-align: left;">0.0069</td>
<td style="text-align: left;">0.0069</td>
<td style="text-align: left;">0.0069</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.9916</td>
<td style="text-align: left;">0.9916</td>
<td style="text-align: left;">0.9917</td>
<td style="text-align: left;">0.9917</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.9726</td>
<td style="text-align: left;">0.9726</td>
<td style="text-align: left;">0.9726</td>
<td style="text-align: left;">0.9726</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9988</td>
<td style="text-align: left;">0.9988</td>
<td style="text-align: left;">0.9988</td>
<td style="text-align: left;">0.9988</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.3"><h3 data-number="6.3" id="scenario-3---realistic-scenario">
<span class="header-section-number">6.3</span> <strong>Scenario 3 - Realistic Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-3---realistic-scenario"></a>
</h3>
<p>Scenario 3 describes a binary endpoint for a realistic situation with a dropout rate of 5%, some with a 2% tau, events observed at a 90% power, homogeneous historical data and with no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen3"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701621384</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen3        30 282.8273 Scen3
2_g1 Study#2    1  g1 200     Scen3        35 345.5776 Scen3
3_g1 Study#3    1  g1 200     Scen3        32 355.6786 Scen3
4_g1 Study#4    1  g1 200     Scen3        35 409.5392 Scen3
5_g1 Study#5    1  g1 200     Scen3        36 207.1725 Scen3
6_g1 Study#6    0  g1 200     Scen3        40 291.3027 Scen3
1_g2 Study#1    1  g2 200     Scen3        60 259.6821 Scen3
2_g2 Study#2    1  g2 200     Scen3        52 268.0612 Scen3
3_g2 Study#3    1  g2 200     Scen3        57 237.5458 Scen3
4_g2 Study#4    1  g2 200     Scen3        54 359.4474 Scen3
5_g2 Study#5    1  g2 200     Scen3        52 170.1687 Scen3
6_g2 Study#6    0  g2 200     Scen3        50 266.0703 Scen3</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                            csv group             analysis saf_topic       seed
Realisitic Scenarios Scen03.csv    g1 Incidence proportion    Scen03 1701621384
                     pool        tau     heterog  ESS rob_weight nta_event
Realisitic Scenarios TRUE HalfNormal Substantial elir       0.25        31
                     nta_npat
Realisitic Scenarios      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.1713</td>
<td style="text-align: left;">0.1718</td>
<td style="text-align: left;">0.1741</td>
<td style="text-align: left;">0.1749</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0313</td>
<td style="text-align: left;">0.0319</td>
<td style="text-align: left;">0.0358</td>
<td style="text-align: left;">0.0456</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.1691</td>
<td style="text-align: left;">0.1697</td>
<td style="text-align: left;">0.1718</td>
<td style="text-align: left;">0.1721</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0962</td>
<td style="text-align: left;">0.1078</td>
<td style="text-align: left;">0.1153</td>
<td style="text-align: left;">0.1171</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.2415</td>
<td style="text-align: left;">0.2439</td>
<td style="text-align: left;">0.2592</td>
<td style="text-align: left;">0.2883</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">143.6512</td>
<td style="text-align: left;">181.6262</td>
<td style="text-align: left;">220.2055</td>
<td style="text-align: left;">229.6131</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.2535</td>
<td style="text-align: left;">0.2539</td>
<td style="text-align: left;">0.2556</td>
<td style="text-align: left;">0.2562</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.2038</td>
<td style="text-align: left;">0.2039</td>
<td style="text-align: left;">0.2046</td>
<td style="text-align: left;">0.2057</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.176</td>
<td style="text-align: left;">0.1765</td>
<td style="text-align: left;">0.1785</td>
<td style="text-align: left;">0.1788</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0747</td>
<td style="text-align: left;">0.0822</td>
<td style="text-align: left;">0.0883</td>
<td style="text-align: left;">0.0891</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9</td>
<td style="text-align: left;">0.9</td>
<td style="text-align: left;">0.9</td>
<td style="text-align: left;">0.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">98.7803</td>
<td style="text-align: left;">124.2616</td>
<td style="text-align: left;">152.5439</td>
<td style="text-align: left;">159.551</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.155</td>
<td style="text-align: left;">0.155</td>
<td style="text-align: left;">0.155</td>
<td style="text-align: left;">0.155</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0255</td>
<td style="text-align: left;">0.0255</td>
<td style="text-align: left;">0.0255</td>
<td style="text-align: left;">0.0255</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.1538</td>
<td style="text-align: left;">0.1538</td>
<td style="text-align: left;">0.1538</td>
<td style="text-align: left;">0.1538</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.1084</td>
<td style="text-align: left;">0.1084</td>
<td style="text-align: left;">0.1084</td>
<td style="text-align: left;">0.1084</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.2082</td>
<td style="text-align: left;">0.2082</td>
<td style="text-align: left;">0.2082</td>
<td style="text-align: left;">0.2082</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.1627</td>
<td style="text-align: left;">0.1633</td>
<td style="text-align: left;">0.1644</td>
<td style="text-align: left;">0.1646</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0176</td>
<td style="text-align: left;">0.0177</td>
<td style="text-align: left;">0.0185</td>
<td style="text-align: left;">0.0191</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.1628</td>
<td style="text-align: left;">0.1633</td>
<td style="text-align: left;">0.1647</td>
<td style="text-align: left;">0.165</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.1243</td>
<td style="text-align: left;">0.1262</td>
<td style="text-align: left;">0.1287</td>
<td style="text-align: left;">0.1296</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.1979</td>
<td style="text-align: left;">0.1982</td>
<td style="text-align: left;">0.2001</td>
<td style="text-align: left;">0.2004</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.4"><h3 data-number="6.4" id="scenario-4---worst-case-scenario">
<span class="header-section-number">6.4</span> <strong>Scenario 4 - Worst Case Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-4---worst-case-scenario"></a>
</h3>
<p>Scenario 4 describes a binary endpoint for a worst case scenario with huge censoring during the trial, huge noise in the data, low number of events observed at 90% power, heterogeneous historical data and huge data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">50</span>, g2 <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.2</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">112</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.05</span>, g2 <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen4"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701626683</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1  50     Scen4        28 197.5691 Scen4
2_g1 Study#2    1  g1  50     Scen4        27 237.3923 Scen4
3_g1 Study#3    0  g1  50     Scen4        23 425.0280 Scen4
1_g2 Study#1    1  g2 100     Scen4        73 283.1671 Scen4
2_g2 Study#2    1  g2 100     Scen4        73 334.8827 Scen4
3_g2 Study#3    0  g2 100     Scen4        70 750.5857 Scen4</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                           csv group             analysis saf_topic       seed
Worst Case Scenario Scen04.csv    g1 Incidence proportion    Scen04 1701626683
                    pool        tau    heterog  ESS rob_weight nta_event
Worst Case Scenario TRUE HalfNormal Very Large elir       0.99        27
                    nta_npat
Worst Case Scenario       50</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.5347</td>
<td style="text-align: left;">0.5378</td>
<td style="text-align: left;">0.5494</td>
<td style="text-align: left;">0.5552</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.1427</td>
<td style="text-align: left;">0.1474</td>
<td style="text-align: left;">0.1595</td>
<td style="text-align: left;">0.1958</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.5428</td>
<td style="text-align: left;">0.5445</td>
<td style="text-align: left;">0.5537</td>
<td style="text-align: left;">0.5556</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0692</td>
<td style="text-align: left;">0.1472</td>
<td style="text-align: left;">0.2031</td>
<td style="text-align: left;">0.2153</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8382</td>
<td style="text-align: left;">0.8486</td>
<td style="text-align: left;">0.8911</td>
<td style="text-align: left;">0.9436</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">12.9106</td>
<td style="text-align: left;">15.6987</td>
<td style="text-align: left;">19.7761</td>
<td style="text-align: left;">21.1598</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.5003</td>
<td style="text-align: left;">0.5004</td>
<td style="text-align: left;">0.5005</td>
<td style="text-align: left;">0.5005</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.2876</td>
<td style="text-align: left;">0.2876</td>
<td style="text-align: left;">0.2877</td>
<td style="text-align: left;">0.2879</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.5014</td>
<td style="text-align: left;">0.5015</td>
<td style="text-align: left;">0.5018</td>
<td style="text-align: left;">0.5019</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9748</td>
<td style="text-align: left;">0.9748</td>
<td style="text-align: left;">0.9748</td>
<td style="text-align: left;">0.9749</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">0.017</td>
<td style="text-align: left;">0.0223</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0236</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.54</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0698</td>
<td style="text-align: left;">0.0698</td>
<td style="text-align: left;">0.0698</td>
<td style="text-align: left;">0.0698</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.5405</td>
<td style="text-align: left;">0.5405</td>
<td style="text-align: left;">0.5405</td>
<td style="text-align: left;">0.5405</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.4023</td>
<td style="text-align: left;">0.4023</td>
<td style="text-align: left;">0.4023</td>
<td style="text-align: left;">0.4023</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.6747</td>
<td style="text-align: left;">0.6747</td>
<td style="text-align: left;">0.6747</td>
<td style="text-align: left;">0.6747</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.5385</td>
<td style="text-align: left;">0.5386</td>
<td style="text-align: left;">0.5387</td>
<td style="text-align: left;">0.5387</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0681</td>
<td style="text-align: left;">0.0681</td>
<td style="text-align: left;">0.0682</td>
<td style="text-align: left;">0.0682</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.539</td>
<td style="text-align: left;">0.5391</td>
<td style="text-align: left;">0.5392</td>
<td style="text-align: left;">0.5392</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.4039</td>
<td style="text-align: left;">0.404</td>
<td style="text-align: left;">0.4041</td>
<td style="text-align: left;">0.4041</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.6701</td>
<td style="text-align: left;">0.6702</td>
<td style="text-align: left;">0.6703</td>
<td style="text-align: left;">0.6703</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.5"><h3 data-number="6.5" id="scenario-5---heterogeneous-data-medium">
<span class="header-section-number">6.5</span> <strong>Scenario 5 - Heterogeneous Data (Medium)</strong>
<a class="anchor" aria-label="anchor" href="#scenario-5---heterogeneous-data-medium"></a>
</h3>
<p>Scenario 5 describes a binary endpoint for a medium heterogeneous scenario between the historical data, moderate noise at a 5% tau, moderate censoring at 5%, all events observed at a 90% power and no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen5"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701628373</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen5        24 336.2761 Scen5
2_g1 Study#2    1  g1 200     Scen5        35 328.5856 Scen5
3_g1 Study#3    1  g1 200     Scen5        26 319.0432 Scen5
4_g1 Study#4    1  g1 200     Scen5        36 319.4839 Scen5
5_g1 Study#5    1  g1 200     Scen5        39 282.5063 Scen5
6_g1 Study#6    0  g1 200     Scen5        25 289.3660 Scen5
1_g2 Study#1    1  g2 200     Scen5        68 295.3881 Scen5
2_g2 Study#2    1  g2 200     Scen5        55 310.0651 Scen5
3_g2 Study#3    1  g2 200     Scen5        63 290.2667 Scen5
4_g2 Study#4    1  g2 200     Scen5        54 288.7203 Scen5
5_g2 Study#5    1  g2 200     Scen5        52 283.8704 Scen5
6_g2 Study#6    0  g2 200     Scen5        66 263.6880 Scen5</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                           csv group             analysis saf_topic       seed
Worst Case Scenario Scen04.csv    g1 Incidence proportion    Scen04 1701626683
                    pool        tau    heterog  ESS rob_weight nta_event
Worst Case Scenario TRUE HalfNormal Very Large elir       0.99        27
                    nta_npat
Worst Case Scenario       50</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.5347</td>
<td style="text-align: left;">0.5378</td>
<td style="text-align: left;">0.5494</td>
<td style="text-align: left;">0.5552</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.1427</td>
<td style="text-align: left;">0.1474</td>
<td style="text-align: left;">0.1595</td>
<td style="text-align: left;">0.1958</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.5428</td>
<td style="text-align: left;">0.5445</td>
<td style="text-align: left;">0.5537</td>
<td style="text-align: left;">0.5556</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0692</td>
<td style="text-align: left;">0.1472</td>
<td style="text-align: left;">0.2031</td>
<td style="text-align: left;">0.2153</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8382</td>
<td style="text-align: left;">0.8486</td>
<td style="text-align: left;">0.8911</td>
<td style="text-align: left;">0.9436</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">12.9106</td>
<td style="text-align: left;">15.6987</td>
<td style="text-align: left;">19.7761</td>
<td style="text-align: left;">21.1598</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.5003</td>
<td style="text-align: left;">0.5004</td>
<td style="text-align: left;">0.5005</td>
<td style="text-align: left;">0.5005</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.2876</td>
<td style="text-align: left;">0.2876</td>
<td style="text-align: left;">0.2877</td>
<td style="text-align: left;">0.2879</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.5014</td>
<td style="text-align: left;">0.5015</td>
<td style="text-align: left;">0.5018</td>
<td style="text-align: left;">0.5019</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9748</td>
<td style="text-align: left;">0.9748</td>
<td style="text-align: left;">0.9748</td>
<td style="text-align: left;">0.9749</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">0.017</td>
<td style="text-align: left;">0.0223</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0236</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.54</td>
<td style="text-align: left;">0.54</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0698</td>
<td style="text-align: left;">0.0698</td>
<td style="text-align: left;">0.0698</td>
<td style="text-align: left;">0.0698</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.5405</td>
<td style="text-align: left;">0.5405</td>
<td style="text-align: left;">0.5405</td>
<td style="text-align: left;">0.5405</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.4023</td>
<td style="text-align: left;">0.4023</td>
<td style="text-align: left;">0.4023</td>
<td style="text-align: left;">0.4023</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.6747</td>
<td style="text-align: left;">0.6747</td>
<td style="text-align: left;">0.6747</td>
<td style="text-align: left;">0.6747</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.5385</td>
<td style="text-align: left;">0.5386</td>
<td style="text-align: left;">0.5387</td>
<td style="text-align: left;">0.5387</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0681</td>
<td style="text-align: left;">0.0681</td>
<td style="text-align: left;">0.0682</td>
<td style="text-align: left;">0.0682</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.539</td>
<td style="text-align: left;">0.5391</td>
<td style="text-align: left;">0.5392</td>
<td style="text-align: left;">0.5392</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.4039</td>
<td style="text-align: left;">0.404</td>
<td style="text-align: left;">0.4041</td>
<td style="text-align: left;">0.4041</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.6701</td>
<td style="text-align: left;">0.6702</td>
<td style="text-align: left;">0.6703</td>
<td style="text-align: left;">0.6703</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.6"><h3 data-number="6.6" id="scenario-6---high-dropout">
<span class="header-section-number">6.6</span> <strong>Scenario 6 - High Dropout</strong>
<a class="anchor" aria-label="anchor" href="#scenario-6---high-dropout"></a>
</h3>
<p>Scenario 6 describes a binary endpoint scenario with huge dropout within the current trial, some noise at a 2% tau, some event being observed at a 90% power, homogeneous data and no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.3</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen6"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701628373</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen6        26 291.6589 Scen6
2_g1 Study#2    1  g1 200     Scen6        27 225.3005 Scen6
3_g1 Study#3    1  g1 200     Scen6        28 292.3146 Scen6
4_g1 Study#4    1  g1 200     Scen6        28 268.4692 Scen6
5_g1 Study#5    1  g1 200     Scen6        40 212.6690 Scen6
6_g1 Study#6    0  g1 200     Scen6        24 198.0645 Scen6
1_g2 Study#1    1  g2 200     Scen6        56 226.4060 Scen6
2_g2 Study#2    1  g2 200     Scen6        52 203.6631 Scen6
3_g2 Study#3    1  g2 200     Scen6        55 255.6490 Scen6
4_g2 Study#4    1  g2 200     Scen6        47 221.9167 Scen6
5_g2 Study#5    1  g2 200     Scen6        45 238.6339 Scen6
6_g2 Study#6    0  g2 200     Scen6        54 219.5831 Scen6</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                    csv group             analysis saf_topic       seed pool
High Dropout Scen06.csv    g1 Incidence proportion    Scen06 1701628373 TRUE
                    tau  heterog  ESS rob_weight nta_event nta_npat
High Dropout HalfNormal Moderate elir       0.14        31      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.1487</td>
<td style="text-align: left;">0.1491</td>
<td style="text-align: left;">0.1506</td>
<td style="text-align: left;">0.1509</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0187</td>
<td style="text-align: left;">0.019</td>
<td style="text-align: left;">0.0207</td>
<td style="text-align: left;">0.0271</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.1479</td>
<td style="text-align: left;">0.1482</td>
<td style="text-align: left;">0.1497</td>
<td style="text-align: left;">0.15</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.1008</td>
<td style="text-align: left;">0.1103</td>
<td style="text-align: left;">0.1152</td>
<td style="text-align: left;">0.1158</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.1874</td>
<td style="text-align: left;">0.1892</td>
<td style="text-align: left;">0.1968</td>
<td style="text-align: left;">0.2114</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">250.0113</td>
<td style="text-align: left;">376.8769</td>
<td style="text-align: left;">437.179</td>
<td style="text-align: left;">448.0136</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.1979</td>
<td style="text-align: left;">0.1982</td>
<td style="text-align: left;">0.1995</td>
<td style="text-align: left;">0.1997</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.1633</td>
<td style="text-align: left;">0.1634</td>
<td style="text-align: left;">0.1638</td>
<td style="text-align: left;">0.1644</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.1505</td>
<td style="text-align: left;">0.1507</td>
<td style="text-align: left;">0.1521</td>
<td style="text-align: left;">0.1523</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0916</td>
<td style="text-align: left;">0.1019</td>
<td style="text-align: left;">0.1076</td>
<td style="text-align: left;">0.1088</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8214</td>
<td style="text-align: left;">0.8214</td>
<td style="text-align: left;">0.8214</td>
<td style="text-align: left;">0.8214</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">205.8849</td>
<td style="text-align: left;">310.4363</td>
<td style="text-align: left;">361.9021</td>
<td style="text-align: left;">370.8301</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.155</td>
<td style="text-align: left;">0.155</td>
<td style="text-align: left;">0.155</td>
<td style="text-align: left;">0.155</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0255</td>
<td style="text-align: left;">0.0255</td>
<td style="text-align: left;">0.0255</td>
<td style="text-align: left;">0.0255</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.1538</td>
<td style="text-align: left;">0.1538</td>
<td style="text-align: left;">0.1538</td>
<td style="text-align: left;">0.1538</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.1084</td>
<td style="text-align: left;">0.1084</td>
<td style="text-align: left;">0.1084</td>
<td style="text-align: left;">0.1084</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.2082</td>
<td style="text-align: left;">0.2082</td>
<td style="text-align: left;">0.2082</td>
<td style="text-align: left;">0.2082</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.1506</td>
<td style="text-align: left;">0.1508</td>
<td style="text-align: left;">0.1517</td>
<td style="text-align: left;">0.1519</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0141</td>
<td style="text-align: left;">0.0141</td>
<td style="text-align: left;">0.0148</td>
<td style="text-align: left;">0.0162</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.1501</td>
<td style="text-align: left;">0.1503</td>
<td style="text-align: left;">0.1514</td>
<td style="text-align: left;">0.1515</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.1211</td>
<td style="text-align: left;">0.1236</td>
<td style="text-align: left;">0.1252</td>
<td style="text-align: left;">0.1256</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.1798</td>
<td style="text-align: left;">0.1803</td>
<td style="text-align: left;">0.1826</td>
<td style="text-align: left;">0.1852</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.7"><h3 data-number="6.7" id="scenario-7---high-heterogeneity">
<span class="header-section-number">6.7</span> <strong>Scenario 7 - High Heterogeneity</strong>
<a class="anchor" aria-label="anchor" href="#scenario-7---high-heterogeneity"></a>
</h3>
<p>Scenario 7 describes a binary endpoint scenario with high heterogeneity between historical data, moderate censoring in current trial, moderate noise at a 2% tau, all events observed at a 90% power, with no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen7"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701416989</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen7        32 222.47360 Scen7
2_g1 Study#2    1  g1 200     Scen7        27 270.34094 Scen7
3_g1 Study#3    1  g1 200     Scen7        32 271.08747 Scen7
4_g1 Study#4    1  g1 200     Scen7        36 116.93497 Scen7
5_g1 Study#5    1  g1 200     Scen7        29 111.37228 Scen7
6_g1 Study#6    0  g1 200     Scen7        23 163.68689 Scen7
1_g2 Study#1    1  g2 200     Scen7        59 189.49417 Scen7
2_g2 Study#2    1  g2 200     Scen7        62 284.62991 Scen7
3_g2 Study#3    1  g2 200     Scen7        58 210.80011 Scen7
4_g2 Study#4    1  g2 200     Scen7        56  77.53109 Scen7
5_g2 Study#5    1  g2 200     Scen7        62 118.22857 Scen7
6_g2 Study#6    0  g2 200     Scen7        68  97.68813 Scen7</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                          csv group             analysis saf_topic       seed
High Heterogeneity Scen07.csv    g1 Incidence proportion    Scen07 1701416989
                   pool        tau    heterog  ESS rob_weight nta_event
High Heterogeneity TRUE HalfNormal Very Large elir        0.2        35
                   nta_npat
High Heterogeneity      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.1564</td>
<td style="text-align: left;">0.1572</td>
<td style="text-align: left;">0.1598</td>
<td style="text-align: left;">0.1606</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0281</td>
<td style="text-align: left;">0.0296</td>
<td style="text-align: left;">0.0387</td>
<td style="text-align: left;">0.0512</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.155</td>
<td style="text-align: left;">0.1552</td>
<td style="text-align: left;">0.1569</td>
<td style="text-align: left;">0.1572</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0961</td>
<td style="text-align: left;">0.0982</td>
<td style="text-align: left;">0.1076</td>
<td style="text-align: left;">0.109</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.2186</td>
<td style="text-align: left;">0.2208</td>
<td style="text-align: left;">0.2401</td>
<td style="text-align: left;">0.2439</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">243.2871</td>
<td style="text-align: left;">253.8611</td>
<td style="text-align: left;">309.9919</td>
<td style="text-align: left;">322.6752</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.2252</td>
<td style="text-align: left;">0.2258</td>
<td style="text-align: left;">0.2279</td>
<td style="text-align: left;">0.2285</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.1897</td>
<td style="text-align: left;">0.1898</td>
<td style="text-align: left;">0.1909</td>
<td style="text-align: left;">0.1925</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.1592</td>
<td style="text-align: left;">0.1596</td>
<td style="text-align: left;">0.1614</td>
<td style="text-align: left;">0.1616</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0739</td>
<td style="text-align: left;">0.0769</td>
<td style="text-align: left;">0.0883</td>
<td style="text-align: left;">0.0902</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.8751</td>
<td style="text-align: left;">0.8764</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">183.1333</td>
<td style="text-align: left;">191.5037</td>
<td style="text-align: left;">235.5025</td>
<td style="text-align: left;">245.8014</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.175</td>
<td style="text-align: left;">0.175</td>
<td style="text-align: left;">0.175</td>
<td style="text-align: left;">0.175</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0268</td>
<td style="text-align: left;">0.0268</td>
<td style="text-align: left;">0.0268</td>
<td style="text-align: left;">0.0268</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.1739</td>
<td style="text-align: left;">0.1739</td>
<td style="text-align: left;">0.1739</td>
<td style="text-align: left;">0.1739</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.1257</td>
<td style="text-align: left;">0.1257</td>
<td style="text-align: left;">0.1257</td>
<td style="text-align: left;">0.1257</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.2305</td>
<td style="text-align: left;">0.2305</td>
<td style="text-align: left;">0.2305</td>
<td style="text-align: left;">0.2305</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.1632</td>
<td style="text-align: left;">0.1633</td>
<td style="text-align: left;">0.1645</td>
<td style="text-align: left;">0.1649</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0163</td>
<td style="text-align: left;">0.0164</td>
<td style="text-align: left;">0.0176</td>
<td style="text-align: left;">0.0178</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.1617</td>
<td style="text-align: left;">0.1621</td>
<td style="text-align: left;">0.1637</td>
<td style="text-align: left;">0.1639</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.1326</td>
<td style="text-align: left;">0.1329</td>
<td style="text-align: left;">0.1346</td>
<td style="text-align: left;">0.1348</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.1982</td>
<td style="text-align: left;">0.199</td>
<td style="text-align: left;">0.2047</td>
<td style="text-align: left;">0.2053</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.8"><h3 data-number="6.8" id="scenario-8---bad-scenario">
<span class="header-section-number">6.8</span> <strong>Scenario 8 - Bad Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-8---bad-scenario"></a>
</h3>
<p>Scenario 8 describes a binary endpoint for a bad scenario with huge censoring in the current trial, huge noise, little events observed in the current trial, heterogeneous historical data and no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.3</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen8"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701652217</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen8        22 297.7669 Scen8
2_g1 Study#2    1  g1 200     Scen8        31 298.1832 Scen8
3_g1 Study#3    1  g1 200     Scen8        21 307.9312 Scen8
4_g1 Study#4    1  g1 200     Scen8        21 379.2739 Scen8
5_g1 Study#5    1  g1 200     Scen8        28 405.2051 Scen8
6_g1 Study#6    0  g1 200     Scen8        30 368.8481 Scen8
1_g2 Study#1    1  g2 200     Scen8        53 234.0924 Scen8
2_g2 Study#2    1  g2 200     Scen8        45 226.9392 Scen8
3_g2 Study#3    1  g2 200     Scen8        55 211.8717 Scen8
4_g2 Study#4    1  g2 200     Scen8        56 348.7668 Scen8
5_g2 Study#5    1  g2 200     Scen8        46 375.9676 Scen8
6_g2 Study#6    0  g2 200     Scen8        45 284.3348 Scen8</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                    csv group             analysis saf_topic       seed pool
Bad Scenario Scen08.csv    g1 Incidence proportion    Scen08 1701652217 TRUE
                    tau heterog  ESS rob_weight nta_event nta_npat
Bad Scenario HalfNormal   Large elir        0.2        25      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.1243</td>
<td style="text-align: left;">0.1247</td>
<td style="text-align: left;">0.127</td>
<td style="text-align: left;">0.1274</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0276</td>
<td style="text-align: left;">0.0285</td>
<td style="text-align: left;">0.035</td>
<td style="text-align: left;">0.0408</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.1216</td>
<td style="text-align: left;">0.1221</td>
<td style="text-align: left;">0.1238</td>
<td style="text-align: left;">0.1243</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0669</td>
<td style="text-align: left;">0.0706</td>
<td style="text-align: left;">0.0777</td>
<td style="text-align: left;">0.0786</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.1859</td>
<td style="text-align: left;">0.1895</td>
<td style="text-align: left;">0.2062</td>
<td style="text-align: left;">0.2127</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">205.3855</td>
<td style="text-align: left;">208.5494</td>
<td style="text-align: left;">256.1965</td>
<td style="text-align: left;">265.0909</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.1995</td>
<td style="text-align: left;">0.1998</td>
<td style="text-align: left;">0.2017</td>
<td style="text-align: left;">0.202</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.1991</td>
<td style="text-align: left;">0.1992</td>
<td style="text-align: left;">0.2</td>
<td style="text-align: left;">0.2007</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.1267</td>
<td style="text-align: left;">0.127</td>
<td style="text-align: left;">0.1288</td>
<td style="text-align: left;">0.1291</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0587</td>
<td style="text-align: left;">0.061</td>
<td style="text-align: left;">0.0683</td>
<td style="text-align: left;">0.0702</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.8755</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">154.7852</td>
<td style="text-align: left;">157.714</td>
<td style="text-align: left;">195.0413</td>
<td style="text-align: left;">201.8845</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.125</td>
<td style="text-align: left;">0.125</td>
<td style="text-align: left;">0.125</td>
<td style="text-align: left;">0.125</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0233</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.1237</td>
<td style="text-align: left;">0.1237</td>
<td style="text-align: left;">0.1237</td>
<td style="text-align: left;">0.1237</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.083</td>
<td style="text-align: left;">0.083</td>
<td style="text-align: left;">0.083</td>
<td style="text-align: left;">0.083</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.1741</td>
<td style="text-align: left;">0.1741</td>
<td style="text-align: left;">0.1741</td>
<td style="text-align: left;">0.1741</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.1236</td>
<td style="text-align: left;">0.1238</td>
<td style="text-align: left;">0.1248</td>
<td style="text-align: left;">0.125</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0146</td>
<td style="text-align: left;">0.0147</td>
<td style="text-align: left;">0.0156</td>
<td style="text-align: left;">0.0158</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.1228</td>
<td style="text-align: left;">0.1232</td>
<td style="text-align: left;">0.1244</td>
<td style="text-align: left;">0.1247</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0947</td>
<td style="text-align: left;">0.095</td>
<td style="text-align: left;">0.0968</td>
<td style="text-align: left;">0.0972</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.1539</td>
<td style="text-align: left;">0.1543</td>
<td style="text-align: left;">0.1572</td>
<td style="text-align: left;">0.1577</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.9"><h3 data-number="6.9" id="scenario-9---good-scenario">
<span class="header-section-number">6.9</span> <strong>Scenario 9 - Good Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-9---good-scenario"></a>
</h3>
<p>Scenario 9 describes a binary endpoint for a good scenario with low censoring in the current trial, small noise, majority of the events being observed and homogeneous historical data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">300</span>, g2 <span class="op">=</span> <span class="fl">300</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">0.999</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen9"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701655293</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 300     Scen9       260 2838.989 Scen9
2_g1 Study#2    1  g1 300     Scen9       259 2624.533 Scen9
3_g1 Study#3    1  g1 300     Scen9       251 2933.272 Scen9
4_g1 Study#4    1  g1 300     Scen9       251 2984.729 Scen9
5_g1 Study#5    1  g1 300     Scen9       259 2667.259 Scen9
6_g1 Study#6    1  g1 300     Scen9       265 2774.955 Scen9
7_g1 Study#7    1  g1 300     Scen9       255 2665.750 Scen9
8_g1 Study#8    0  g1 300     Scen9       261 2691.265 Scen9
1_g2 Study#1    1  g2 300     Scen9       292 1550.852 Scen9
2_g2 Study#2    1  g2 300     Scen9       295 1646.227 Scen9
3_g2 Study#3    1  g2 300     Scen9       297 1360.433 Scen9
4_g2 Study#4    1  g2 300     Scen9       289 1676.768 Scen9
5_g2 Study#5    1  g2 300     Scen9       294 1678.219 Scen9
6_g2 Study#6    1  g2 300     Scen9       295 1628.496 Scen9
7_g2 Study#7    1  g2 300     Scen9       295 1628.708 Scen9
8_g2 Study#8    0  g2 300     Scen9       295 1486.654 Scen9</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                     csv group             analysis saf_topic       seed pool
Good Scenario Scen09.csv    g1 Incidence proportion    Scen09 1701655293 TRUE
                     tau heterog  ESS rob_weight nta_event nta_npat
Good Scenario HalfNormal   Small elir       0.05       175      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.8563</td>
<td style="text-align: left;">0.8565</td>
<td style="text-align: left;">0.8572</td>
<td style="text-align: left;">0.8575</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.01</td>
<td style="text-align: left;">0.0102</td>
<td style="text-align: left;">0.0109</td>
<td style="text-align: left;">0.0139</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.8566</td>
<td style="text-align: left;">0.8567</td>
<td style="text-align: left;">0.8575</td>
<td style="text-align: left;">0.8576</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.8274</td>
<td style="text-align: left;">0.8336</td>
<td style="text-align: left;">0.8366</td>
<td style="text-align: left;">0.8373</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8753</td>
<td style="text-align: left;">0.8757</td>
<td style="text-align: left;">0.8782</td>
<td style="text-align: left;">0.8841</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">823.8082</td>
<td style="text-align: left;">1138.2494</td>
<td style="text-align: left;">1296.4729</td>
<td style="text-align: left;">1325.0507</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.8385</td>
<td style="text-align: left;">0.8387</td>
<td style="text-align: left;">0.8393</td>
<td style="text-align: left;">0.8396</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.1015</td>
<td style="text-align: left;">0.1015</td>
<td style="text-align: left;">0.1017</td>
<td style="text-align: left;">0.1019</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.8561</td>
<td style="text-align: left;">0.8563</td>
<td style="text-align: left;">0.857</td>
<td style="text-align: left;">0.8571</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.5</td>
<td style="text-align: left;">0.5</td>
<td style="text-align: left;">0.5</td>
<td style="text-align: left;">0.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8768</td>
<td style="text-align: left;">0.8769</td>
<td style="text-align: left;">0.8796</td>
<td style="text-align: left;">0.8865</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">774.0716</td>
<td style="text-align: left;">1068.3639</td>
<td style="text-align: left;">1216.9515</td>
<td style="text-align: left;">1244.3148</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.875</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0233</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.8763</td>
<td style="text-align: left;">0.8763</td>
<td style="text-align: left;">0.8763</td>
<td style="text-align: left;">0.8763</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.8259</td>
<td style="text-align: left;">0.8259</td>
<td style="text-align: left;">0.8259</td>
<td style="text-align: left;">0.8259</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.917</td>
<td style="text-align: left;">0.917</td>
<td style="text-align: left;">0.917</td>
<td style="text-align: left;">0.917</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.8591</td>
<td style="text-align: left;">0.8593</td>
<td style="text-align: left;">0.8599</td>
<td style="text-align: left;">0.8604</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0092</td>
<td style="text-align: left;">0.0092</td>
<td style="text-align: left;">0.0097</td>
<td style="text-align: left;">0.0113</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.859</td>
<td style="text-align: left;">0.8591</td>
<td style="text-align: left;">0.8599</td>
<td style="text-align: left;">0.8602</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.8389</td>
<td style="text-align: left;">0.8405</td>
<td style="text-align: left;">0.8416</td>
<td style="text-align: left;">0.8418</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8771</td>
<td style="text-align: left;">0.8773</td>
<td style="text-align: left;">0.8799</td>
<td style="text-align: left;">0.8845</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.10"><h3 data-number="6.10" id="scenario-10---favoured-control">
<span class="header-section-number">6.10</span> <strong>Scenario 10 - Favoured Control</strong>
<a class="anchor" aria-label="anchor" href="#scenario-10---favoured-control"></a>
</h3>
<p>Scenario 10 describes a binary endpoint for a favored control scenario with no censoring in the current trial, no noise, all events being observed, homogeneous historical data, heavy prior data conflict and the hazard ratio in favor of the control group.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.2</span>, g2 <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="fl">1.2</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen10"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701673095</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in rexp(nPat[i], hz[i]): NAs produced</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE    TOT_EXP  TREAT
1_g1 Study#1    1  g1 200    Scen10        54 234.482445 Scen10
2_g1 Study#2    1  g1 200    Scen10        42 200.954605 Scen10
3_g1 Study#3    1  g1 200    Scen10        59 233.239862 Scen10
4_g1 Study#4    1  g1 200    Scen10        51 204.363002 Scen10
5_g1 Study#5    1  g1 200    Scen10        52 170.728016 Scen10
6_g1 Study#6    0  g1 200    Scen10        93  -6.482995 Scen10
1_g2 Study#1    1  g2 200    Scen10        36 282.421760 Scen10
2_g2 Study#2    1  g2 200    Scen10        46 214.300246 Scen10
3_g2 Study#3    1  g2 200    Scen10        32 318.335395 Scen10
4_g2 Study#4    1  g2 200    Scen10        37 243.939964 Scen10
5_g2 Study#5    1  g2 200    Scen10        39 244.166712 Scen10
6_g2 Study#6    0  g2 200    Scen10        NA         NA Scen10</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                       csv group             analysis saf_topic       seed pool
Favored Control Scen10.csv    g1 Incidence proportion    Scen10 1701673095 TRUE
                       tau heterog  ESS rob_weight nta_event nta_npat
Favored Control HalfNormal   Small elir        0.6       175      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.2575</td>
<td style="text-align: left;">0.2577</td>
<td style="text-align: left;">0.2591</td>
<td style="text-align: left;">0.2594</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0178</td>
<td style="text-align: left;">0.018</td>
<td style="text-align: left;">0.0192</td>
<td style="text-align: left;">0.025</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.257</td>
<td style="text-align: left;">0.2573</td>
<td style="text-align: left;">0.2588</td>
<td style="text-align: left;">0.2591</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.2094</td>
<td style="text-align: left;">0.2203</td>
<td style="text-align: left;">0.2245</td>
<td style="text-align: left;">0.2252</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.2933</td>
<td style="text-align: left;">0.294</td>
<td style="text-align: left;">0.299</td>
<td style="text-align: left;">0.3103</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">375.0382</td>
<td style="text-align: left;">558.9076</td>
<td style="text-align: left;">628.9878</td>
<td style="text-align: left;">643.3917</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.403</td>
<td style="text-align: left;">0.4031</td>
<td style="text-align: left;">0.4036</td>
<td style="text-align: left;">0.4038</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.253</td>
<td style="text-align: left;">0.2531</td>
<td style="text-align: left;">0.2534</td>
<td style="text-align: left;">0.2535</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.2742</td>
<td style="text-align: left;">0.2744</td>
<td style="text-align: left;">0.2763</td>
<td style="text-align: left;">0.2794</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.0417</td>
<td style="text-align: left;">0.0417</td>
<td style="text-align: left;">0.0417</td>
<td style="text-align: left;">0.0417</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9583</td>
<td style="text-align: left;">0.9583</td>
<td style="text-align: left;">0.9583</td>
<td style="text-align: left;">0.9583</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">115.1126</td>
<td style="text-align: left;">171.2627</td>
<td style="text-align: left;">197.8828</td>
<td style="text-align: left;">201.7215</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.875</td>
<td style="text-align: left;">0.875</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0233</td>
<td style="text-align: left;">0.0233</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.8763</td>
<td style="text-align: left;">0.8763</td>
<td style="text-align: left;">0.8763</td>
<td style="text-align: left;">0.8763</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.8259</td>
<td style="text-align: left;">0.8259</td>
<td style="text-align: left;">0.8259</td>
<td style="text-align: left;">0.8259</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.917</td>
<td style="text-align: left;">0.917</td>
<td style="text-align: left;">0.917</td>
<td style="text-align: left;">0.917</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.8713</td>
<td style="text-align: left;">0.8713</td>
<td style="text-align: left;">0.8713</td>
<td style="text-align: left;">0.8713</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0235</td>
<td style="text-align: left;">0.0235</td>
<td style="text-align: left;">0.0235</td>
<td style="text-align: left;">0.0235</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.8725</td>
<td style="text-align: left;">0.8725</td>
<td style="text-align: left;">0.8725</td>
<td style="text-align: left;">0.8725</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.8219</td>
<td style="text-align: left;">0.8219</td>
<td style="text-align: left;">0.8219</td>
<td style="text-align: left;">0.8219</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9137</td>
<td style="text-align: left;">0.9137</td>
<td style="text-align: left;">0.9137</td>
<td style="text-align: left;">0.9137</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.11"><h3 data-number="6.11" id="scenario-11---continued-study-duration-with-realistic-setting">
<span class="header-section-number">6.11</span> <strong>Scenario 11 - Continued study duration with Realistic Setting</strong>
<a class="anchor" aria-label="anchor" href="#scenario-11---continued-study-duration-with-realistic-setting"></a>
</h3>
<p>Scenario 11 describes a binary endpoint for a realistic situation where the study continued regardless of when the proposed number of events has been observed. Characteristics of this scenario includes a drop out rate of 5%, noise at a 5% tau, homogeneous historical data and no planned prior data conflict planned.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen11"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701876972</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP  TREAT
1_g1 Study#1    1  g1 200    Scen11       170 1871.1930 Scen11
2_g1 Study#2    1  g1 200    Scen11       173 1630.1105 Scen11
3_g1 Study#3    1  g1 200    Scen11       168 1744.6636 Scen11
4_g1 Study#4    1  g1 200    Scen11       170 1904.9560 Scen11
5_g1 Study#5    1  g1 200    Scen11       166 1748.6775 Scen11
6_g1 Study#6    0  g1 200    Scen11       162 1879.6921 Scen11
1_g2 Study#1    1  g2 200    Scen11       191  910.6017 Scen11
2_g2 Study#2    1  g2 200    Scen11       192  957.8531 Scen11
3_g2 Study#3    1  g2 200    Scen11       196  922.9765 Scen11
4_g2 Study#4    1  g2 200    Scen11       198  927.3806 Scen11
5_g2 Study#5    1  g2 200    Scen11       193 1027.3669 Scen11
6_g2 Study#6    0  g2 200    Scen11       196 1068.8192 Scen11</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                       csv group
Continued Study Duration with Realistic Setting Scen11.csv    g1
                                                            analysis saf_topic
Continued Study Duration with Realistic Setting Incidence proportion    Scen11
                                                      seed pool        tau
Continued Study Duration with Realistic Setting 1701876972 TRUE HalfNormal
                                                heterog  ESS rob_weight
Continued Study Duration with Realistic Setting   Small elir       0.05
                                                nta_event nta_npat
Continued Study Duration with Realistic Setting       170      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.8458</td>
<td style="text-align: left;">0.846</td>
<td style="text-align: left;">0.8469</td>
<td style="text-align: left;">0.8472</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0133</td>
<td style="text-align: left;">0.0135</td>
<td style="text-align: left;">0.0143</td>
<td style="text-align: left;">0.0173</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.8461</td>
<td style="text-align: left;">0.8463</td>
<td style="text-align: left;">0.8475</td>
<td style="text-align: left;">0.8476</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.8077</td>
<td style="text-align: left;">0.8163</td>
<td style="text-align: left;">0.8196</td>
<td style="text-align: left;">0.8201</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8707</td>
<td style="text-align: left;">0.8713</td>
<td style="text-align: left;">0.8741</td>
<td style="text-align: left;">0.8801</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">503.3322</td>
<td style="text-align: left;">662.3413</td>
<td style="text-align: left;">740.7616</td>
<td style="text-align: left;">761.5512</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.8285</td>
<td style="text-align: left;">0.8287</td>
<td style="text-align: left;">0.8296</td>
<td style="text-align: left;">0.8298</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.1001</td>
<td style="text-align: left;">0.1002</td>
<td style="text-align: left;">0.1004</td>
<td style="text-align: left;">0.1007</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.8454</td>
<td style="text-align: left;">0.8457</td>
<td style="text-align: left;">0.8468</td>
<td style="text-align: left;">0.847</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.5</td>
<td style="text-align: left;">0.5</td>
<td style="text-align: left;">0.5</td>
<td style="text-align: left;">0.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8725</td>
<td style="text-align: left;">0.8727</td>
<td style="text-align: left;">0.8757</td>
<td style="text-align: left;">0.8813</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">470.4463</td>
<td style="text-align: left;">617.2974</td>
<td style="text-align: left;">691.4401</td>
<td style="text-align: left;">708.0809</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.85</td>
<td style="text-align: left;">0.85</td>
<td style="text-align: left;">0.85</td>
<td style="text-align: left;">0.85</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.8512</td>
<td style="text-align: left;">0.8512</td>
<td style="text-align: left;">0.8512</td>
<td style="text-align: left;">0.8512</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.7975</td>
<td style="text-align: left;">0.7975</td>
<td style="text-align: left;">0.7975</td>
<td style="text-align: left;">0.7975</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.8959</td>
<td style="text-align: left;">0.8959</td>
<td style="text-align: left;">0.8959</td>
<td style="text-align: left;">0.8959</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.8468</td>
<td style="text-align: left;">0.8469</td>
<td style="text-align: left;">0.8477</td>
<td style="text-align: left;">0.8478</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0117</td>
<td style="text-align: left;">0.0118</td>
<td style="text-align: left;">0.0122</td>
<td style="text-align: left;">0.0134</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.8468</td>
<td style="text-align: left;">0.8469</td>
<td style="text-align: left;">0.848</td>
<td style="text-align: left;">0.8481</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.8202</td>
<td style="text-align: left;">0.8221</td>
<td style="text-align: left;">0.8237</td>
<td style="text-align: left;">0.824</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.869</td>
<td style="text-align: left;">0.8693</td>
<td style="text-align: left;">0.8712</td>
<td style="text-align: left;">0.8731</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.12"><h3 data-number="6.12" id="scenario-12---continued-study-duration-with-worst-setting">
<span class="header-section-number">6.12</span> <strong>Scenario 12 - Continued study duration with Worst Setting</strong>
<a class="anchor" aria-label="anchor" href="#scenario-12---continued-study-duration-with-worst-setting"></a>
</h3>
<p>Scenario 12 describes a binary endpoint for a scenario with a worst case scenario (scenario 4) that continued till the end of the proposed study duration. The scenario characteristics includes huge censoring, huge noise, little events observed, heterogeneous historical and huge prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">400</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.05</span>, g2 <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen12"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701878308</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP  TREAT
1_g1 Study#1    1  g1 200    Scen12       193 2145.2002 Scen12
2_g1 Study#2    1  g1 200    Scen12       189 2026.7007 Scen12
3_g1 Study#3    1  g1 200    Scen12       192 2099.1503 Scen12
4_g1 Study#4    1  g1 200    Scen12       193 2200.2265 Scen12
5_g1 Study#5    1  g1 200    Scen12       189 2060.4879 Scen12
6_g1 Study#6    0  g1 200    Scen12       193 3214.6233 Scen12
1_g2 Study#1    1  g2 200    Scen12       196  927.0819 Scen12
2_g2 Study#2    1  g2 200    Scen12       193 1097.0120 Scen12
3_g2 Study#3    1  g2 200    Scen12       196 1112.5535 Scen12
4_g2 Study#4    1  g2 200    Scen12       195 1489.9002 Scen12
5_g2 Study#5    1  g2 200    Scen12       198 1575.7302 Scen12
6_g2 Study#6    0  g2 200    Scen12       191 1811.5262 Scen12</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                   csv group
Continued Study Duration with Worst Setting Scen12.csv    g1
                                                        analysis saf_topic
Continued Study Duration with Worst Setting Incidence proportion    Scen12
                                                  seed pool        tau heterog
Continued Study Duration with Worst Setting 1701878308 TRUE HalfNormal   Large
                                             ESS rob_weight nta_event nta_npat
Continued Study Duration with Worst Setting elir        0.5        30      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.9524</td>
<td style="text-align: left;">0.953</td>
<td style="text-align: left;">0.9542</td>
<td style="text-align: left;">0.9544</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0143</td>
<td style="text-align: left;">0.0148</td>
<td style="text-align: left;">0.0204</td>
<td style="text-align: left;">0.0237</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.9551</td>
<td style="text-align: left;">0.9553</td>
<td style="text-align: left;">0.9562</td>
<td style="text-align: left;">0.9563</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.9034</td>
<td style="text-align: left;">0.912</td>
<td style="text-align: left;">0.9214</td>
<td style="text-align: left;">0.9224</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.975</td>
<td style="text-align: left;">0.9756</td>
<td style="text-align: left;">0.9782</td>
<td style="text-align: left;">0.98</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS MAP Prior</td>
<td style="text-align: left;">259.1619</td>
<td style="text-align: left;">277.2156</td>
<td style="text-align: left;">362.0679</td>
<td style="text-align: left;">373.7183</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.7262</td>
<td style="text-align: left;">0.7264</td>
<td style="text-align: left;">0.7271</td>
<td style="text-align: left;">0.7272</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.305</td>
<td style="text-align: left;">0.3051</td>
<td style="text-align: left;">0.3055</td>
<td style="text-align: left;">0.3056</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;">0.9323</td>
<td style="text-align: left;">0.9349</td>
<td style="text-align: left;">0.9351</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.05</td>
<td style="text-align: left;">0.05</td>
<td style="text-align: left;">0.05</td>
<td style="text-align: left;">0.05</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9748</td>
<td style="text-align: left;">0.975</td>
<td style="text-align: left;">0.9774</td>
<td style="text-align: left;">0.9786</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS robustified MAP</td>
<td style="text-align: left;">111.3519</td>
<td style="text-align: left;">121.4599</td>
<td style="text-align: left;">163.1765</td>
<td style="text-align: left;">169.3251</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.15</td>
<td style="text-align: left;">0.15</td>
<td style="text-align: left;">0.15</td>
<td style="text-align: left;">0.15</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0252</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.1488</td>
<td style="text-align: left;">0.1488</td>
<td style="text-align: left;">0.1488</td>
<td style="text-align: left;">0.1488</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.1041</td>
<td style="text-align: left;">0.1041</td>
<td style="text-align: left;">0.1041</td>
<td style="text-align: left;">0.1041</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.2025</td>
<td style="text-align: left;">0.2025</td>
<td style="text-align: left;">0.2025</td>
<td style="text-align: left;">0.2025</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Likelihood</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.1535</td>
<td style="text-align: left;">0.1535</td>
<td style="text-align: left;">0.1535</td>
<td style="text-align: left;">0.1535</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0253</td>
<td style="text-align: left;">0.0253</td>
<td style="text-align: left;">0.0253</td>
<td style="text-align: left;">0.0253</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.1523</td>
<td style="text-align: left;">0.1523</td>
<td style="text-align: left;">0.1523</td>
<td style="text-align: left;">0.1523</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.1072</td>
<td style="text-align: left;">0.1073</td>
<td style="text-align: left;">0.1073</td>
<td style="text-align: left;">0.1073</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.2061</td>
<td style="text-align: left;">0.2061</td>
<td style="text-align: left;">0.2062</td>
<td style="text-align: left;">0.2062</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS Posterior</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="6.13"><h3 data-number="6.13" id="scenario-13---different-treatment-length">
<span class="header-section-number">6.13</span> <strong>Scenario 13 - Different treatment length</strong>
<a class="anchor" aria-label="anchor" href="#scenario-13---different-treatment-length"></a>
</h3>
<p>Scenario 13 describes a good scenario with different treatment length. This is in violation with the exchange ability assumption for proportions and tests fail for this analysis on a regular basis, therefore, it was excluded from testing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  diff_trt_length <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen13"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1718356066</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP LENGTH  TREAT
1_g1 Study#1    1  g1 200    Scen13       151 1566.6752    548 Scen13
2_g1 Study#2    1  g1 200    Scen13       150 1494.2869    548 Scen13
3_g1 Study#3    1  g1 200    Scen13       174 1599.3219    730 Scen13
4_g1 Study#4    1  g1 200    Scen13       173 1799.5756    730 Scen13
5_g1 Study#5    1  g1 200    Scen13       185 1708.9438    912 Scen13
6_g1 Study#6    0  g1 200    Scen13       186 1681.4362    912 Scen13
1_g2 Study#1    1  g2 200    Scen13       185  897.0528    548 Scen13
2_g2 Study#2    1  g2 200    Scen13       185  872.8150    548 Scen13
3_g2 Study#3    1  g2 200    Scen13       191  943.3266    730 Scen13
4_g2 Study#4    1  g2 200    Scen13       194  872.9301    730 Scen13
5_g2 Study#5    1  g2 200    Scen13       192 1047.1975    912 Scen13
6_g2 Study#6    0  g2 200    Scen13       198  861.1155    912 Scen13</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                  csv group             analysis saf_topic
Different treatment length Scen13.csv    g1 Incidence proportion    Scen13
                                 seed pool        tau heterog  ESS rob_weight
Different treatment length 1718356066 TRUE HalfNormal   Large elir        0.1
                           nta_event nta_npat
Different treatment length       186      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 40%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: mean</td>
<td style="text-align: left;">0.8107</td>
<td style="text-align: left;">0.8174</td>
<td style="text-align: left;">0.8247</td>
<td style="text-align: left;">0.8259</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected MAP Prior: SD</td>
<td style="text-align: left;">0.09</td>
<td style="text-align: left;">0.0924</td>
<td style="text-align: left;">0.1013</td>
<td style="text-align: left;">0.1251</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected MAP Prior: median</td>
<td style="text-align: left;">0.8339</td>
<td style="text-align: left;">0.8358</td>
<td style="text-align: left;">0.8433</td>
<td style="text-align: left;">0.8448</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.4636</td>
<td style="text-align: left;">0.5513</td>
<td style="text-align: left;">0.5973</td>
<td style="text-align: left;">0.6031</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9469</td>
<td style="text-align: left;">0.9485</td>
<td style="text-align: left;">0.9564</td>
<td style="text-align: left;">0.9632</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS</td>
<td style="text-align: left;">16.3107</td>
<td style="text-align: left;">18.8341</td>
<td style="text-align: left;">21.8854</td>
<td style="text-align: left;">22.7865</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.7793</td>
<td style="text-align: left;">0.7855</td>
<td style="text-align: left;">0.792</td>
<td style="text-align: left;">0.7931</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.1587</td>
<td style="text-align: left;">0.1593</td>
<td style="text-align: left;">0.1636</td>
<td style="text-align: left;">0.1765</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.8267</td>
<td style="text-align: left;">0.8283</td>
<td style="text-align: left;">0.8353</td>
<td style="text-align: left;">0.8369</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.2166</td>
<td style="text-align: left;">0.2427</td>
<td style="text-align: left;">0.2491</td>
<td style="text-align: left;">0.2496</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9484</td>
<td style="text-align: left;">0.9494</td>
<td style="text-align: left;">0.9557</td>
<td style="text-align: left;">0.9627</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS</td>
<td style="text-align: left;">12.8102</td>
<td style="text-align: left;">15.5257</td>
<td style="text-align: left;">18.1352</td>
<td style="text-align: left;">18.9596</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: mean</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;">0.93</td>
<td style="text-align: left;">0.93</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.018</td>
<td style="text-align: left;">0.018</td>
<td style="text-align: left;">0.018</td>
<td style="text-align: left;">0.018</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Likelihood: median</td>
<td style="text-align: left;">0.9314</td>
<td style="text-align: left;">0.9314</td>
<td style="text-align: left;">0.9314</td>
<td style="text-align: left;">0.9314</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.8909</td>
<td style="text-align: left;">0.8909</td>
<td style="text-align: left;">0.8909</td>
<td style="text-align: left;">0.8909</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.961</td>
<td style="text-align: left;">0.961</td>
<td style="text-align: left;">0.961</td>
<td style="text-align: left;">0.961</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: mean</td>
<td style="text-align: left;">0.9179</td>
<td style="text-align: left;">0.9184</td>
<td style="text-align: left;">0.9203</td>
<td style="text-align: left;">0.9213</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0178</td>
<td style="text-align: left;">0.0179</td>
<td style="text-align: left;">0.0183</td>
<td style="text-align: left;">0.0184</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expected results for Posterior: median</td>
<td style="text-align: left;">0.9189</td>
<td style="text-align: left;">0.9195</td>
<td style="text-align: left;">0.9215</td>
<td style="text-align: left;">0.9225</td>
</tr>
<tr class="even">
<td style="text-align: left;">95% CrILB</td>
<td style="text-align: left;">0.8793</td>
<td style="text-align: left;">0.8797</td>
<td style="text-align: left;">0.8815</td>
<td style="text-align: left;">0.8826</td>
</tr>
<tr class="odd">
<td style="text-align: left;">95% CrIUB</td>
<td style="text-align: left;">0.9502</td>
<td style="text-align: left;">0.9505</td>
<td style="text-align: left;">0.9523</td>
<td style="text-align: left;">0.953</td>
</tr>
<tr class="even">
<td style="text-align: left;">ESS</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section></section><section class="section level2" data-number="7"><h2 data-number="7" id="sec-time-to-event-endpoint-results">
<span class="header-section-number">7</span> <strong>Time To Event Endpoint results</strong>
<a class="anchor" aria-label="anchor" href="#sec-time-to-event-endpoint-results"></a>
</h2>
<section class="level2" data-number="7.1"><h3 data-number="7.1" id="scenario-1---best-case-scenario-1">
<span class="header-section-number">7.1</span> <strong>Scenario 1 - Best Case Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-1---best-case-scenario-1"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Scen1</span></span>
<span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">300</span>, g2 <span class="op">=</span> <span class="fl">300</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">0.999</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen1"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1699874539</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1   Study#1    1  g1 300     Scen1       299 2828.715 Scen1
2_g1   Study#2    1  g1 300     Scen1       299 2882.367 Scen1
3_g1   Study#3    1  g1 300     Scen1       299 3236.408 Scen1
4_g1   Study#4    1  g1 300     Scen1       299 3085.252 Scen1
5_g1   Study#5    1  g1 300     Scen1       299 2984.353 Scen1
6_g1   Study#6    1  g1 300     Scen1       299 3305.953 Scen1
7_g1   Study#7    1  g1 300     Scen1       299 2975.530 Scen1
8_g1   Study#8    1  g1 300     Scen1       299 3103.969 Scen1
9_g1   Study#9    1  g1 300     Scen1       299 2763.876 Scen1
10_g1 Study#10    0  g1 300     Scen1       299 3044.691 Scen1
1_g2   Study#1    1  g2 300     Scen1       300 1466.836 Scen1
2_g2   Study#2    1  g2 300     Scen1       300 1604.556 Scen1
3_g2   Study#3    1  g2 300     Scen1       300 1428.295 Scen1
4_g2   Study#4    1  g2 300     Scen1       300 1472.222 Scen1
5_g2   Study#5    1  g2 300     Scen1       300 1678.517 Scen1
6_g2   Study#6    1  g2 300     Scen1       300 1504.812 Scen1
7_g2   Study#7    1  g2 300     Scen1       300 1626.479 Scen1
8_g2   Study#8    1  g2 300     Scen1       300 1480.283 Scen1
9_g2   Study#9    1  g2 300     Scen1       300 1644.251 Scen1
10_g2 Study#10    0  g2 300     Scen1       300 1519.465 Scen1</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                          csv group                  analysis saf_topic
Best Case Scenario Scen01.csv    g1 Exposure-adjusted AE rate    Scen01
                         seed pool        tau heterog  ESS rob_weight rob_mean
Best Case Scenario 1699874539 TRUE HalfNormal   Small elir       0.05      0.1
                   nta_event nta_time
Best Case Scenario       100     1000</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.3129</td>
<td style="text-align: left;">-2.3123</td>
<td style="text-align: left;">-2.3093</td>
<td style="text-align: left;">-2.3088</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0394</td>
<td style="text-align: left;">0.0399</td>
<td style="text-align: left;">0.0436</td>
<td style="text-align: left;">0.0445</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.3134</td>
<td style="text-align: left;">-2.3125</td>
<td style="text-align: left;">-2.3095</td>
<td style="text-align: left;">-2.3091</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.4062</td>
<td style="text-align: left;">-2.4039</td>
<td style="text-align: left;">-2.3897</td>
<td style="text-align: left;">-2.3877</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.233</td>
<td style="text-align: left;">-2.2306</td>
<td style="text-align: left;">-2.2167</td>
<td style="text-align: left;">-2.2146</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">736.2409</td>
<td style="text-align: left;">763.0512</td>
<td style="text-align: left;">886.8576</td>
<td style="text-align: left;">3395463.4564</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.3124</td>
<td style="text-align: left;">-2.3118</td>
<td style="text-align: left;">-2.3089</td>
<td style="text-align: left;">-2.3085</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.2269</td>
<td style="text-align: left;">0.227</td>
<td style="text-align: left;">0.2276</td>
<td style="text-align: left;">0.2278</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.313</td>
<td style="text-align: left;">-2.3123</td>
<td style="text-align: left;">-2.3095</td>
<td style="text-align: left;">-2.3092</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.4887</td>
<td style="text-align: left;">-2.4778</td>
<td style="text-align: left;">-2.445</td>
<td style="text-align: left;">-2.4413</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.1743</td>
<td style="text-align: left;">-2.1713</td>
<td style="text-align: left;">-2.1405</td>
<td style="text-align: left;">-2.1325</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">690.6398</td>
<td style="text-align: left;">715.8271</td>
<td style="text-align: left;">833.4278</td>
<td style="text-align: left;">3161488.7143</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-2.3026</td>
<td style="text-align: left;">-2.3026</td>
<td style="text-align: left;">-2.3026</td>
<td style="text-align: left;">-2.3026</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.1</td>
<td style="text-align: left;">0.1</td>
<td style="text-align: left;">0.1</td>
<td style="text-align: left;">0.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-2.3026</td>
<td style="text-align: left;">-2.3026</td>
<td style="text-align: left;">-2.3026</td>
<td style="text-align: left;">-2.3026</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.4986</td>
<td style="text-align: left;">-2.4986</td>
<td style="text-align: left;">-2.4986</td>
<td style="text-align: left;">-2.4986</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.1066</td>
<td style="text-align: left;">-2.1066</td>
<td style="text-align: left;">-2.1066</td>
<td style="text-align: left;">-2.1066</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-2.3113</td>
<td style="text-align: left;">-2.3111</td>
<td style="text-align: left;">-2.3087</td>
<td style="text-align: left;">-2.3083</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0348</td>
<td style="text-align: left;">0.0352</td>
<td style="text-align: left;">0.0372</td>
<td style="text-align: left;">0.0376</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-2.3121</td>
<td style="text-align: left;">-2.3114</td>
<td style="text-align: left;">-2.3089</td>
<td style="text-align: left;">-2.3085</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.3885</td>
<td style="text-align: left;">-2.387</td>
<td style="text-align: left;">-2.3784</td>
<td style="text-align: left;">-2.3773</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.2396</td>
<td style="text-align: left;">-2.2388</td>
<td style="text-align: left;">-2.2292</td>
<td style="text-align: left;">-2.2276</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.0991</td>
<td style="text-align: left;">0.0991</td>
<td style="text-align: left;">0.0994</td>
<td style="text-align: left;">0.0995</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0039</td>
<td style="text-align: left;">0.004</td>
<td style="text-align: left;">0.0044</td>
<td style="text-align: left;">0.0045</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.0989</td>
<td style="text-align: left;">0.099</td>
<td style="text-align: left;">0.0993</td>
<td style="text-align: left;">0.0994</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0902</td>
<td style="text-align: left;">0.0904</td>
<td style="text-align: left;">0.0917</td>
<td style="text-align: left;">0.0918</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1072</td>
<td style="text-align: left;">0.1075</td>
<td style="text-align: left;">0.109</td>
<td style="text-align: left;">0.1092</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.102</td>
<td style="text-align: left;">0.1022</td>
<td style="text-align: left;">0.103</td>
<td style="text-align: left;">0.1031</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.0409</td>
<td style="text-align: left;">0.0448</td>
<td style="text-align: left;">0.0595</td>
<td style="text-align: left;">0.1086</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.099</td>
<td style="text-align: left;">0.099</td>
<td style="text-align: left;">0.0993</td>
<td style="text-align: left;">0.0993</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.083</td>
<td style="text-align: left;">0.0838</td>
<td style="text-align: left;">0.0867</td>
<td style="text-align: left;">0.0874</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1132</td>
<td style="text-align: left;">0.1136</td>
<td style="text-align: left;">0.118</td>
<td style="text-align: left;">0.119</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.0992</td>
<td style="text-align: left;">0.0992</td>
<td style="text-align: left;">0.0995</td>
<td style="text-align: left;">0.0995</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0035</td>
<td style="text-align: left;">0.0035</td>
<td style="text-align: left;">0.0037</td>
<td style="text-align: left;">0.0038</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.0991</td>
<td style="text-align: left;">0.0991</td>
<td style="text-align: left;">0.0994</td>
<td style="text-align: left;">0.0994</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0918</td>
<td style="text-align: left;">0.0919</td>
<td style="text-align: left;">0.0927</td>
<td style="text-align: left;">0.0929</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1064</td>
<td style="text-align: left;">0.1066</td>
<td style="text-align: left;">0.1076</td>
<td style="text-align: left;">0.1077</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.2"><h3 data-number="7.2" id="scenario-2---strong-prior-data-conflict-1">
<span class="header-section-number">7.2</span> <strong>Scenario 2 - Strong Prior Data Conflict</strong>
<a class="anchor" aria-label="anchor" href="#scenario-2---strong-prior-data-conflict-1"></a>
</h3>
<p>Scenario 2 describes a test case scenario for a binary endpoint with a strong prior data conflict between the historical and current trials. The characteristics of this scenario includes no censoring in the current trial, no noise, all events being observed, homogeneous historical data and heavy prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Scen2</span></span>
<span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.4</span>, g2 <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen2"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701611344</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP TREAT
1_g1   Study#1    1  g1 200     Scen2       161 1530.2128 Scen2
2_g1   Study#2    1  g1 200     Scen2       162 1528.7454 Scen2
3_g1   Study#3    1  g1 200     Scen2       160 1660.3443 Scen2
4_g1   Study#4    1  g1 200     Scen2       161 1840.7538 Scen2
5_g1   Study#5    1  g1 200     Scen2       162 1605.1504 Scen2
6_g1   Study#6    1  g1 200     Scen2       164 1496.5477 Scen2
7_g1   Study#7    1  g1 200     Scen2       161 1622.6838 Scen2
8_g1   Study#8    1  g1 200     Scen2       162 1575.8092 Scen2
9_g1   Study#9    1  g1 200     Scen2       161 1638.6499 Scen2
10_g1 Study#10    0  g1 200     Scen2       200  439.5240 Scen2
1_g2   Study#1    1  g2 200     Scen2       199  723.4652 Scen2
2_g2   Study#2    1  g2 200     Scen2       198  725.3088 Scen2
3_g2   Study#3    1  g2 200     Scen2       200  633.6027 Scen2
4_g2   Study#4    1  g2 200     Scen2       199  631.2705 Scen2
5_g2   Study#5    1  g2 200     Scen2       198  701.9784 Scen2
6_g2   Study#6    1  g2 200     Scen2       196  705.4184 Scen2
7_g2   Study#7    1  g2 200     Scen2       199  680.0606 Scen2
8_g2   Study#8    1  g2 200     Scen2       198  704.2055 Scen2
9_g2   Study#9    1  g2 200     Scen2       199  727.2699 Scen2
10_g2 Study#10    0  g2 200     Scen2       160 3910.1011 Scen2</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                  csv group                  analysis saf_topic
Strong Prior Data Conflict Scen02.csv    g2 Exposure-adjusted AE rate    Scen02
                                 seed pool        tau heterog  ESS rob_weight
Strong Prior Data Conflict 1701611344 TRUE HalfNormal   Small elir        0.8
                           rob_mean nta_event nta_time
Strong Prior Data Conflict   0.3854       200      518</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.3005</td>
<td style="text-align: left;">-2.2999</td>
<td style="text-align: left;">-2.2963</td>
<td style="text-align: left;">-2.2957</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0456</td>
<td style="text-align: left;">0.0466</td>
<td style="text-align: left;">0.0505</td>
<td style="text-align: left;">0.0522</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.3005</td>
<td style="text-align: left;">-2.3</td>
<td style="text-align: left;">-2.2964</td>
<td style="text-align: left;">-2.2958</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.4081</td>
<td style="text-align: left;">-2.4046</td>
<td style="text-align: left;">-2.3892</td>
<td style="text-align: left;">-2.3879</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.209</td>
<td style="text-align: left;">-2.2062</td>
<td style="text-align: left;">-2.1903</td>
<td style="text-align: left;">-2.1867</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">501.6945</td>
<td style="text-align: left;">515.8801</td>
<td style="text-align: left;">602.4201</td>
<td style="text-align: left;">2621456.6029</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-1.2229</td>
<td style="text-align: left;">-1.2227</td>
<td style="text-align: left;">-1.222</td>
<td style="text-align: left;">-1.2219</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">1.0434</td>
<td style="text-align: left;">1.0435</td>
<td style="text-align: left;">1.0443</td>
<td style="text-align: left;">1.0444</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-1.2721</td>
<td style="text-align: left;">-1.2721</td>
<td style="text-align: left;">-1.2721</td>
<td style="text-align: left;">-1.2721</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.8166</td>
<td style="text-align: left;">-2.8162</td>
<td style="text-align: left;">-2.8162</td>
<td style="text-align: left;">-2.8162</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">0.9093</td>
<td style="text-align: left;">0.9093</td>
<td style="text-align: left;">0.9093</td>
<td style="text-align: left;">0.9093</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">78.9374</td>
<td style="text-align: left;">82.4984</td>
<td style="text-align: left;">98.2023</td>
<td style="text-align: left;">438521.5568</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0707</td>
<td style="text-align: left;">0.0707</td>
<td style="text-align: left;">0.0707</td>
<td style="text-align: left;">0.0707</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-1.0902</td>
<td style="text-align: left;">-1.0902</td>
<td style="text-align: left;">-1.0902</td>
<td style="text-align: left;">-1.0902</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-0.8131</td>
<td style="text-align: left;">-0.8131</td>
<td style="text-align: left;">-0.8131</td>
<td style="text-align: left;">-0.8131</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0705</td>
<td style="text-align: left;">0.0705</td>
<td style="text-align: left;">0.0705</td>
<td style="text-align: left;">0.0705</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9517</td>
<td style="text-align: left;">-0.9516</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-1.0899</td>
<td style="text-align: left;">-1.0899</td>
<td style="text-align: left;">-1.0899</td>
<td style="text-align: left;">-1.0899</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-0.8135</td>
<td style="text-align: left;">-0.8135</td>
<td style="text-align: left;">-0.8134</td>
<td style="text-align: left;">-0.8134</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.1003</td>
<td style="text-align: left;">0.1004</td>
<td style="text-align: left;">0.1008</td>
<td style="text-align: left;">0.1008</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0046</td>
<td style="text-align: left;">0.0047</td>
<td style="text-align: left;">0.0051</td>
<td style="text-align: left;">0.0053</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.1002</td>
<td style="text-align: left;">0.1003</td>
<td style="text-align: left;">0.1006</td>
<td style="text-align: left;">0.1007</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.09</td>
<td style="text-align: left;">0.0903</td>
<td style="text-align: left;">0.0917</td>
<td style="text-align: left;">0.0918</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1098</td>
<td style="text-align: left;">0.1101</td>
<td style="text-align: left;">0.1119</td>
<td style="text-align: left;">0.1123</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.5209</td>
<td style="text-align: left;">0.5226</td>
<td style="text-align: left;">0.5346</td>
<td style="text-align: left;">0.5366</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.7416</td>
<td style="text-align: left;">0.7493</td>
<td style="text-align: left;">0.8173</td>
<td style="text-align: left;">0.874</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.2757</td>
<td style="text-align: left;">0.277</td>
<td style="text-align: left;">0.2837</td>
<td style="text-align: left;">0.2851</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0581</td>
<td style="text-align: left;">0.0586</td>
<td style="text-align: left;">0.0612</td>
<td style="text-align: left;">0.0616</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">2.4133</td>
<td style="text-align: left;">2.4318</td>
<td style="text-align: left;">2.5368</td>
<td style="text-align: left;">2.5511</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.3868</td>
<td style="text-align: left;">0.3869</td>
<td style="text-align: left;">0.3872</td>
<td style="text-align: left;">0.3873</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0271</td>
<td style="text-align: left;">0.0272</td>
<td style="text-align: left;">0.0275</td>
<td style="text-align: left;">0.0275</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.3857</td>
<td style="text-align: left;">0.3858</td>
<td style="text-align: left;">0.3863</td>
<td style="text-align: left;">0.3864</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.3356</td>
<td style="text-align: left;">0.3358</td>
<td style="text-align: left;">0.3367</td>
<td style="text-align: left;">0.3369</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.4426</td>
<td style="text-align: left;">0.4427</td>
<td style="text-align: left;">0.444</td>
<td style="text-align: left;">0.4444</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.3"><h3 data-number="7.3" id="scenario-3---realistic-scenario-1">
<span class="header-section-number">7.3</span> <strong>Scenario 3 - Realistic Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-3---realistic-scenario-1"></a>
</h3>
<p>Scenario 3 describes a binary endpoint for a realistic situation with a dropout rate of 5%, some with a 2% tau, events observed at a 90% power, homogeneous historical data and with no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen3"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701621384</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen3        30 282.8273 Scen3
2_g1 Study#2    1  g1 200     Scen3        35 345.5776 Scen3
3_g1 Study#3    1  g1 200     Scen3        32 355.6786 Scen3
4_g1 Study#4    1  g1 200     Scen3        35 409.5392 Scen3
5_g1 Study#5    1  g1 200     Scen3        36 207.1725 Scen3
6_g1 Study#6    0  g1 200     Scen3        40 291.3027 Scen3
1_g2 Study#1    1  g2 200     Scen3        60 259.6821 Scen3
2_g2 Study#2    1  g2 200     Scen3        52 268.0612 Scen3
3_g2 Study#3    1  g2 200     Scen3        57 237.5458 Scen3
4_g2 Study#4    1  g2 200     Scen3        54 359.4474 Scen3
5_g2 Study#5    1  g2 200     Scen3        52 170.1687 Scen3
6_g2 Study#6    0  g2 200     Scen3        50 266.0703 Scen3</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                          csv group                  analysis saf_topic
Realistic scenario Scen03.csv    g1 Exposure-adjusted AE rate    Scen03
                         seed pool        tau     heterog  ESS rob_weight
Realistic scenario 1701621384 TRUE HalfNormal Substantial elir       0.25
                   rob_mean nta_event nta_time
Realistic scenario   0.0944        31   328.47</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.3025</td>
<td style="text-align: left;">-2.2986</td>
<td style="text-align: left;">-2.2771</td>
<td style="text-align: left;">-2.2722</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.2536</td>
<td style="text-align: left;">0.2586</td>
<td style="text-align: left;">0.2831</td>
<td style="text-align: left;">0.2894</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.3132</td>
<td style="text-align: left;">-2.3047</td>
<td style="text-align: left;">-2.2865</td>
<td style="text-align: left;">-2.2821</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.8865</td>
<td style="text-align: left;">-2.8733</td>
<td style="text-align: left;">-2.7934</td>
<td style="text-align: left;">-2.7846</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.7698</td>
<td style="text-align: left;">-1.7477</td>
<td style="text-align: left;">-1.6492</td>
<td style="text-align: left;">-1.6336</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">17.4891</td>
<td style="text-align: left;">18.2772</td>
<td style="text-align: left;">22.374</td>
<td style="text-align: left;">23.0881</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.317</td>
<td style="text-align: left;">-2.314</td>
<td style="text-align: left;">-2.2979</td>
<td style="text-align: left;">-2.2942</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.5469</td>
<td style="text-align: left;">0.5487</td>
<td style="text-align: left;">0.5579</td>
<td style="text-align: left;">0.5602</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.3116</td>
<td style="text-align: left;">-2.3066</td>
<td style="text-align: left;">-2.2903</td>
<td style="text-align: left;">-2.2865</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.6569</td>
<td style="text-align: left;">-3.655</td>
<td style="text-align: left;">-3.6419</td>
<td style="text-align: left;">-3.6418</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.0777</td>
<td style="text-align: left;">-1.0771</td>
<td style="text-align: left;">-1.0481</td>
<td style="text-align: left;">-1.0433</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">11.1563</td>
<td style="text-align: left;">11.65</td>
<td style="text-align: left;">14.5225</td>
<td style="text-align: left;">14.9138</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.1796</td>
<td style="text-align: left;">0.1796</td>
<td style="text-align: left;">0.1796</td>
<td style="text-align: left;">0.1796</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.7125</td>
<td style="text-align: left;">-2.7125</td>
<td style="text-align: left;">-2.7125</td>
<td style="text-align: left;">-2.7125</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.0084</td>
<td style="text-align: left;">-2.0084</td>
<td style="text-align: left;">-2.0084</td>
<td style="text-align: left;">-2.0084</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-2.3399</td>
<td style="text-align: left;">-2.3376</td>
<td style="text-align: left;">-2.3291</td>
<td style="text-align: left;">-2.328</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.1315</td>
<td style="text-align: left;">0.1326</td>
<td style="text-align: left;">0.1387</td>
<td style="text-align: left;">0.1397</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-2.3391</td>
<td style="text-align: left;">-2.3362</td>
<td style="text-align: left;">-2.3262</td>
<td style="text-align: left;">-2.3248</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.6198</td>
<td style="text-align: left;">-2.6173</td>
<td style="text-align: left;">-2.6029</td>
<td style="text-align: left;">-2.5955</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.0785</td>
<td style="text-align: left;">-2.0764</td>
<td style="text-align: left;">-2.0649</td>
<td style="text-align: left;">-2.0617</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.1036</td>
<td style="text-align: left;">0.1042</td>
<td style="text-align: left;">0.1068</td>
<td style="text-align: left;">0.1073</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0284</td>
<td style="text-align: left;">0.0292</td>
<td style="text-align: left;">0.0396</td>
<td style="text-align: left;">0.0504</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.0989</td>
<td style="text-align: left;">0.0998</td>
<td style="text-align: left;">0.1016</td>
<td style="text-align: left;">0.1021</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0558</td>
<td style="text-align: left;">0.0565</td>
<td style="text-align: left;">0.0612</td>
<td style="text-align: left;">0.0618</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1704</td>
<td style="text-align: left;">0.1742</td>
<td style="text-align: left;">0.1922</td>
<td style="text-align: left;">0.1952</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.1164</td>
<td style="text-align: left;">0.1167</td>
<td style="text-align: left;">0.1192</td>
<td style="text-align: left;">0.1197</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.0999</td>
<td style="text-align: left;">0.1014</td>
<td style="text-align: left;">0.1175</td>
<td style="text-align: left;">0.1636</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.099</td>
<td style="text-align: left;">0.0995</td>
<td style="text-align: left;">0.1013</td>
<td style="text-align: left;">0.1017</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0254</td>
<td style="text-align: left;">0.0268</td>
<td style="text-align: left;">0.0271</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.3307</td>
<td style="text-align: left;">0.3343</td>
<td style="text-align: left;">0.3536</td>
<td style="text-align: left;">0.3608</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.0972</td>
<td style="text-align: left;">0.0974</td>
<td style="text-align: left;">0.0983</td>
<td style="text-align: left;">0.0985</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0128</td>
<td style="text-align: left;">0.013</td>
<td style="text-align: left;">0.0136</td>
<td style="text-align: left;">0.0137</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.0964</td>
<td style="text-align: left;">0.0967</td>
<td style="text-align: left;">0.0977</td>
<td style="text-align: left;">0.0978</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0725</td>
<td style="text-align: left;">0.073</td>
<td style="text-align: left;">0.0741</td>
<td style="text-align: left;">0.0746</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1249</td>
<td style="text-align: left;">0.1253</td>
<td style="text-align: left;">0.1269</td>
<td style="text-align: left;">0.1273</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.4"><h3 data-number="7.4" id="scenario-4---worst-case-scenario-1">
<span class="header-section-number">7.4</span> <strong>Scenario 4 - Worst Case Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-4---worst-case-scenario-1"></a>
</h3>
<p>Scenario 4 describes a binary endpoint for a worst case scenario with huge censoring during the trial, huge noise in the data, low number of events observed at 90% power, heterogeneous historical data and huge data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">50</span>, g2 <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.2</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">112</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.05</span>, g2 <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen4"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701626683</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1  50     Scen4        28 197.5691 Scen4
2_g1 Study#2    1  g1  50     Scen4        27 237.3923 Scen4
3_g1 Study#3    0  g1  50     Scen4        23 425.0280 Scen4
1_g2 Study#1    1  g2 100     Scen4        73 283.1671 Scen4
2_g2 Study#2    1  g2 100     Scen4        73 334.8827 Scen4
3_g2 Study#3    0  g2 100     Scen4        70 750.5857 Scen4</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                           csv group                  analysis saf_topic
worst Case Scenario Scen04.csv    g1 Exposure-adjusted AE rate    Scen04
                          seed pool        tau    heterog  ESS rob_weight
worst Case Scenario 1701626683 TRUE HalfNormal Very Large elir       0.25
                    rob_mean nta_event nta_time
worst Case Scenario   0.0539        31   328.47</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-1.7523</td>
<td style="text-align: left;">-1.7358</td>
<td style="text-align: left;">-1.6477</td>
<td style="text-align: left;">-1.5713</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.9037</td>
<td style="text-align: left;">0.9294</td>
<td style="text-align: left;">1.0706</td>
<td style="text-align: left;">1.2833</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-1.942</td>
<td style="text-align: left;">-1.9336</td>
<td style="text-align: left;">-1.8875</td>
<td style="text-align: left;">-1.8721</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.5157</td>
<td style="text-align: left;">-3.4159</td>
<td style="text-align: left;">-3.1215</td>
<td style="text-align: left;">-3.084</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">0.5523</td>
<td style="text-align: left;">0.6537</td>
<td style="text-align: left;">1.2223</td>
<td style="text-align: left;">2.0621</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">2.6458</td>
<td style="text-align: left;">3.4408</td>
<td style="text-align: left;">5.2377</td>
<td style="text-align: left;">5.5649</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.0444</td>
<td style="text-align: left;">-2.032</td>
<td style="text-align: left;">-1.9659</td>
<td style="text-align: left;">-1.9086</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">1.062</td>
<td style="text-align: left;">1.0792</td>
<td style="text-align: left;">1.1857</td>
<td style="text-align: left;">1.351</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.0488</td>
<td style="text-align: left;">-2.0336</td>
<td style="text-align: left;">-1.9981</td>
<td style="text-align: left;">-1.9841</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-4.4101</td>
<td style="text-align: left;">-4.3535</td>
<td style="text-align: left;">-4.2863</td>
<td style="text-align: left;">-4.2809</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">0.3744</td>
<td style="text-align: left;">0.4744</td>
<td style="text-align: left;">0.9332</td>
<td style="text-align: left;">1.6365</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">1.7239</td>
<td style="text-align: left;">2.2197</td>
<td style="text-align: left;">3.392</td>
<td style="text-align: left;">3.5796</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.1796</td>
<td style="text-align: left;">0.1796</td>
<td style="text-align: left;">0.1796</td>
<td style="text-align: left;">0.1796</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
<td style="text-align: left;">-2.3605</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.7125</td>
<td style="text-align: left;">-2.7125</td>
<td style="text-align: left;">-2.7125</td>
<td style="text-align: left;">-2.7125</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.0084</td>
<td style="text-align: left;">-2.0084</td>
<td style="text-align: left;">-2.0084</td>
<td style="text-align: left;">-2.0084</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-2.3231</td>
<td style="text-align: left;">-2.3096</td>
<td style="text-align: left;">-2.2889</td>
<td style="text-align: left;">-2.2869</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.1677</td>
<td style="text-align: left;">0.1685</td>
<td style="text-align: left;">0.1716</td>
<td style="text-align: left;">0.1727</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-2.3222</td>
<td style="text-align: left;">-2.3077</td>
<td style="text-align: left;">-2.2836</td>
<td style="text-align: left;">-2.2811</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.6642</td>
<td style="text-align: left;">-2.6509</td>
<td style="text-align: left;">-2.6369</td>
<td style="text-align: left;">-2.6352</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.9873</td>
<td style="text-align: left;">-1.9803</td>
<td style="text-align: left;">-1.9688</td>
<td style="text-align: left;">-1.9664</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.368</td>
<td style="text-align: left;">0.4056</td>
<td style="text-align: left;">4.4864</td>
<td style="text-align: left;">17.0341</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">1.4497</td>
<td style="text-align: left;">1.7607</td>
<td style="text-align: left;">216.052</td>
<td style="text-align: left;">1042.1225</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.1434</td>
<td style="text-align: left;">0.1446</td>
<td style="text-align: left;">0.1514</td>
<td style="text-align: left;">0.1538</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0297</td>
<td style="text-align: left;">0.0328</td>
<td style="text-align: left;">0.0441</td>
<td style="text-align: left;">0.0458</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">1.7372</td>
<td style="text-align: left;">1.9226</td>
<td style="text-align: left;">3.3952</td>
<td style="text-align: left;">7.8628</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.2586</td>
<td style="text-align: left;">0.2736</td>
<td style="text-align: left;">0.3859</td>
<td style="text-align: left;">0.7443</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.6003</td>
<td style="text-align: left;">0.7204</td>
<td style="text-align: left;">1.9481</td>
<td style="text-align: left;">6.1261</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.1288</td>
<td style="text-align: left;">0.1307</td>
<td style="text-align: left;">0.1357</td>
<td style="text-align: left;">0.1372</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0123</td>
<td style="text-align: left;">0.0128</td>
<td style="text-align: left;">0.0139</td>
<td style="text-align: left;">0.014</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">1.4651</td>
<td style="text-align: left;">1.6043</td>
<td style="text-align: left;">2.5705</td>
<td style="text-align: left;">5.1572</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.0994</td>
<td style="text-align: left;">0.1008</td>
<td style="text-align: left;">0.1028</td>
<td style="text-align: left;">0.103</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.017</td>
<td style="text-align: left;">0.0171</td>
<td style="text-align: left;">0.0174</td>
<td style="text-align: left;">0.0175</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.098</td>
<td style="text-align: left;">0.0995</td>
<td style="text-align: left;">0.1019</td>
<td style="text-align: left;">0.1022</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0695</td>
<td style="text-align: left;">0.0706</td>
<td style="text-align: left;">0.0717</td>
<td style="text-align: left;">0.0719</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1369</td>
<td style="text-align: left;">0.138</td>
<td style="text-align: left;">0.1397</td>
<td style="text-align: left;">0.1399</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.5"><h3 data-number="7.5" id="scenario-5---heterogeneous-data-medium-1">
<span class="header-section-number">7.5</span> <strong>Scenario 5 - Heterogeneous Data (Medium)</strong>
<a class="anchor" aria-label="anchor" href="#scenario-5---heterogeneous-data-medium-1"></a>
</h3>
<p>Scenario 5 describes a binary endpoint for a medium heterogeneous scenario between the historical data, moderate noise at a 5% tau, moderate censoring at 5%, all events observed at a 90%power and no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen5"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701628373</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen5        24 336.2761 Scen5
2_g1 Study#2    1  g1 200     Scen5        35 328.5856 Scen5
3_g1 Study#3    1  g1 200     Scen5        26 319.0432 Scen5
4_g1 Study#4    1  g1 200     Scen5        36 319.4839 Scen5
5_g1 Study#5    1  g1 200     Scen5        39 282.5063 Scen5
6_g1 Study#6    0  g1 200     Scen5        25 289.3660 Scen5
1_g2 Study#1    1  g2 200     Scen5        68 295.3881 Scen5
2_g2 Study#2    1  g2 200     Scen5        55 310.0651 Scen5
3_g2 Study#3    1  g2 200     Scen5        63 290.2667 Scen5
4_g2 Study#4    1  g2 200     Scen5        54 288.7203 Scen5
5_g2 Study#5    1  g2 200     Scen5        52 283.8704 Scen5
6_g2 Study#6    0  g2 200     Scen5        66 263.6880 Scen5</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                   csv group                  analysis
Heterogeneity Data (Medium) Scen05.csv    g1 Exposure-adjusted AE rate
                            saf_topic       seed pool        tau heterog  ESS
Heterogeneity Data (Medium)    Scen05 1701628373 TRUE HalfNormal   Large elir
                            rob_weight rob_mean nta_event nta_time
Heterogeneity Data (Medium)        0.2   0.0865        25      289</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.2707</td>
<td style="text-align: left;">-2.268</td>
<td style="text-align: left;">-2.2415</td>
<td style="text-align: left;">-2.207</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.3111</td>
<td style="text-align: left;">0.3182</td>
<td style="text-align: left;">0.3572</td>
<td style="text-align: left;">0.4687</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.2833</td>
<td style="text-align: left;">-2.2788</td>
<td style="text-align: left;">-2.2595</td>
<td style="text-align: left;">-2.2539</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.98</td>
<td style="text-align: left;">-2.9658</td>
<td style="text-align: left;">-2.8585</td>
<td style="text-align: left;">-2.8466</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.606</td>
<td style="text-align: left;">-1.5813</td>
<td style="text-align: left;">-1.4337</td>
<td style="text-align: left;">-0.9871</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">13.6623</td>
<td style="text-align: left;">14.9005</td>
<td style="text-align: left;">19.2428</td>
<td style="text-align: left;">20.0071</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.306</td>
<td style="text-align: left;">-2.3039</td>
<td style="text-align: left;">-2.2827</td>
<td style="text-align: left;">-2.2552</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.5315</td>
<td style="text-align: left;">0.5351</td>
<td style="text-align: left;">0.5551</td>
<td style="text-align: left;">0.6205</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.2887</td>
<td style="text-align: left;">-2.2867</td>
<td style="text-align: left;">-2.2689</td>
<td style="text-align: left;">-2.2656</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.6636</td>
<td style="text-align: left;">-3.6553</td>
<td style="text-align: left;">-3.608</td>
<td style="text-align: left;">-3.6001</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.2033</td>
<td style="text-align: left;">-1.1885</td>
<td style="text-align: left;">-1.0758</td>
<td style="text-align: left;">-0.7472</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">9.6863</td>
<td style="text-align: left;">10.5677</td>
<td style="text-align: left;">13.8846</td>
<td style="text-align: left;">14.4188</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-2.4476</td>
<td style="text-align: left;">-2.4476</td>
<td style="text-align: left;">-2.4476</td>
<td style="text-align: left;">-2.4476</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.2</td>
<td style="text-align: left;">0.2</td>
<td style="text-align: left;">0.2</td>
<td style="text-align: left;">0.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-2.4476</td>
<td style="text-align: left;">-2.4476</td>
<td style="text-align: left;">-2.4476</td>
<td style="text-align: left;">-2.4476</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.8395</td>
<td style="text-align: left;">-2.8395</td>
<td style="text-align: left;">-2.8395</td>
<td style="text-align: left;">-2.8395</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.0556</td>
<td style="text-align: left;">-2.0556</td>
<td style="text-align: left;">-2.0556</td>
<td style="text-align: left;">-2.0556</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-2.3794</td>
<td style="text-align: left;">-2.3773</td>
<td style="text-align: left;">-2.3665</td>
<td style="text-align: left;">-2.3651</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.1505</td>
<td style="text-align: left;">0.1516</td>
<td style="text-align: left;">0.1588</td>
<td style="text-align: left;">0.1598</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-2.3741</td>
<td style="text-align: left;">-2.371</td>
<td style="text-align: left;">-2.3553</td>
<td style="text-align: left;">-2.3548</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.7184</td>
<td style="text-align: left;">-2.7147</td>
<td style="text-align: left;">-2.6946</td>
<td style="text-align: left;">-2.6883</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.0944</td>
<td style="text-align: left;">-2.0928</td>
<td style="text-align: left;">-2.0782</td>
<td style="text-align: left;">-2.0769</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.1088</td>
<td style="text-align: left;">0.1097</td>
<td style="text-align: left;">0.1146</td>
<td style="text-align: left;">0.1396</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0386</td>
<td style="text-align: left;">0.0421</td>
<td style="text-align: left;">0.1495</td>
<td style="text-align: left;">0.3556</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.1019</td>
<td style="text-align: left;">0.1024</td>
<td style="text-align: left;">0.1044</td>
<td style="text-align: left;">0.105</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0508</td>
<td style="text-align: left;">0.0515</td>
<td style="text-align: left;">0.0574</td>
<td style="text-align: left;">0.058</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.2007</td>
<td style="text-align: left;">0.2057</td>
<td style="text-align: left;">0.2384</td>
<td style="text-align: left;">0.3726</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.1157</td>
<td style="text-align: left;">0.116</td>
<td style="text-align: left;">0.1201</td>
<td style="text-align: left;">0.1378</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.0878</td>
<td style="text-align: left;">0.0889</td>
<td style="text-align: left;">0.1098</td>
<td style="text-align: left;">0.2624</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.1013</td>
<td style="text-align: left;">0.1016</td>
<td style="text-align: left;">0.1035</td>
<td style="text-align: left;">0.1038</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0252</td>
<td style="text-align: left;">0.0257</td>
<td style="text-align: left;">0.0274</td>
<td style="text-align: left;">0.0277</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.2984</td>
<td style="text-align: left;">0.3039</td>
<td style="text-align: left;">0.3425</td>
<td style="text-align: left;">0.4759</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.0937</td>
<td style="text-align: left;">0.0939</td>
<td style="text-align: left;">0.0949</td>
<td style="text-align: left;">0.095</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.014</td>
<td style="text-align: left;">0.0141</td>
<td style="text-align: left;">0.0148</td>
<td style="text-align: left;">0.0149</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.093</td>
<td style="text-align: left;">0.0934</td>
<td style="text-align: left;">0.0949</td>
<td style="text-align: left;">0.095</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0659</td>
<td style="text-align: left;">0.0662</td>
<td style="text-align: left;">0.0676</td>
<td style="text-align: left;">0.0679</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.123</td>
<td style="text-align: left;">0.1233</td>
<td style="text-align: left;">0.1252</td>
<td style="text-align: left;">0.1255</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.6"><h3 data-number="7.6" id="scenario-6---high-dropout-1">
<span class="header-section-number">7.6</span> <strong>Scenario 6 - High Dropout</strong>
<a class="anchor" aria-label="anchor" href="#scenario-6---high-dropout-1"></a>
</h3>
<p>Scenario 6 describes a binary endpoint scenario with huge dropout within the current trial, some noise at a 2% tau, some event being observed at a 90% power, homogeneous data and no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.3</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">95</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen6"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701628373</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen6        26 291.6589 Scen6
2_g1 Study#2    1  g1 200     Scen6        27 225.3005 Scen6
3_g1 Study#3    1  g1 200     Scen6        28 292.3146 Scen6
4_g1 Study#4    1  g1 200     Scen6        28 268.4692 Scen6
5_g1 Study#5    1  g1 200     Scen6        40 212.6690 Scen6
6_g1 Study#6    0  g1 200     Scen6        24 198.0645 Scen6
1_g2 Study#1    1  g2 200     Scen6        56 226.4060 Scen6
2_g2 Study#2    1  g2 200     Scen6        52 203.6631 Scen6
3_g2 Study#3    1  g2 200     Scen6        55 255.6490 Scen6
4_g2 Study#4    1  g2 200     Scen6        47 221.9167 Scen6
5_g2 Study#5    1  g2 200     Scen6        45 238.6339 Scen6
6_g2 Study#6    0  g2 200     Scen6        54 219.5831 Scen6</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                    csv group                  analysis saf_topic       seed
High Dropout Scen06.csv    g1 Exposure-adjusted AE rate    Scen06 1701628373
             pool        tau  heterog  ESS rob_weight rob_mean nta_event
High Dropout TRUE HalfNormal Moderate elir       0.14   0.1204        31
             nta_time
High Dropout      257</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.1461</td>
<td style="text-align: left;">-2.144</td>
<td style="text-align: left;">-2.1296</td>
<td style="text-align: left;">-2.1263</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.1854</td>
<td style="text-align: left;">0.1896</td>
<td style="text-align: left;">0.2043</td>
<td style="text-align: left;">0.2071</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.1492</td>
<td style="text-align: left;">-2.146</td>
<td style="text-align: left;">-2.1321</td>
<td style="text-align: left;">-2.13</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.5773</td>
<td style="text-align: left;">-2.5648</td>
<td style="text-align: left;">-2.5086</td>
<td style="text-align: left;">-2.5023</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.7599</td>
<td style="text-align: left;">-1.75</td>
<td style="text-align: left;">-1.6922</td>
<td style="text-align: left;">-1.6713</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">29.2203</td>
<td style="text-align: left;">30.1353</td>
<td style="text-align: left;">35.755</td>
<td style="text-align: left;">37.0992</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.142</td>
<td style="text-align: left;">-2.1402</td>
<td style="text-align: left;">-2.1279</td>
<td style="text-align: left;">-2.125</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.4118</td>
<td style="text-align: left;">0.4135</td>
<td style="text-align: left;">0.4194</td>
<td style="text-align: left;">0.4206</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.147</td>
<td style="text-align: left;">-2.1452</td>
<td style="text-align: left;">-2.1321</td>
<td style="text-align: left;">-2.13</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.0557</td>
<td style="text-align: left;">-3.0527</td>
<td style="text-align: left;">-3.0382</td>
<td style="text-align: left;">-3.038</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.196</td>
<td style="text-align: left;">-1.1959</td>
<td style="text-align: left;">-1.184</td>
<td style="text-align: left;">-1.1631</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">22.7554</td>
<td style="text-align: left;">23.4656</td>
<td style="text-align: left;">27.9901</td>
<td style="text-align: left;">29.0979</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-2.1151</td>
<td style="text-align: left;">-2.1151</td>
<td style="text-align: left;">-2.1151</td>
<td style="text-align: left;">-2.1151</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.1796</td>
<td style="text-align: left;">0.1796</td>
<td style="text-align: left;">0.1796</td>
<td style="text-align: left;">0.1796</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-2.1151</td>
<td style="text-align: left;">-2.1151</td>
<td style="text-align: left;">-2.1151</td>
<td style="text-align: left;">-2.1151</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.4671</td>
<td style="text-align: left;">-2.4671</td>
<td style="text-align: left;">-2.4671</td>
<td style="text-align: left;">-2.4671</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.7631</td>
<td style="text-align: left;">-1.7631</td>
<td style="text-align: left;">-1.7631</td>
<td style="text-align: left;">-1.7631</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-2.134</td>
<td style="text-align: left;">-2.1324</td>
<td style="text-align: left;">-2.1249</td>
<td style="text-align: left;">-2.1241</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.1184</td>
<td style="text-align: left;">0.1195</td>
<td style="text-align: left;">0.1244</td>
<td style="text-align: left;">0.1252</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-2.1366</td>
<td style="text-align: left;">-2.1343</td>
<td style="text-align: left;">-2.1254</td>
<td style="text-align: left;">-2.1231</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.3769</td>
<td style="text-align: left;">-2.3743</td>
<td style="text-align: left;">-2.3614</td>
<td style="text-align: left;">-2.3602</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.8912</td>
<td style="text-align: left;">-1.889</td>
<td style="text-align: left;">-1.8737</td>
<td style="text-align: left;">-1.8709</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.1192</td>
<td style="text-align: left;">0.1195</td>
<td style="text-align: left;">0.1213</td>
<td style="text-align: left;">0.1217</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0227</td>
<td style="text-align: left;">0.0235</td>
<td style="text-align: left;">0.0263</td>
<td style="text-align: left;">0.0276</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.1166</td>
<td style="text-align: left;">0.1169</td>
<td style="text-align: left;">0.1186</td>
<td style="text-align: left;">0.1188</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.076</td>
<td style="text-align: left;">0.0769</td>
<td style="text-align: left;">0.0814</td>
<td style="text-align: left;">0.0819</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1721</td>
<td style="text-align: left;">0.1738</td>
<td style="text-align: left;">0.1841</td>
<td style="text-align: left;">0.188</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.13</td>
<td style="text-align: left;">0.1303</td>
<td style="text-align: left;">0.1324</td>
<td style="text-align: left;">0.1328</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.092</td>
<td style="text-align: left;">0.0965</td>
<td style="text-align: left;">0.116</td>
<td style="text-align: left;">0.1259</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.1168</td>
<td style="text-align: left;">0.117</td>
<td style="text-align: left;">0.1186</td>
<td style="text-align: left;">0.1189</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0458</td>
<td style="text-align: left;">0.0463</td>
<td style="text-align: left;">0.0493</td>
<td style="text-align: left;">0.0497</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.2901</td>
<td style="text-align: left;">0.2938</td>
<td style="text-align: left;">0.3129</td>
<td style="text-align: left;">0.3163</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.1192</td>
<td style="text-align: left;">0.1194</td>
<td style="text-align: left;">0.1204</td>
<td style="text-align: left;">0.1205</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0143</td>
<td style="text-align: left;">0.0144</td>
<td style="text-align: left;">0.0151</td>
<td style="text-align: left;">0.0152</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.1181</td>
<td style="text-align: left;">0.1183</td>
<td style="text-align: left;">0.1194</td>
<td style="text-align: left;">0.1197</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0928</td>
<td style="text-align: left;">0.0931</td>
<td style="text-align: left;">0.0943</td>
<td style="text-align: left;">0.0946</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1507</td>
<td style="text-align: left;">0.1511</td>
<td style="text-align: left;">0.1536</td>
<td style="text-align: left;">0.1542</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.7"><h3 data-number="7.7" id="scenario-7---high-heterogeneity-1">
<span class="header-section-number">7.7</span> <strong>Scenario 7 - High Heterogeneity</strong>
<a class="anchor" aria-label="anchor" href="#scenario-7---high-heterogeneity-1"></a>
</h3>
<p>Scenario 7 describes a binary endpoint scenario with high heterogeneity between historical data, moderate censoring in current trial, moderate noise at a 2% tau, all events observed at a 90% power, with no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen7"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701416989</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen7        32 222.47360 Scen7
2_g1 Study#2    1  g1 200     Scen7        27 270.34094 Scen7
3_g1 Study#3    1  g1 200     Scen7        32 271.08747 Scen7
4_g1 Study#4    1  g1 200     Scen7        36 116.93497 Scen7
5_g1 Study#5    1  g1 200     Scen7        29 111.37228 Scen7
6_g1 Study#6    0  g1 200     Scen7        23 163.68689 Scen7
1_g2 Study#1    1  g2 200     Scen7        59 189.49417 Scen7
2_g2 Study#2    1  g2 200     Scen7        62 284.62991 Scen7
3_g2 Study#3    1  g2 200     Scen7        58 210.80011 Scen7
4_g2 Study#4    1  g2 200     Scen7        56  77.53109 Scen7
5_g2 Study#5    1  g2 200     Scen7        62 118.22857 Scen7
6_g2 Study#6    0  g2 200     Scen7        68  97.68813 Scen7</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                         csv group                  analysis saf_topic
High Heterogenity Scen07.csv    g1 Exposure-adjusted AE rate    Scen07
                        seed pool        tau    heterog  ESS rob_weight
High Heterogenity 1701416989 TRUE HalfNormal Very Large elir        0.2
                  rob_mean nta_event nta_time
High Heterogenity     0.19        35      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-1.6779</td>
<td style="text-align: left;">-1.6708</td>
<td style="text-align: left;">-1.614</td>
<td style="text-align: left;">-1.6052</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.7138</td>
<td style="text-align: left;">0.7264</td>
<td style="text-align: left;">0.7997</td>
<td style="text-align: left;">0.808</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-1.7163</td>
<td style="text-align: left;">-1.7099</td>
<td style="text-align: left;">-1.6537</td>
<td style="text-align: left;">-1.6422</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.2246</td>
<td style="text-align: left;">-3.1904</td>
<td style="text-align: left;">-2.976</td>
<td style="text-align: left;">-2.9361</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-0.1432</td>
<td style="text-align: left;">-0.1124</td>
<td style="text-align: left;">0.1745</td>
<td style="text-align: left;">0.216</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">2.0397</td>
<td style="text-align: left;">2.1646</td>
<td style="text-align: left;">2.5676</td>
<td style="text-align: left;">584.7937</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-1.6744</td>
<td style="text-align: left;">-1.6688</td>
<td style="text-align: left;">-1.6233</td>
<td style="text-align: left;">-1.6163</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.7795</td>
<td style="text-align: left;">0.7887</td>
<td style="text-align: left;">0.8436</td>
<td style="text-align: left;">0.85</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-1.7097</td>
<td style="text-align: left;">-1.6983</td>
<td style="text-align: left;">-1.6533</td>
<td style="text-align: left;">-1.6456</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.3582</td>
<td style="text-align: left;">-3.333</td>
<td style="text-align: left;">-3.1921</td>
<td style="text-align: left;">-3.1756</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">0.0167</td>
<td style="text-align: left;">0.0461</td>
<td style="text-align: left;">0.2778</td>
<td style="text-align: left;">0.3313</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">1.7138</td>
<td style="text-align: left;">1.7954</td>
<td style="text-align: left;">2.0715</td>
<td style="text-align: left;">467.8661</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-1.743</td>
<td style="text-align: left;">-1.743</td>
<td style="text-align: left;">-1.743</td>
<td style="text-align: left;">-1.743</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.169</td>
<td style="text-align: left;">0.169</td>
<td style="text-align: left;">0.169</td>
<td style="text-align: left;">0.169</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-1.743</td>
<td style="text-align: left;">-1.743</td>
<td style="text-align: left;">-1.743</td>
<td style="text-align: left;">-1.743</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.0743</td>
<td style="text-align: left;">-2.0743</td>
<td style="text-align: left;">-2.0743</td>
<td style="text-align: left;">-2.0743</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.4117</td>
<td style="text-align: left;">-1.4117</td>
<td style="text-align: left;">-1.4117</td>
<td style="text-align: left;">-1.4117</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-1.7455</td>
<td style="text-align: left;">-1.7446</td>
<td style="text-align: left;">-1.7359</td>
<td style="text-align: left;">-1.7352</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.1588</td>
<td style="text-align: left;">0.1597</td>
<td style="text-align: left;">0.163</td>
<td style="text-align: left;">0.1633</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-1.746</td>
<td style="text-align: left;">-1.7451</td>
<td style="text-align: left;">-1.7357</td>
<td style="text-align: left;">-1.7349</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.0619</td>
<td style="text-align: left;">-2.0605</td>
<td style="text-align: left;">-2.0526</td>
<td style="text-align: left;">-2.0507</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.4306</td>
<td style="text-align: left;">-1.4292</td>
<td style="text-align: left;">-1.4188</td>
<td style="text-align: left;">-1.4179</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.253</td>
<td style="text-align: left;">0.2624</td>
<td style="text-align: left;">0.621</td>
<td style="text-align: left;">5.7172</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.3265</td>
<td style="text-align: left;">0.3684</td>
<td style="text-align: left;">19.763</td>
<td style="text-align: left;">344.1807</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.1797</td>
<td style="text-align: left;">0.1809</td>
<td style="text-align: left;">0.1913</td>
<td style="text-align: left;">0.1936</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0398</td>
<td style="text-align: left;">0.0412</td>
<td style="text-align: left;">0.051</td>
<td style="text-align: left;">0.0531</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.8666</td>
<td style="text-align: left;">0.8937</td>
<td style="text-align: left;">1.1906</td>
<td style="text-align: left;">1.2411</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.2651</td>
<td style="text-align: left;">0.2702</td>
<td style="text-align: left;">0.354</td>
<td style="text-align: left;">5.071</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.3223</td>
<td style="text-align: left;">0.3478</td>
<td style="text-align: left;">5.9</td>
<td style="text-align: left;">322.8276</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.1808</td>
<td style="text-align: left;">0.1829</td>
<td style="text-align: left;">0.1918</td>
<td style="text-align: left;">0.1934</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0345</td>
<td style="text-align: left;">0.0357</td>
<td style="text-align: left;">0.0412</td>
<td style="text-align: left;">0.042</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">1.009</td>
<td style="text-align: left;">1.0454</td>
<td style="text-align: left;">1.3185</td>
<td style="text-align: left;">1.378</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.1767</td>
<td style="text-align: left;">0.177</td>
<td style="text-align: left;">0.1786</td>
<td style="text-align: left;">0.1788</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0283</td>
<td style="text-align: left;">0.0285</td>
<td style="text-align: left;">0.0293</td>
<td style="text-align: left;">0.0294</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.1744</td>
<td style="text-align: left;">0.1747</td>
<td style="text-align: left;">0.1763</td>
<td style="text-align: left;">0.1766</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.127</td>
<td style="text-align: left;">0.1272</td>
<td style="text-align: left;">0.1286</td>
<td style="text-align: left;">0.1288</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.239</td>
<td style="text-align: left;">0.2393</td>
<td style="text-align: left;">0.2423</td>
<td style="text-align: left;">0.2429</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.8"><h3 data-number="7.8" id="scenario-8---bad-scenario-1">
<span class="header-section-number">7.8</span> <strong>Scenario 8 - Bad Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-8---bad-scenario-1"></a>
</h3>
<p>Scenario 8 describes a binary endpoint for a bad scenario with huge censoring in the current trial, huge noise, little events observed in the current trial, heterogeneous historical data and no planned prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.3</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen8"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701652217</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 200     Scen8        22 297.7669 Scen8
2_g1 Study#2    1  g1 200     Scen8        31 298.1832 Scen8
3_g1 Study#3    1  g1 200     Scen8        21 307.9312 Scen8
4_g1 Study#4    1  g1 200     Scen8        21 379.2739 Scen8
5_g1 Study#5    1  g1 200     Scen8        28 405.2051 Scen8
6_g1 Study#6    0  g1 200     Scen8        30 368.8481 Scen8
1_g2 Study#1    1  g2 200     Scen8        53 234.0924 Scen8
2_g2 Study#2    1  g2 200     Scen8        45 226.9392 Scen8
3_g2 Study#3    1  g2 200     Scen8        55 211.8717 Scen8
4_g2 Study#4    1  g2 200     Scen8        56 348.7668 Scen8
5_g2 Study#5    1  g2 200     Scen8        46 375.9676 Scen8
6_g2 Study#6    0  g2 200     Scen8        45 284.3348 Scen8</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                    csv group                  analysis saf_topic       seed
Bad Scenario Scen08.csv    g1 Exposure-adjusted AE rate    Scen08 1701652217
             pool        tau heterog  ESS rob_weight rob_mean nta_event
Bad Scenario TRUE HalfNormal   Large elir        0.2   0.0741        35
             nta_time
Bad Scenario      338</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.5882</td>
<td style="text-align: left;">-2.5848</td>
<td style="text-align: left;">-2.5618</td>
<td style="text-align: left;">-2.5474</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.2782</td>
<td style="text-align: left;">0.2853</td>
<td style="text-align: left;">0.3269</td>
<td style="text-align: left;">0.3627</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.5986</td>
<td style="text-align: left;">-2.5965</td>
<td style="text-align: left;">-2.5805</td>
<td style="text-align: left;">-2.5768</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.225</td>
<td style="text-align: left;">-3.2126</td>
<td style="text-align: left;">-3.107</td>
<td style="text-align: left;">-3.0898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.9973</td>
<td style="text-align: left;">-1.9608</td>
<td style="text-align: left;">-1.8093</td>
<td style="text-align: left;">-1.7091</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">19.158</td>
<td style="text-align: left;">20.1334</td>
<td style="text-align: left;">24.9054</td>
<td style="text-align: left;">25.7294</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.591</td>
<td style="text-align: left;">-2.5883</td>
<td style="text-align: left;">-2.5699</td>
<td style="text-align: left;">-2.5584</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.5118</td>
<td style="text-align: left;">0.515</td>
<td style="text-align: left;">0.5345</td>
<td style="text-align: left;">0.5529</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.5978</td>
<td style="text-align: left;">-2.5961</td>
<td style="text-align: left;">-2.5811</td>
<td style="text-align: left;">-2.5772</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.8309</td>
<td style="text-align: left;">-3.8149</td>
<td style="text-align: left;">-3.7668</td>
<td style="text-align: left;">-3.7633</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.4247</td>
<td style="text-align: left;">-1.4094</td>
<td style="text-align: left;">-1.2994</td>
<td style="text-align: left;">-1.1812</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">13.6029</td>
<td style="text-align: left;">14.3634</td>
<td style="text-align: left;">17.9266</td>
<td style="text-align: left;">18.5528</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-2.2677</td>
<td style="text-align: left;">-2.2677</td>
<td style="text-align: left;">-2.2677</td>
<td style="text-align: left;">-2.2677</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.169</td>
<td style="text-align: left;">0.169</td>
<td style="text-align: left;">0.169</td>
<td style="text-align: left;">0.169</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-2.2677</td>
<td style="text-align: left;">-2.2677</td>
<td style="text-align: left;">-2.2677</td>
<td style="text-align: left;">-2.2677</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.599</td>
<td style="text-align: left;">-2.599</td>
<td style="text-align: left;">-2.599</td>
<td style="text-align: left;">-2.599</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.9364</td>
<td style="text-align: left;">-1.9364</td>
<td style="text-align: left;">-1.9364</td>
<td style="text-align: left;">-1.9364</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-2.3916</td>
<td style="text-align: left;">-2.3881</td>
<td style="text-align: left;">-2.3725</td>
<td style="text-align: left;">-2.3697</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.1496</td>
<td style="text-align: left;">0.1519</td>
<td style="text-align: left;">0.1619</td>
<td style="text-align: left;">0.1627</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-2.4064</td>
<td style="text-align: left;">-2.4024</td>
<td style="text-align: left;">-2.3846</td>
<td style="text-align: left;">-2.3821</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.6586</td>
<td style="text-align: left;">-2.6579</td>
<td style="text-align: left;">-2.6503</td>
<td style="text-align: left;">-2.649</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.0551</td>
<td style="text-align: left;">-2.049</td>
<td style="text-align: left;">-2.034</td>
<td style="text-align: left;">-2.0304</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.0785</td>
<td style="text-align: left;">0.0789</td>
<td style="text-align: left;">0.0831</td>
<td style="text-align: left;">0.0915</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0258</td>
<td style="text-align: left;">0.0273</td>
<td style="text-align: left;">0.1137</td>
<td style="text-align: left;">0.3621</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.0744</td>
<td style="text-align: left;">0.0745</td>
<td style="text-align: left;">0.0757</td>
<td style="text-align: left;">0.076</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0398</td>
<td style="text-align: left;">0.0403</td>
<td style="text-align: left;">0.0447</td>
<td style="text-align: left;">0.0455</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1357</td>
<td style="text-align: left;">0.1407</td>
<td style="text-align: left;">0.1638</td>
<td style="text-align: left;">0.181</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.0869</td>
<td style="text-align: left;">0.0874</td>
<td style="text-align: left;">0.0904</td>
<td style="text-align: left;">0.0972</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.0727</td>
<td style="text-align: left;">0.0742</td>
<td style="text-align: left;">0.0931</td>
<td style="text-align: left;">0.3388</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.0744</td>
<td style="text-align: left;">0.0745</td>
<td style="text-align: left;">0.0757</td>
<td style="text-align: left;">0.0761</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0216</td>
<td style="text-align: left;">0.0218</td>
<td style="text-align: left;">0.0234</td>
<td style="text-align: left;">0.0237</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.2373</td>
<td style="text-align: left;">0.2428</td>
<td style="text-align: left;">0.2759</td>
<td style="text-align: left;">0.306</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.0925</td>
<td style="text-align: left;">0.0929</td>
<td style="text-align: left;">0.0945</td>
<td style="text-align: left;">0.0947</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0145</td>
<td style="text-align: left;">0.0148</td>
<td style="text-align: left;">0.0158</td>
<td style="text-align: left;">0.0159</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.0901</td>
<td style="text-align: left;">0.0905</td>
<td style="text-align: left;">0.0921</td>
<td style="text-align: left;">0.0924</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0699</td>
<td style="text-align: left;">0.0701</td>
<td style="text-align: left;">0.0707</td>
<td style="text-align: left;">0.0708</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.128</td>
<td style="text-align: left;">0.1287</td>
<td style="text-align: left;">0.1309</td>
<td style="text-align: left;">0.1315</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.9"><h3 data-number="7.9" id="scenario-9---good-scenario-1">
<span class="header-section-number">7.9</span> <strong>Scenario 9 - Good Scenario</strong>
<a class="anchor" aria-label="anchor" href="#scenario-9---good-scenario-1"></a>
</h3>
<p>Scenario 9 describes a binary endpoint for a good scenario with low censoring in the current trial, small noise, majority of the events being observed and homogeneous historical data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">300</span>, g2 <span class="op">=</span> <span class="fl">300</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">0.999</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen9"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701655293</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE  TOT_EXP TREAT
1_g1 Study#1    1  g1 300     Scen9       260 2838.989 Scen9
2_g1 Study#2    1  g1 300     Scen9       259 2624.533 Scen9
3_g1 Study#3    1  g1 300     Scen9       251 2933.272 Scen9
4_g1 Study#4    1  g1 300     Scen9       251 2984.729 Scen9
5_g1 Study#5    1  g1 300     Scen9       259 2667.259 Scen9
6_g1 Study#6    1  g1 300     Scen9       265 2774.955 Scen9
7_g1 Study#7    1  g1 300     Scen9       255 2665.750 Scen9
8_g1 Study#8    0  g1 300     Scen9       261 2691.265 Scen9
1_g2 Study#1    1  g2 300     Scen9       292 1550.852 Scen9
2_g2 Study#2    1  g2 300     Scen9       295 1646.227 Scen9
3_g2 Study#3    1  g2 300     Scen9       297 1360.433 Scen9
4_g2 Study#4    1  g2 300     Scen9       289 1676.768 Scen9
5_g2 Study#5    1  g2 300     Scen9       294 1678.219 Scen9
6_g2 Study#6    1  g2 300     Scen9       295 1628.496 Scen9
7_g2 Study#7    1  g2 300     Scen9       295 1628.708 Scen9
8_g2 Study#8    0  g2 300     Scen9       295 1486.654 Scen9</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                     csv group                  analysis saf_topic       seed
Good Scenario Scen09.csv    g1 Exposure-adjusted AE rate    Scen09 1701655293
              pool        tau heterog  ESS rob_weight rob_mean nta_event
Good Scenario TRUE HalfNormal   Small elir       0.05   0.0926        92
              nta_time
Good Scenario     1000</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.3832</td>
<td style="text-align: left;">-2.3824</td>
<td style="text-align: left;">-2.3785</td>
<td style="text-align: left;">-2.3778</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0472</td>
<td style="text-align: left;">0.0483</td>
<td style="text-align: left;">0.0532</td>
<td style="text-align: left;">0.0539</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.3835</td>
<td style="text-align: left;">-2.3823</td>
<td style="text-align: left;">-2.3789</td>
<td style="text-align: left;">-2.3781</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.4957</td>
<td style="text-align: left;">-2.4926</td>
<td style="text-align: left;">-2.4758</td>
<td style="text-align: left;">-2.4715</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.2862</td>
<td style="text-align: left;">-2.2824</td>
<td style="text-align: left;">-2.2658</td>
<td style="text-align: left;">-2.2626</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">501.9947</td>
<td style="text-align: left;">513.4791</td>
<td style="text-align: left;">607.3843</td>
<td style="text-align: left;">628.4373</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.383</td>
<td style="text-align: left;">-2.3822</td>
<td style="text-align: left;">-2.3785</td>
<td style="text-align: left;">-2.3779</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.2283</td>
<td style="text-align: left;">0.2285</td>
<td style="text-align: left;">0.2295</td>
<td style="text-align: left;">0.2297</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.383</td>
<td style="text-align: left;">-2.3822</td>
<td style="text-align: left;">-2.379</td>
<td style="text-align: left;">-2.3784</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.5845</td>
<td style="text-align: left;">-2.576</td>
<td style="text-align: left;">-2.54</td>
<td style="text-align: left;">-2.533</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.2249</td>
<td style="text-align: left;">-2.2171</td>
<td style="text-align: left;">-2.1824</td>
<td style="text-align: left;">-2.1742</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">469.9987</td>
<td style="text-align: left;">480.6944</td>
<td style="text-align: left;">569.6637</td>
<td style="text-align: left;">589.5599</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-2.386</td>
<td style="text-align: left;">-2.386</td>
<td style="text-align: left;">-2.386</td>
<td style="text-align: left;">-2.386</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.1043</td>
<td style="text-align: left;">0.1043</td>
<td style="text-align: left;">0.1043</td>
<td style="text-align: left;">0.1043</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-2.386</td>
<td style="text-align: left;">-2.386</td>
<td style="text-align: left;">-2.386</td>
<td style="text-align: left;">-2.386</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.5903</td>
<td style="text-align: left;">-2.5903</td>
<td style="text-align: left;">-2.5903</td>
<td style="text-align: left;">-2.5903</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.1816</td>
<td style="text-align: left;">-2.1816</td>
<td style="text-align: left;">-2.1816</td>
<td style="text-align: left;">-2.1816</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-2.3833</td>
<td style="text-align: left;">-2.3829</td>
<td style="text-align: left;">-2.38</td>
<td style="text-align: left;">-2.3795</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0402</td>
<td style="text-align: left;">0.0408</td>
<td style="text-align: left;">0.0431</td>
<td style="text-align: left;">0.0435</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-2.3836</td>
<td style="text-align: left;">-2.3827</td>
<td style="text-align: left;">-2.3799</td>
<td style="text-align: left;">-2.3794</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.4736</td>
<td style="text-align: left;">-2.4723</td>
<td style="text-align: left;">-2.463</td>
<td style="text-align: left;">-2.4606</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.3024</td>
<td style="text-align: left;">-2.3006</td>
<td style="text-align: left;">-2.2909</td>
<td style="text-align: left;">-2.2891</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.0924</td>
<td style="text-align: left;">0.0925</td>
<td style="text-align: left;">0.0928</td>
<td style="text-align: left;">0.0929</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0044</td>
<td style="text-align: left;">0.0045</td>
<td style="text-align: left;">0.005</td>
<td style="text-align: left;">0.005</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.0922</td>
<td style="text-align: left;">0.0923</td>
<td style="text-align: left;">0.0927</td>
<td style="text-align: left;">0.0927</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0824</td>
<td style="text-align: left;">0.0827</td>
<td style="text-align: left;">0.0841</td>
<td style="text-align: left;">0.0845</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1016</td>
<td style="text-align: left;">0.102</td>
<td style="text-align: left;">0.1038</td>
<td style="text-align: left;">0.1041</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.0952</td>
<td style="text-align: left;">0.0953</td>
<td style="text-align: left;">0.096</td>
<td style="text-align: left;">0.0963</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.0403</td>
<td style="text-align: left;">0.0415</td>
<td style="text-align: left;">0.0571</td>
<td style="text-align: left;">0.0852</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.0923</td>
<td style="text-align: left;">0.0923</td>
<td style="text-align: left;">0.0927</td>
<td style="text-align: left;">0.0927</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0751</td>
<td style="text-align: left;">0.0758</td>
<td style="text-align: left;">0.0791</td>
<td style="text-align: left;">0.0794</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.108</td>
<td style="text-align: left;">0.1086</td>
<td style="text-align: left;">0.1131</td>
<td style="text-align: left;">0.1141</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.0923</td>
<td style="text-align: left;">0.0924</td>
<td style="text-align: left;">0.0926</td>
<td style="text-align: left;">0.0927</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0037</td>
<td style="text-align: left;">0.0038</td>
<td style="text-align: left;">0.004</td>
<td style="text-align: left;">0.004</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.0922</td>
<td style="text-align: left;">0.0923</td>
<td style="text-align: left;">0.0926</td>
<td style="text-align: left;">0.0926</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0842</td>
<td style="text-align: left;">0.0844</td>
<td style="text-align: left;">0.0852</td>
<td style="text-align: left;">0.0854</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1</td>
<td style="text-align: left;">0.1002</td>
<td style="text-align: left;">0.1012</td>
<td style="text-align: left;">0.1013</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.10"><h3 data-number="7.10" id="scenario-10---favoured-control-1">
<span class="header-section-number">7.10</span> <strong>Scenario 10 - Favoured Control</strong>
<a class="anchor" aria-label="anchor" href="#scenario-10---favoured-control-1"></a>
</h3>
<p>Scenario 10 describes a binary endpoint for a favored control scenario with no censoring in the current trial, no noise, all events being observed, homogeneous historical data, heavy prior data conflict and the hazard ratio in favor of the control group.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.2</span>, g2 <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="fl">1.2</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen10"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701673095</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in rexp(nPat[i], hz[i]): NAs produced</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE    TOT_EXP  TREAT
1_g1 Study#1    1  g1 200    Scen10        54 234.482445 Scen10
2_g1 Study#2    1  g1 200    Scen10        42 200.954605 Scen10
3_g1 Study#3    1  g1 200    Scen10        59 233.239862 Scen10
4_g1 Study#4    1  g1 200    Scen10        51 204.363002 Scen10
5_g1 Study#5    1  g1 200    Scen10        52 170.728016 Scen10
6_g1 Study#6    0  g1 200    Scen10        93  -6.482995 Scen10
1_g2 Study#1    1  g2 200    Scen10        36 282.421760 Scen10
2_g2 Study#2    1  g2 200    Scen10        46 214.300246 Scen10
3_g2 Study#3    1  g2 200    Scen10        32 318.335395 Scen10
4_g2 Study#4    1  g2 200    Scen10        37 243.939964 Scen10
5_g2 Study#5    1  g2 200    Scen10        39 244.166712 Scen10
6_g2 Study#6    0  g2 200    Scen10        NA         NA Scen10</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                       csv group                  analysis saf_topic       seed
Favored Control Scen10.csv    g1 Exposure-adjusted AE rate    Scen10 1701673095
                pool        tau heterog  ESS rob_weight rob_mean nta_event
Favored Control TRUE HalfNormal   Small elir        0.6   0.2472       150
                nta_time
Favored Control      200</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-1.3978</td>
<td style="text-align: left;">-1.3967</td>
<td style="text-align: left;">-1.3902</td>
<td style="text-align: left;">-1.3891</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0841</td>
<td style="text-align: left;">0.0851</td>
<td style="text-align: left;">0.0912</td>
<td style="text-align: left;">0.0924</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-1.3982</td>
<td style="text-align: left;">-1.3969</td>
<td style="text-align: left;">-1.3893</td>
<td style="text-align: left;">-1.3885</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-1.5838</td>
<td style="text-align: left;">-1.5806</td>
<td style="text-align: left;">-1.5587</td>
<td style="text-align: left;">-1.557</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.2365</td>
<td style="text-align: left;">-1.2299</td>
<td style="text-align: left;">-1.2073</td>
<td style="text-align: left;">-1.1976</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">128.824</td>
<td style="text-align: left;">132.8997</td>
<td style="text-align: left;">151.5567</td>
<td style="text-align: left;">154.4831</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-1.3977</td>
<td style="text-align: left;">-1.3972</td>
<td style="text-align: left;">-1.3946</td>
<td style="text-align: left;">-1.3942</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.7764</td>
<td style="text-align: left;">0.7765</td>
<td style="text-align: left;">0.7767</td>
<td style="text-align: left;">0.7768</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-1.3977</td>
<td style="text-align: left;">-1.3967</td>
<td style="text-align: left;">-1.3908</td>
<td style="text-align: left;">-1.3895</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.1292</td>
<td style="text-align: left;">-3.1292</td>
<td style="text-align: left;">-3.1292</td>
<td style="text-align: left;">-3.1292</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">0.3341</td>
<td style="text-align: left;">0.3341</td>
<td style="text-align: left;">0.3341</td>
<td style="text-align: left;">0.3341</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">35.6689</td>
<td style="text-align: left;">37.0334</td>
<td style="text-align: left;">43.2564</td>
<td style="text-align: left;">44.097</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-0.2877</td>
<td style="text-align: left;">-0.2877</td>
<td style="text-align: left;">-0.2877</td>
<td style="text-align: left;">-0.2877</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0816</td>
<td style="text-align: left;">0.0816</td>
<td style="text-align: left;">0.0816</td>
<td style="text-align: left;">0.0816</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-0.2877</td>
<td style="text-align: left;">-0.2877</td>
<td style="text-align: left;">-0.2877</td>
<td style="text-align: left;">-0.2877</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-0.4477</td>
<td style="text-align: left;">-0.4477</td>
<td style="text-align: left;">-0.4477</td>
<td style="text-align: left;">-0.4477</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-0.1277</td>
<td style="text-align: left;">-0.1277</td>
<td style="text-align: left;">-0.1277</td>
<td style="text-align: left;">-0.1277</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-0.295</td>
<td style="text-align: left;">-0.295</td>
<td style="text-align: left;">-0.295</td>
<td style="text-align: left;">-0.295</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0814</td>
<td style="text-align: left;">0.0814</td>
<td style="text-align: left;">0.0814</td>
<td style="text-align: left;">0.0814</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-0.2951</td>
<td style="text-align: left;">-0.2951</td>
<td style="text-align: left;">-0.295</td>
<td style="text-align: left;">-0.295</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-0.4546</td>
<td style="text-align: left;">-0.4546</td>
<td style="text-align: left;">-0.4545</td>
<td style="text-align: left;">-0.4545</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-0.1356</td>
<td style="text-align: left;">-0.1355</td>
<td style="text-align: left;">-0.1355</td>
<td style="text-align: left;">-0.1355</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.2481</td>
<td style="text-align: left;">0.2484</td>
<td style="text-align: left;">0.25</td>
<td style="text-align: left;">0.2503</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.021</td>
<td style="text-align: left;">0.0212</td>
<td style="text-align: left;">0.0229</td>
<td style="text-align: left;">0.0233</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.247</td>
<td style="text-align: left;">0.2474</td>
<td style="text-align: left;">0.2492</td>
<td style="text-align: left;">0.2494</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.2052</td>
<td style="text-align: left;">0.2058</td>
<td style="text-align: left;">0.2104</td>
<td style="text-align: left;">0.2108</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.2904</td>
<td style="text-align: left;">0.2923</td>
<td style="text-align: left;">0.299</td>
<td style="text-align: left;">0.3019</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.3407</td>
<td style="text-align: left;">0.3414</td>
<td style="text-align: left;">0.3473</td>
<td style="text-align: left;">0.3486</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.4002</td>
<td style="text-align: left;">0.4047</td>
<td style="text-align: left;">0.4458</td>
<td style="text-align: left;">0.477</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.247</td>
<td style="text-align: left;">0.2473</td>
<td style="text-align: left;">0.249</td>
<td style="text-align: left;">0.2492</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0424</td>
<td style="text-align: left;">0.0428</td>
<td style="text-align: left;">0.0446</td>
<td style="text-align: left;">0.0452</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">1.3585</td>
<td style="text-align: left;">1.3687</td>
<td style="text-align: left;">1.4258</td>
<td style="text-align: left;">1.4427</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.7464</td>
<td style="text-align: left;">0.7466</td>
<td style="text-align: left;">0.7474</td>
<td style="text-align: left;">0.7476</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0604</td>
<td style="text-align: left;">0.0606</td>
<td style="text-align: left;">0.0612</td>
<td style="text-align: left;">0.0614</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.7438</td>
<td style="text-align: left;">0.744</td>
<td style="text-align: left;">0.7451</td>
<td style="text-align: left;">0.7452</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.6334</td>
<td style="text-align: left;">0.6337</td>
<td style="text-align: left;">0.6357</td>
<td style="text-align: left;">0.6362</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.8715</td>
<td style="text-align: left;">0.8719</td>
<td style="text-align: left;">0.8746</td>
<td style="text-align: left;">0.875</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.11"><h3 data-number="7.11" id="scenario-11---continued-study-duration-with-realistic-setting-1">
<span class="header-section-number">7.11</span> <strong>Scenario 11 - Continued study duration with Realistic Setting</strong>
<a class="anchor" aria-label="anchor" href="#scenario-11---continued-study-duration-with-realistic-setting-1"></a>
</h3>
<p>Scenario 11 describes a binary endpoint for a realistic situation where the study continued regardless of when the proposed number of events has been observed. Characteristics of this scenario includes a drop out rate of 5%, noise at a 5% tau, homogeneous historical data and no planned prior data conflict planned.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen11"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701876972</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP  TREAT
1_g1 Study#1    1  g1 200    Scen11       170 1871.1930 Scen11
2_g1 Study#2    1  g1 200    Scen11       173 1630.1105 Scen11
3_g1 Study#3    1  g1 200    Scen11       168 1744.6636 Scen11
4_g1 Study#4    1  g1 200    Scen11       170 1904.9560 Scen11
5_g1 Study#5    1  g1 200    Scen11       166 1748.6775 Scen11
6_g1 Study#6    0  g1 200    Scen11       162 1879.6921 Scen11
1_g2 Study#1    1  g2 200    Scen11       191  910.6017 Scen11
2_g2 Study#2    1  g2 200    Scen11       192  957.8531 Scen11
3_g2 Study#3    1  g2 200    Scen11       196  922.9765 Scen11
4_g2 Study#4    1  g2 200    Scen11       198  927.3806 Scen11
5_g2 Study#5    1  g2 200    Scen11       193 1027.3669 Scen11
6_g2 Study#6    0  g2 200    Scen11       196 1068.8192 Scen11</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                       csv group
Continued study duration with Realistic Setting Scen11.csv    g1
                                                                 analysis
Continued study duration with Realistic Setting Exposure-adjusted AE rate
                                                saf_topic       seed pool
Continued study duration with Realistic Setting    Scen11 1701876972 TRUE
                                                       tau heterog  ESS
Continued study duration with Realistic Setting HalfNormal   Small elir
                                                rob_weight rob_mean nta_event
Continued study duration with Realistic Setting       0.05   0.0952        95
                                                nta_time
Continued study duration with Realistic Setting     1000</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.3521</td>
<td style="text-align: left;">-2.3513</td>
<td style="text-align: left;">-2.3463</td>
<td style="text-align: left;">-2.3453</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0589</td>
<td style="text-align: left;">0.0597</td>
<td style="text-align: left;">0.0649</td>
<td style="text-align: left;">0.0655</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.3523</td>
<td style="text-align: left;">-2.3513</td>
<td style="text-align: left;">-2.3469</td>
<td style="text-align: left;">-2.3458</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.4911</td>
<td style="text-align: left;">-2.4839</td>
<td style="text-align: left;">-2.4642</td>
<td style="text-align: left;">-2.4586</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.2348</td>
<td style="text-align: left;">-2.2301</td>
<td style="text-align: left;">-2.2103</td>
<td style="text-align: left;">-2.2039</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">299.5604</td>
<td style="text-align: left;">311.3627</td>
<td style="text-align: left;">365.3138</td>
<td style="text-align: left;">1262606.9623</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.3521</td>
<td style="text-align: left;">-2.3513</td>
<td style="text-align: left;">-2.3466</td>
<td style="text-align: left;">-2.3457</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.2309</td>
<td style="text-align: left;">0.2311</td>
<td style="text-align: left;">0.2324</td>
<td style="text-align: left;">0.2325</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.3518</td>
<td style="text-align: left;">-2.3511</td>
<td style="text-align: left;">-2.3469</td>
<td style="text-align: left;">-2.3458</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.5792</td>
<td style="text-align: left;">-2.5738</td>
<td style="text-align: left;">-2.5376</td>
<td style="text-align: left;">-2.5329</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.164</td>
<td style="text-align: left;">-2.1585</td>
<td style="text-align: left;">-2.1204</td>
<td style="text-align: left;">-2.1145</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">279.3413</td>
<td style="text-align: left;">290.0707</td>
<td style="text-align: left;">341.237</td>
<td style="text-align: left;">1168901.7112</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-2.3539</td>
<td style="text-align: left;">-2.3539</td>
<td style="text-align: left;">-2.3539</td>
<td style="text-align: left;">-2.3539</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.1026</td>
<td style="text-align: left;">0.1026</td>
<td style="text-align: left;">0.1026</td>
<td style="text-align: left;">0.1026</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-2.3539</td>
<td style="text-align: left;">-2.3539</td>
<td style="text-align: left;">-2.3539</td>
<td style="text-align: left;">-2.3539</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.555</td>
<td style="text-align: left;">-2.555</td>
<td style="text-align: left;">-2.555</td>
<td style="text-align: left;">-2.555</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.1528</td>
<td style="text-align: left;">-2.1528</td>
<td style="text-align: left;">-2.1528</td>
<td style="text-align: left;">-2.1528</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-2.3523</td>
<td style="text-align: left;">-2.3518</td>
<td style="text-align: left;">-2.3486</td>
<td style="text-align: left;">-2.3477</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0472</td>
<td style="text-align: left;">0.0475</td>
<td style="text-align: left;">0.0498</td>
<td style="text-align: left;">0.0503</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-2.3522</td>
<td style="text-align: left;">-2.3517</td>
<td style="text-align: left;">-2.3482</td>
<td style="text-align: left;">-2.3475</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.4554</td>
<td style="text-align: left;">-2.4516</td>
<td style="text-align: left;">-2.4434</td>
<td style="text-align: left;">-2.4414</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.2594</td>
<td style="text-align: left;">-2.2571</td>
<td style="text-align: left;">-2.2494</td>
<td style="text-align: left;">-2.2474</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.0954</td>
<td style="text-align: left;">0.0954</td>
<td style="text-align: left;">0.0959</td>
<td style="text-align: left;">0.096</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0056</td>
<td style="text-align: left;">0.0057</td>
<td style="text-align: left;">0.0063</td>
<td style="text-align: left;">0.0064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.0951</td>
<td style="text-align: left;">0.0952</td>
<td style="text-align: left;">0.0957</td>
<td style="text-align: left;">0.0958</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0828</td>
<td style="text-align: left;">0.0834</td>
<td style="text-align: left;">0.0851</td>
<td style="text-align: left;">0.0856</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.107</td>
<td style="text-align: left;">0.1075</td>
<td style="text-align: left;">0.1097</td>
<td style="text-align: left;">0.1104</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.0983</td>
<td style="text-align: left;">0.0984</td>
<td style="text-align: left;">0.0992</td>
<td style="text-align: left;">0.0993</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.041</td>
<td style="text-align: left;">0.0424</td>
<td style="text-align: left;">0.0578</td>
<td style="text-align: left;">0.0706</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.0952</td>
<td style="text-align: left;">0.0952</td>
<td style="text-align: left;">0.0957</td>
<td style="text-align: left;">0.0957</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0755</td>
<td style="text-align: left;">0.076</td>
<td style="text-align: left;">0.0792</td>
<td style="text-align: left;">0.0795</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1143</td>
<td style="text-align: left;">0.1154</td>
<td style="text-align: left;">0.1202</td>
<td style="text-align: left;">0.1212</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.0953</td>
<td style="text-align: left;">0.0953</td>
<td style="text-align: left;">0.0956</td>
<td style="text-align: left;">0.0957</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0045</td>
<td style="text-align: left;">0.0045</td>
<td style="text-align: left;">0.0048</td>
<td style="text-align: left;">0.0048</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.0951</td>
<td style="text-align: left;">0.0952</td>
<td style="text-align: left;">0.0956</td>
<td style="text-align: left;">0.0956</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0857</td>
<td style="text-align: left;">0.0861</td>
<td style="text-align: left;">0.0869</td>
<td style="text-align: left;">0.087</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1044</td>
<td style="text-align: left;">0.1046</td>
<td style="text-align: left;">0.1055</td>
<td style="text-align: left;">0.1057</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.12"><h3 data-number="7.12" id="scenario-12---continued-study-duration-with-worst-setting-1">
<span class="header-section-number">7.12</span> <strong>Scenario 12 - Continued study duration with Worst Setting</strong>
<a class="anchor" aria-label="anchor" href="#scenario-12---continued-study-duration-with-worst-setting-1"></a>
</h3>
<p>Scenario 12 describes a binary endpoint for a scenario with a worst case scenario (scenario 4) that continued till the end of the proposed study duration. The scenario characteristics includes huge censoring, huge noise, little events observed, heterogeneous historical and huge prior data conflict.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">400</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.15</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.05</span>, g2 <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen12"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1701878308</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP  TREAT
1_g1 Study#1    1  g1 200    Scen12       193 2145.2002 Scen12
2_g1 Study#2    1  g1 200    Scen12       189 2026.7007 Scen12
3_g1 Study#3    1  g1 200    Scen12       192 2099.1503 Scen12
4_g1 Study#4    1  g1 200    Scen12       193 2200.2265 Scen12
5_g1 Study#5    1  g1 200    Scen12       189 2060.4879 Scen12
6_g1 Study#6    0  g1 200    Scen12       193 3214.6233 Scen12
1_g2 Study#1    1  g2 200    Scen12       196  927.0819 Scen12
2_g2 Study#2    1  g2 200    Scen12       193 1097.0120 Scen12
3_g2 Study#3    1  g2 200    Scen12       196 1112.5535 Scen12
4_g2 Study#4    1  g2 200    Scen12       195 1489.9002 Scen12
5_g2 Study#5    1  g2 200    Scen12       198 1575.7302 Scen12
6_g2 Study#6    0  g2 200    Scen12       191 1811.5262 Scen12</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                   csv group
Continued study duration with Worst Setting Scen12.csv    g1
                                                             analysis saf_topic
Continued study duration with Worst Setting Exposure-adjusted AE rate    Scen12
                                                  seed pool        tau heterog
Continued study duration with Worst Setting 1701878308 TRUE HalfNormal   Large
                                             ESS rob_weight rob_mean nta_event
Continued study duration with Worst Setting elir        0.5      0.2       200
                                            nta_time
Continued study duration with Worst Setting     1000</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.4007</td>
<td style="text-align: left;">-2.399</td>
<td style="text-align: left;">-2.3921</td>
<td style="text-align: left;">-2.3859</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0719</td>
<td style="text-align: left;">0.0743</td>
<td style="text-align: left;">0.0966</td>
<td style="text-align: left;">0.1169</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.3997</td>
<td style="text-align: left;">-2.3989</td>
<td style="text-align: left;">-2.3946</td>
<td style="text-align: left;">-2.3934</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.5746</td>
<td style="text-align: left;">-2.5692</td>
<td style="text-align: left;">-2.5346</td>
<td style="text-align: left;">-2.528</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.2592</td>
<td style="text-align: left;">-2.2532</td>
<td style="text-align: left;">-2.2114</td>
<td style="text-align: left;">-2.137</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">215.9405</td>
<td style="text-align: left;">243.3979</td>
<td style="text-align: left;">341.7026</td>
<td style="text-align: left;">361.8332</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.0051</td>
<td style="text-align: left;">-2.0042</td>
<td style="text-align: left;">-2.0008</td>
<td style="text-align: left;">-1.9977</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.8101</td>
<td style="text-align: left;">0.8103</td>
<td style="text-align: left;">0.812</td>
<td style="text-align: left;">0.8124</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.3596</td>
<td style="text-align: left;">-2.3586</td>
<td style="text-align: left;">-2.3498</td>
<td style="text-align: left;">-2.3461</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-3.2554</td>
<td style="text-align: left;">-3.2546</td>
<td style="text-align: left;">-3.2543</td>
<td style="text-align: left;">-3.2543</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">0.0354</td>
<td style="text-align: left;">0.0354</td>
<td style="text-align: left;">0.0354</td>
<td style="text-align: left;">0.0354</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">87.8082</td>
<td style="text-align: left;">102.4652</td>
<td style="text-align: left;">149.6522</td>
<td style="text-align: left;">159.3782</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-1.6094</td>
<td style="text-align: left;">-1.6094</td>
<td style="text-align: left;">-1.6094</td>
<td style="text-align: left;">-1.6094</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0707</td>
<td style="text-align: left;">0.0707</td>
<td style="text-align: left;">0.0707</td>
<td style="text-align: left;">0.0707</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-1.6094</td>
<td style="text-align: left;">-1.6094</td>
<td style="text-align: left;">-1.6094</td>
<td style="text-align: left;">-1.6094</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-1.748</td>
<td style="text-align: left;">-1.748</td>
<td style="text-align: left;">-1.748</td>
<td style="text-align: left;">-1.748</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.4708</td>
<td style="text-align: left;">-1.4708</td>
<td style="text-align: left;">-1.4708</td>
<td style="text-align: left;">-1.4708</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-1.6105</td>
<td style="text-align: left;">-1.6098</td>
<td style="text-align: left;">-1.6094</td>
<td style="text-align: left;">-1.6094</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0705</td>
<td style="text-align: left;">0.0705</td>
<td style="text-align: left;">0.0707</td>
<td style="text-align: left;">0.0707</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-1.6105</td>
<td style="text-align: left;">-1.6098</td>
<td style="text-align: left;">-1.6094</td>
<td style="text-align: left;">-1.6094</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-1.7492</td>
<td style="text-align: left;">-1.7483</td>
<td style="text-align: left;">-1.7477</td>
<td style="text-align: left;">-1.7477</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-1.4719</td>
<td style="text-align: left;">-1.4714</td>
<td style="text-align: left;">-1.4712</td>
<td style="text-align: left;">-1.4712</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.0909</td>
<td style="text-align: left;">0.0911</td>
<td style="text-align: left;">0.0919</td>
<td style="text-align: left;">0.0927</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0067</td>
<td style="text-align: left;">0.0069</td>
<td style="text-align: left;">0.0122</td>
<td style="text-align: left;">0.0167</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.0907</td>
<td style="text-align: left;">0.0908</td>
<td style="text-align: left;">0.0912</td>
<td style="text-align: left;">0.0913</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0762</td>
<td style="text-align: left;">0.0766</td>
<td style="text-align: left;">0.0793</td>
<td style="text-align: left;">0.0798</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1044</td>
<td style="text-align: left;">0.1051</td>
<td style="text-align: left;">0.1095</td>
<td style="text-align: left;">0.118</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.2074</td>
<td style="text-align: left;">0.2081</td>
<td style="text-align: left;">0.213</td>
<td style="text-align: left;">0.2138</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.311</td>
<td style="text-align: left;">0.3147</td>
<td style="text-align: left;">0.3476</td>
<td style="text-align: left;">0.3697</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.0944</td>
<td style="text-align: left;">0.0945</td>
<td style="text-align: left;">0.0954</td>
<td style="text-align: left;">0.0958</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0372</td>
<td style="text-align: left;">0.0377</td>
<td style="text-align: left;">0.0395</td>
<td style="text-align: left;">0.0397</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">1.0015</td>
<td style="text-align: left;">1.0116</td>
<td style="text-align: left;">1.0596</td>
<td style="text-align: left;">1.0625</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.2003</td>
<td style="text-align: left;">0.2004</td>
<td style="text-align: left;">0.2006</td>
<td style="text-align: left;">0.2006</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0141</td>
<td style="text-align: left;">0.0141</td>
<td style="text-align: left;">0.0142</td>
<td style="text-align: left;">0.0143</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.1998</td>
<td style="text-align: left;">0.1998</td>
<td style="text-align: left;">0.2001</td>
<td style="text-align: left;">0.2002</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.1738</td>
<td style="text-align: left;">0.1739</td>
<td style="text-align: left;">0.1744</td>
<td style="text-align: left;">0.1745</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.2293</td>
<td style="text-align: left;">0.2293</td>
<td style="text-align: left;">0.23</td>
<td style="text-align: left;">0.23</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level2" data-number="7.13"><h3 data-number="7.13" id="scenario-13---different-treatment-length-1">
<span class="header-section-number">7.13</span> <strong>Scenario 13 - Different treatment length</strong>
<a class="anchor" aria-label="anchor" href="#scenario-13---different-treatment-length-1"></a>
</h3>
<p>Scenario 13 describes a good scenario with different treatment length.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">SimTestData</span><span class="op">(</span></span>
<span>  SimStudy_nPat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">200</span>, g2 <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>,</span>
<span>  SimStudy_hz <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>g1 <span class="op">=</span> <span class="fl">0.1</span>, g2 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  SimStudy_dropout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>rate <span class="op">=</span> <span class="fl">0.05</span>, time <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>  SimStudy_accr <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  SimStudy_accr_method <span class="op">=</span> <span class="st">"Uniform"</span>,</span>
<span>  SimStudy_surv_method <span class="op">=</span> <span class="st">"Exponential"</span>,</span>
<span>  SimStudy_intensity <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_accr_timepoint <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SimStudy_time_cutoff <span class="op">=</span> <span class="fl">18</span>,</span>
<span>  SimStudy_NObsEvt <span class="op">=</span> <span class="fl">93</span>,</span>
<span>  SimStudy_censor_type <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  nStudy <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  tau <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prior_data_conflict <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  diff_trt_length <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pdc_hz <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  SAF_TOPIC <span class="op">=</span> <span class="st">"Scen13"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1718356066</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     STUDYID HIST ARM   N SAF_TOPIC N_WITH_AE   TOT_EXP LENGTH  TREAT
1_g1 Study#1    1  g1 200    Scen13       151 1566.6752    548 Scen13
2_g1 Study#2    1  g1 200    Scen13       150 1494.2869    548 Scen13
3_g1 Study#3    1  g1 200    Scen13       174 1599.3219    730 Scen13
4_g1 Study#4    1  g1 200    Scen13       173 1799.5756    730 Scen13
5_g1 Study#5    1  g1 200    Scen13       185 1708.9438    912 Scen13
6_g1 Study#6    0  g1 200    Scen13       186 1681.4362    912 Scen13
1_g2 Study#1    1  g2 200    Scen13       185  897.0528    548 Scen13
2_g2 Study#2    1  g2 200    Scen13       185  872.8150    548 Scen13
3_g2 Study#3    1  g2 200    Scen13       191  943.3266    730 Scen13
4_g2 Study#4    1  g2 200    Scen13       194  872.9301    730 Scen13
5_g2 Study#5    1  g2 200    Scen13       192 1047.1975    912 Scen13
6_g2 Study#6    0  g2 200    Scen13       198  861.1155    912 Scen13</code></pre>
</div>
</div>
<p>The characteristics and thresholds for the simulation is as in the table below:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "With those values our newly created MAP Prior has been updated:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                              csv group                  analysis saf_topic
Different Study length Scen13.csv    g1 Exposure-adjusted AE rate    Scen13
                             seed pool        tau heterog  ESS rob_weight
Different Study length 1718356066 TRUE HalfNormal   Large elir        0.1
                       rob_mean nta_event nta_time
Different Study length      0.2       186     1681</code></pre>
</div>
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 42%">
<col style="width: 13%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 13%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Characteristic</th>
<th style="text-align: left;">Observed Min.</th>
<th style="text-align: left;">Lower Threshold</th>
<th style="text-align: left;">Upper Threshold</th>
<th style="text-align: left;">Observed Max.</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: mean</td>
<td style="text-align: left;">-2.2829</td>
<td style="text-align: left;">-2.2822</td>
<td style="text-align: left;">-2.2734</td>
<td style="text-align: left;">-2.2617</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected MAP Prior: SD</td>
<td style="text-align: left;">0.0946</td>
<td style="text-align: left;">0.0965</td>
<td style="text-align: left;">0.1219</td>
<td style="text-align: left;">0.1767</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected MAP Prior: median</td>
<td style="text-align: left;">-2.2833</td>
<td style="text-align: left;">-2.2827</td>
<td style="text-align: left;">-2.2771</td>
<td style="text-align: left;">-2.2764</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.5127</td>
<td style="text-align: left;">-2.5027</td>
<td style="text-align: left;">-2.4621</td>
<td style="text-align: left;">-2.4577</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.0905</td>
<td style="text-align: left;">-2.0846</td>
<td style="text-align: left;">-2.0242</td>
<td style="text-align: left;">-1.9657</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">167.9332</td>
<td style="text-align: left;">192.2866</td>
<td style="text-align: left;">233.9965</td>
<td style="text-align: left;">240.882</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">-2.2156</td>
<td style="text-align: left;">-2.2149</td>
<td style="text-align: left;">-2.207</td>
<td style="text-align: left;">-2.1965</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.3853</td>
<td style="text-align: left;">0.3857</td>
<td style="text-align: left;">0.3915</td>
<td style="text-align: left;">0.4079</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected robustified MAP Prior: median</td>
<td style="text-align: left;">-2.2787</td>
<td style="text-align: left;">-2.2781</td>
<td style="text-align: left;">-2.2733</td>
<td style="text-align: left;">-2.2723</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.6303</td>
<td style="text-align: left;">-2.6134</td>
<td style="text-align: left;">-2.5514</td>
<td style="text-align: left;">-2.5432</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-0.9349</td>
<td style="text-align: left;">-0.9349</td>
<td style="text-align: left;">-0.9262</td>
<td style="text-align: left;">-0.8651</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">146.3424</td>
<td style="text-align: left;">168.5202</td>
<td style="text-align: left;">205.9121</td>
<td style="text-align: left;">212.005</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: mean</td>
<td style="text-align: left;">-2.2014</td>
<td style="text-align: left;">-2.2014</td>
<td style="text-align: left;">-2.2014</td>
<td style="text-align: left;">-2.2014</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Likelihood: SD</td>
<td style="text-align: left;">0.0733</td>
<td style="text-align: left;">0.0733</td>
<td style="text-align: left;">0.0733</td>
<td style="text-align: left;">0.0733</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Likelihood: median</td>
<td style="text-align: left;">-2.2014</td>
<td style="text-align: left;">-2.2014</td>
<td style="text-align: left;">-2.2014</td>
<td style="text-align: left;">-2.2014</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.3451</td>
<td style="text-align: left;">-2.3451</td>
<td style="text-align: left;">-2.3451</td>
<td style="text-align: left;">-2.3451</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.0577</td>
<td style="text-align: left;">-2.0577</td>
<td style="text-align: left;">-2.0577</td>
<td style="text-align: left;">-2.0577</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: mean</td>
<td style="text-align: left;">-2.2481</td>
<td style="text-align: left;">-2.2474</td>
<td style="text-align: left;">-2.2436</td>
<td style="text-align: left;">-2.2406</td>
</tr>
<tr class="even">
<td style="text-align: left;">log Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0489</td>
<td style="text-align: left;">0.0501</td>
<td style="text-align: left;">0.053</td>
<td style="text-align: left;">0.0537</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log Expected results for Posterior: median</td>
<td style="text-align: left;">-2.252</td>
<td style="text-align: left;">-2.2517</td>
<td style="text-align: left;">-2.2469</td>
<td style="text-align: left;">-2.2415</td>
</tr>
<tr class="even">
<td style="text-align: left;">log 95% CrILB</td>
<td style="text-align: left;">-2.3411</td>
<td style="text-align: left;">-2.3397</td>
<td style="text-align: left;">-2.3358</td>
<td style="text-align: left;">-2.3351</td>
</tr>
<tr class="odd">
<td style="text-align: left;">log 95% CrIUB</td>
<td style="text-align: left;">-2.1423</td>
<td style="text-align: left;">-2.1369</td>
<td style="text-align: left;">-2.1243</td>
<td style="text-align: left;">-2.1228</td>
</tr>
<tr class="even">
<td style="text-align: left;">log ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: mean</td>
<td style="text-align: left;">0.1025</td>
<td style="text-align: left;">0.1026</td>
<td style="text-align: left;">0.1038</td>
<td style="text-align: left;">0.1065</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected MAP Prior: SD</td>
<td style="text-align: left;">0.01</td>
<td style="text-align: left;">0.0102</td>
<td style="text-align: left;">0.019</td>
<td style="text-align: left;">0.04</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected MAP Prior: median</td>
<td style="text-align: left;">0.1019</td>
<td style="text-align: left;">0.102</td>
<td style="text-align: left;">0.1026</td>
<td style="text-align: left;">0.1026</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0811</td>
<td style="text-align: left;">0.0819</td>
<td style="text-align: left;">0.0853</td>
<td style="text-align: left;">0.0856</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1236</td>
<td style="text-align: left;">0.1244</td>
<td style="text-align: left;">0.1321</td>
<td style="text-align: left;">0.1401</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: mean</td>
<td style="text-align: left;">0.1244</td>
<td style="text-align: left;">0.1246</td>
<td style="text-align: left;">0.1271</td>
<td style="text-align: left;">0.1294</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected robustified MAP Prior: SD</td>
<td style="text-align: left;">0.1379</td>
<td style="text-align: left;">0.1413</td>
<td style="text-align: left;">0.1704</td>
<td style="text-align: left;">0.1962</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected robustified MAP Prior: median</td>
<td style="text-align: left;">0.1024</td>
<td style="text-align: left;">0.1025</td>
<td style="text-align: left;">0.103</td>
<td style="text-align: left;">0.1031</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0722</td>
<td style="text-align: left;">0.0732</td>
<td style="text-align: left;">0.0781</td>
<td style="text-align: left;">0.0788</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.3773</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">0.4075</td>
<td style="text-align: left;">0.4275</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: mean</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Likelihood: SD</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Likelihood: median</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: mean</td>
<td style="text-align: left;">0.1057</td>
<td style="text-align: left;">0.1058</td>
<td style="text-align: left;">0.1062</td>
<td style="text-align: left;">0.1066</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp Expected results for Posterior: SD</td>
<td style="text-align: left;">0.0052</td>
<td style="text-align: left;">0.0054</td>
<td style="text-align: left;">0.0057</td>
<td style="text-align: left;">0.0058</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp Expected results for Posterior: median</td>
<td style="text-align: left;">0.1052</td>
<td style="text-align: left;">0.1052</td>
<td style="text-align: left;">0.1057</td>
<td style="text-align: left;">0.1063</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp 95% CrILB</td>
<td style="text-align: left;">0.0963</td>
<td style="text-align: left;">0.0964</td>
<td style="text-align: left;">0.0967</td>
<td style="text-align: left;">0.0968</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exp 95% CrIUB</td>
<td style="text-align: left;">0.1174</td>
<td style="text-align: left;">0.118</td>
<td style="text-align: left;">0.1196</td>
<td style="text-align: left;">0.1198</td>
</tr>
<tr class="even">
<td style="text-align: left;">exp ENE</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section></section><section class="section level2" data-number="8"><h2 data-number="8" id="summary">
<span class="header-section-number">8</span> <strong>Summary</strong>
<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>In summary, all input checks are in place and work for encountered errors during development and user tests. All graphics and tables are displayed correctly. Defined thresholds underwent an independent source code review. The method implementation in the source code was reviewed against the statistical analysis plan (see ) and showed no errors.</p>
<p>The structural tests were all passed except for scenario 2, 4, 12 and proportions for scenario 13. For Scenario 2, 4 and 12 (the worst scenarios) the issues stem from problems with the integration within . Scenario 13 describes with different treatment length. For two reasons the testing for proportions were therefor excluded. First, the estimator is incorrect for that estimand. Because incidence proportions have to be estimated for equal treatment length. Second, by doing so, the results have a very high variability over the simulations and the testing tolerance would be irresponsibly high. In the case of different treatment duration, we recommend using incidence rates.</p>
<p>None of the source code showed any discrepancy between the independent reviewed testing scripts and the functions of the app.</p>
</section><section class="section level2" data-number="9"><h2 class="unnumbered" data-number="9" id="references">
<span class="header-section-number">9</span> <strong>References</strong>
<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body" role="list">
<div id="ref-neuenschwander_summarizing_2010" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div>
<div class="csl-right-inline">
<span class="smallcaps">Neuenschwander</span>, B., <span class="smallcaps">Capkun-Niggli</span>, G., <span class="smallcaps">Branson</span>, M. and <span class="smallcaps">Spiegelhalter</span>, D. J. (2010). <a href="https://doi.org/10.1177/1740774509356002" class="external-link">Summarizing historical information on controls in clinical trials</a>. <em>Clinical Trials</em> <strong>7</strong> 5–18.</div>
</div>
</div>
</section><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button,
        { trigger: "manual",
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config);
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alexander Stemke, Lars Andersen, Steven Brooks, Boehringer Ingelheim Pharma GmbH &amp; Co. KG.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
